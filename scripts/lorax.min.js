!function(){var a,b,c;!function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,b){return function(){var c=v.call(arguments,0);return"string"!=typeof c[0]&&1===c.length&&c.push(null),n.apply(d,c.concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[],v=typeof c;if(f=f||a,"undefined"===v||"function"===v){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c?c.apply(q[a],u):void 0,a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){if("string"==typeof a)return p[a]?p[a](b):j(o(a,b).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n},n.config=function(a){return n(a)},a._defined=q,c=function(a,b,c){b.splice||(c=b,b=[]),!e(q,a)&&!e(r,a)&&(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("../scripts/components/almond/almond",function(){}),c("lorax/config/routes",[],function(){var a=function(a,b){b.html5Mode({enabled:!0,requireBase:!1}),a.when("/",{controller:"CoreCtrl",page:"experience"}).when("/:mode",{controller:"CoreCtrl",page:"experience"}).when("/tag/:tag",{controller:"CoreCtrl",mode:"tag",page:"experience"}).when("/detail/:topic",{controller:"CoreCtrl",page:"detail"}).when("/detail/:topic/:issue",{controller:"CoreCtrl",page:"detail"}).when("/error",{redirectTo:"/"})};return a.$inject=["$routeProvider","$locationProvider"],a}),function(a,b){function c(a,b){var c=a.split("."),d=$;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function d(a){return a.call.apply(a.bind,arguments)}function e(a,b){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,c),a.apply(b,d)}}return function(){return a.apply(b,arguments)}}function f(){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:e,f.apply(null,arguments)}function g(a,b){this.K=a,this.w=b||a,this.D=this.w.document}function h(a,c,d){a=a.D.getElementsByTagName(c)[0],a||(a=b.documentElement),a&&a.lastChild&&a.insertBefore(d,a.lastChild)}function i(a,b){function c(){a.D.body?b():setTimeout(c,0)}c()}function j(a,b,c){b=b||[],c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}for(b=[],e=0;e<d.length;e+=1){for(f=!1,g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function k(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;e>d;d++)if(c[d]==b)return!0;return!1}function l(a){var b=a.w.location.protocol;return"about:"==b&&(b=a.K.location.protocol),"https:"==b?"https:":"http:"}function m(a,b){var c=a.createElement("link",{rel:"stylesheet",href:b}),d=!1;c.onload=function(){d||(d=!0)},c.onerror=function(){d||(d=!0)},h(a,"head",c)}function n(b,c,d,e){var f=b.D.getElementsByTagName("head")[0];if(f){var g=b.createElement("script",{src:c}),h=!1;return g.onload=g.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,d&&d(null),g.onload=g.onreadystatechange=null,"HEAD"==g.parentNode.tagName&&f.removeChild(g))},f.appendChild(g),a.setTimeout(function(){h||(h=!0,d&&d(Error("Script load timeout")))},e||5e3),g}return null}function o(a,b,c,d){this.R=a,this.Z=b,this.Ba=c,this.ra=d}function p(a,b,c,d){this.c=null!=a?a:null,this.g=null!=b?b:null,this.B=null!=c?c:null,this.e=null!=d?d:null}function q(a){a=ab.exec(a);var b=null,c=null,d=null,e=null;return a&&(null!==a[1]&&a[1]&&(b=parseInt(a[1],10)),null!==a[2]&&a[2]&&(c=parseInt(a[2],10)),null!==a[3]&&a[3]&&(d=parseInt(a[3],10)),null!==a[4]&&a[4]&&(e=/^[0-9]+$/.test(a[4])?parseInt(a[4],10):a[4])),new p(b,c,d,e)}function r(a,b,c,d,e,f,g,h){this.P=a,this.ja=c,this.ya=e,this.ia=g,this.m=h}function s(a,b){this.a=a,this.k=b}function t(a){var b=w(a.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=b?(/BB\d{2}/.test(b)&&(b="BlackBerry"),b):(a=w(a.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=a?("Mac_PowerPC"==a?a="Macintosh":"PlayStation"==a&&(a="Linux"),a):"Unknown")}function u(a){var b=w(a.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(b||(b=w(a.a,/Windows Phone( OS)? ([^;)]+)/,2))||(b=w(a.a,/(iPhone )?OS ([\d_]+)/,2)))return b;if(b=w(a.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var b=b.split(/\s/),c=0;c<b.length;c+=1)if(/^[\d\._]+$/.test(b[c]))return b[c];return(a=w(a.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?a:"Unknown"}function v(a){var b=t(a),c=q(u(a)),d=q(w(a.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),e="Unknown",f=new p,f="Unknown",g=!1;return/OPR\/[\d.]+/.test(a.a)?e="Opera":-1!=a.a.indexOf("Chrome")||-1!=a.a.indexOf("CrMo")||-1!=a.a.indexOf("CriOS")?e="Chrome":/Silk\/\d/.test(a.a)?e="Silk":"BlackBerry"==b||"Android"==b?e="BuiltinBrowser":-1!=a.a.indexOf("PhantomJS")?e="PhantomJS":-1!=a.a.indexOf("Safari")?e="Safari":-1!=a.a.indexOf("AdobeAIR")?e="AdobeAIR":-1!=a.a.indexOf("PlayStation")&&(e="BuiltinBrowser"),"BuiltinBrowser"==e?f="Unknown":"Silk"==e?f=w(a.a,/Silk\/([\d\._]+)/,1):"Chrome"==e?f=w(a.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=a.a.indexOf("Version/")?f=w(a.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==e?f=w(a.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==e?f=w(a.a,/OPR\/([\d.]+)/,1):"PhantomJS"==e&&(f=w(a.a,/PhantomJS\/([\d.]+)/,1)),f=q(f),g="AdobeAIR"==e?2<f.c||2==f.c&&5<=f.g:"BlackBerry"==b?10<=c.c:"Android"==b?2<c.c||2==c.c&&1<c.g:526<=d.c||525<=d.c&&13<=d.g,new r(e,0,"AppleWebKit",0,b,0,x(a.k),new o(g,536>d.c||536==d.c&&11>d.g,"iPhone"==b||"iPad"==b||"iPod"==b||"Macintosh"==b,!!a.k.fonts))}function w(a,b,c){return(a=a.match(b))&&a[c]?a[c]:""}function x(a){return a.documentMode?a.documentMode:void 0}function y(a){this.xa=a||"-"}function z(a,b){this.P=a,this.$=4,this.Q="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.Q=c[1],this.$=parseInt(c[2],10))}function A(a){return a.Q+a.$}function B(a){var b=4,c="n",d=null;return a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10)))),c+b}function C(a,b,c,d,e){this.d=a,this.q=b,this.T=c,this.j="wf",this.h=new y("-"),this.ha=!1!==d,this.C=!1!==e}function D(a){if(a.C){var b=k(a.q,a.h.e(a.j,"active")),c=[],d=[a.h.e(a.j,"loading")];b||c.push(a.h.e(a.j,"inactive")),j(a.q,c,d)}E(a,"inactive")}function E(a,b,c){a.ha&&a.T[b]&&(c?a.T[b](c.getName(),A(c)):a.T[b]())}function F(){this.A={}}function G(a,b){this.d=a,this.H=b,this.o=this.d.createElement("span",{"aria-hidden":"true"},this.H)}function H(a){h(a.d,"body",a.o)}function I(a){var b;b=[];for(var c=a.P.split(/,\s*/),d=0;d<c.length;d++){var e=c[d].replace(/['"]/g,"");b.push(-1==e.indexOf(" ")?e:"'"+e+"'")}return b=b.join(","),c="normal","o"===a.Q?c="oblique":"i"===a.Q&&(c="italic"),"display:block;position:absolute;top:0px;left:0px;visibility:hidden;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b+";"+("font-style:"+c+";font-weight:"+(a.$+"00")+";")}function J(a,b,c,d,e,f,g,h){this.aa=a,this.va=b,this.d=c,this.t=d,this.H=h||"BESbswy",this.m=e,this.J={},this.Y=f||3e3,this.da=g||null,this.G=this.F=null,a=new G(this.d,this.H),H(a);for(var i in cb)cb.hasOwnProperty(i)&&(b=new z(cb[i],A(this.t)),b=I(b),a.o.style.cssText=b,this.J[cb[i]]=a.o.offsetWidth);a.remove()}function K(a,b,c){for(var d in cb)if(cb.hasOwnProperty(d)&&b===a.J[cb[d]]&&c===a.J[cb[d]])return!0;return!1}function L(a){var b=a.F.o.offsetWidth,c=a.G.o.offsetWidth;b===a.J.serif&&c===a.J["sans-serif"]||a.m.Z&&K(a,b,c)?_()-a.za>=a.Y?a.m.Z&&K(a,b,c)&&(null===a.da||a.da.hasOwnProperty(a.t.getName()))?N(a,a.aa):N(a,a.va):M(a):N(a,a.aa)}function M(a){setTimeout(f(function(){L(this)},a),25)}function N(a,b){a.F.remove(),a.G.remove(),b(a.t)}function O(a,b,c,d){this.d=b,this.u=c,this.U=0,this.fa=this.ca=!1,this.Y=d,this.m=a.m}function P(a,b,c,d,e){if(c=c||{},0===b.length&&e)D(a.u);else for(a.U+=b.length,e&&(a.ca=e),e=0;e<b.length;e++){var g=b[e],h=c[g.getName()],i=a.u,k=g;i.C&&j(i.q,[i.h.e(i.j,k.getName(),A(k).toString(),"loading")]),E(i,"fontloading",k),i=null,i=new J(f(a.ka,a),f(a.la,a),a.d,g,a.m,a.Y,d,h),i.start()}}function Q(a){0==--a.U&&a.ca&&(a.fa?(a=a.u,a.C&&j(a.q,[a.h.e(a.j,"active")],[a.h.e(a.j,"loading"),a.h.e(a.j,"inactive")]),E(a,"active")):D(a.u))}function R(a){this.K=a,this.v=new F,this.Aa=new s(a.navigator.userAgent,a.document),this.a=this.Aa.parse(),this.V=this.W=0,this.M=this.N=!0}function S(a,b,c,d,e){var f=0==--a.W;(a.M||a.N)&&setTimeout(function(){P(b,c,d||null,e||null,f)},0)}function T(a,b,c){this.S=a?a:b+db,this.s=[],this.X=[],this.ga=c||""}function U(a){this.s=a,this.ea=[],this.O={}}function V(a,c){this.a=new s(navigator.userAgent,b).parse(),this.d=a,this.f=c}function W(a,b){this.d=a,this.f=b,this.p=[]}function X(a,b){this.d=a,this.f=b,this.p=[]}function Y(a,b){this.d=a,this.f=b,this.p=[]}function Z(a,b){this.d=a,this.f=b}var $=this,_=Date.now||function(){return+new Date};g.prototype.createElement=function(a,b,c){if(a=this.D.createElement(a),b)for(var d in b)b.hasOwnProperty(d)&&("style"==d?a.style.cssText=b[d]:a.setAttribute(d,b[d]));return c&&a.appendChild(this.D.createTextNode(c)),a},c("webfont.BrowserInfo",o),o.prototype.sa=function(){return this.R},o.prototype.hasWebFontSupport=o.prototype.sa,o.prototype.ta=function(){return this.Z},o.prototype.hasWebKitFallbackBug=o.prototype.ta,o.prototype.ua=function(){return this.Ba},o.prototype.hasWebKitMetricsBug=o.prototype.ua,o.prototype.qa=function(){return this.ra},o.prototype.hasNativeFontLoading=o.prototype.qa;var ab=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;p.prototype.compare=function(a){return this.c>a.c||this.c===a.c&&this.g>a.g||this.c===a.c&&this.g===a.g&&this.B>a.B?1:this.c<a.c||this.c===a.c&&this.g<a.g||this.c===a.c&&this.g===a.g&&this.B<a.B?-1:0},p.prototype.toString=function(){return[this.c,this.g||"",this.B||"",this.e||""].join("")},c("webfont.UserAgent",r),r.prototype.getName=function(){return this.P},r.prototype.getName=r.prototype.getName,r.prototype.oa=function(){return this.ja},r.prototype.getEngine=r.prototype.oa,r.prototype.pa=function(){return this.ya},r.prototype.getPlatform=r.prototype.pa,r.prototype.na=function(){return this.ia},r.prototype.getDocumentMode=r.prototype.na,r.prototype.ma=function(){return this.m},r.prototype.getBrowserInfo=r.prototype.ma;var bb=new r("Unknown",0,"Unknown",0,"Unknown",0,void 0,new o(!1,!1,!1,!1));s.prototype.parse=function(){var a;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){a=t(this);var b=q(u(this)),c=null,d=null,e=w(this.a,/Trident\/([\d\w\.]+)/,1),f=x(this.k),c=q(-1!=this.a.indexOf("MSIE")?w(this.a,/MSIE ([\d\w\.]+)/,1):w(this.a,/rv:([\d\w\.]+)/,1));""!=e?(d="Trident",q(e)):d="Unknown",a=new r("MSIE",0,d,0,a,0,f,new o("Windows"==a&&6<=c.c||"Windows Phone"==a&&8<=b.c,!1,!1,!!this.k.fonts))}else if(-1!=this.a.indexOf("Opera"))a:if(a="Unknown",c=q(w(this.a,/Presto\/([\d\w\.]+)/,1)),q(u(this)),b=x(this.k),null!==c.c?a="Presto":(-1!=this.a.indexOf("Gecko")&&(a="Gecko"),q(w(this.a,/rv:([^\)]+)/,1))),-1!=this.a.indexOf("Opera Mini/"))c=q(w(this.a,/Opera Mini\/([\d\.]+)/,1)),a=new r("OperaMini",0,a,0,t(this),0,b,new o(!1,!1,!1,!!this.k.fonts));else{if(-1!=this.a.indexOf("Version/")&&(c=q(w(this.a,/Version\/([\d\.]+)/,1)),null!==c.c)){a=new r("Opera",0,a,0,t(this),0,b,new o(10<=c.c,!1,!1,!!this.k.fonts));break a}c=q(w(this.a,/Opera[\/ ]([\d\.]+)/,1)),a=null!==c.c?new r("Opera",0,a,0,t(this),0,b,new o(10<=c.c,!1,!1,!!this.k.fonts)):new r("Opera",0,a,0,t(this),0,b,new o(!1,!1,!1,!!this.k.fonts))}else/OPR\/[\d.]+/.test(this.a)?a=v(this):/AppleWeb(K|k)it/.test(this.a)?a=v(this):-1!=this.a.indexOf("Gecko")?(a="Unknown",b=new p,q(u(this)),b=!1,-1!=this.a.indexOf("Firefox")?(a="Firefox",b=q(w(this.a,/Firefox\/([\d\w\.]+)/,1)),b=3<=b.c&&5<=b.g):-1!=this.a.indexOf("Mozilla")&&(a="Mozilla"),c=q(w(this.a,/rv:([^\)]+)/,1)),b||(b=1<c.c||1==c.c&&9<c.g||1==c.c&&9==c.g&&2<=c.B),a=new r(a,0,"Gecko",0,t(this),0,x(this.k),new o(b,!1,!1,!!this.k.fonts))):a=bb;return a},y.prototype.e=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b].replace(/[\W_]+/g,"").toLowerCase());return a.join(this.xa)},z.prototype.getName=function(){return this.P},G.prototype.remove=function(){var a=this.o;a.parentNode&&a.parentNode.removeChild(a)};var cb={Ea:"serif",Da:"sans-serif",Ca:"monospace"};J.prototype.start=function(){this.F=new G(this.d,this.H),H(this.F),this.G=new G(this.d,this.H),H(this.G),this.za=_();var a=new z(this.t.getName()+",serif",A(this.t)),a=I(a);this.F.o.style.cssText=a,a=new z(this.t.getName()+",sans-serif",A(this.t)),a=I(a),this.G.o.style.cssText=a,L(this)},O.prototype.ka=function(a){var b=this.u;b.C&&j(b.q,[b.h.e(b.j,a.getName(),A(a).toString(),"active")],[b.h.e(b.j,a.getName(),A(a).toString(),"loading"),b.h.e(b.j,a.getName(),A(a).toString(),"inactive")]),E(b,"fontactive",a),this.fa=!0,Q(this)},O.prototype.la=function(a){var b=this.u;if(b.C){var c=k(b.q,b.h.e(b.j,a.getName(),A(a).toString(),"active")),d=[],e=[b.h.e(b.j,a.getName(),A(a).toString(),"loading")];c||d.push(b.h.e(b.j,a.getName(),A(a).toString(),"inactive")),j(b.q,d,e)}E(b,"fontinactive",a),Q(this)},R.prototype.load=function(a){var b=a.context||this.K;this.d=new g(this.K,b),this.N=!1!==a.events,this.M=!1!==a.classes;var b=new C(this.d,b.document.documentElement,a,this.N,this.M),c=[],d=a.timeout;b.C&&j(b.q,[b.h.e(b.j,"loading")]),E(b,"loading");var e,c=this.v,h=this.d,i=[];for(e in a)if(a.hasOwnProperty(e)){var k=c.A[e];k&&i.push(k(a[e],h))}for(c=i,this.V=this.W=c.length,a=new O(this.a,this.d,b,d),e=0,d=c.length;d>e;e++)h=c[e],h.L(this.a,f(this.wa,this,h,b,a))},R.prototype.wa=function(a,b,c,d){var e=this;d?a.load(function(a,b,d){S(e,c,a,b,d)}):(a=0==--this.W,this.V--,a&&0==this.V?D(b):(this.M||this.N)&&P(c,[],{},null,a))};var db="//fonts.googleapis.com/css";T.prototype.e=function(){if(0==this.s.length)throw Error("No fonts to load!");if(-1!=this.S.indexOf("kit="))return this.S;for(var a=this.s.length,b=[],c=0;a>c;c++)b.push(this.s[c].replace(/ /g,"+"));return a=this.S+"?family="+b.join("%7C"),0<this.X.length&&(a+="&subset="+this.X.join(",")),0<this.ga.length&&(a+="&text="+encodeURIComponent(this.ga)),a};var eb={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},fb={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},gb={i:"i",italic:"i",n:"n",normal:"n"},hb=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;U.prototype.parse=function(){for(var a=this.s.length,b=0;a>b;b++){var c=this.s[b].split(":"),d=c[0].replace(/\+/g," "),e=["n4"];if(2<=c.length){var f,g=c[1];if(f=[],g)for(var g=g.split(","),h=g.length,i=0;h>i;i++){var j;if(j=g[i],j.match(/^[\w-]+$/)){j=hb.exec(j.toLowerCase());var k=void 0;if(null==j)k="";else{if(k=void 0,k=j[1],null==k||""==k)k="4";else var l=fb[k],k=l?l:isNaN(k)?"4":k.substr(0,1);j=j[2],k=[null==j||""==j?"n":gb[j],k].join("")}j=k}else j="";j&&f.push(j)}0<f.length&&(e=f),3==c.length&&(c=c[2],f=[],c=c?c.split(","):f,0<c.length&&(c=eb[c[0]])&&(this.O[d]=c))}for(this.O[d]||(c=eb[d])&&(this.O[d]=c),c=0;c<e.length;c+=1)this.ea.push(new z(d,e[c]))}};var ib={Arimo:!0,Cousine:!0,Tinos:!0};V.prototype.L=function(a,b){b(a.m.R)},V.prototype.load=function(a){var b=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?i(b,f(this.ba,this,a)):this.ba(a)},V.prototype.ba=function(a){for(var b=this.d,c=new T(this.f.api,l(b),this.f.text),d=this.f.families,e=d.length,f=0;e>f;f++){var g=d[f].split(":");3==g.length&&c.X.push(g.pop());var h="";2==g.length&&""!=g[1]&&(h=":"),c.s.push(g.join(h))}d=new U(d),d.parse(),m(b,c.e()),a(d.ea,d.O,ib)},W.prototype.I=function(a){var b=this.d;return l(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(b.w.location.hostname||b.K.location.hostname)+"/"+a+".js"},W.prototype.L=function(a,b){var c=this.f.id,d=this.d.w,e=this;c?(d.__webfontfontdeckmodule__||(d.__webfontfontdeckmodule__={}),d.__webfontfontdeckmodule__[c]=function(a,c){for(var d=0,f=c.fonts.length;f>d;++d){var g=c.fonts[d];e.p.push(new z(g.name,B("font-weight:"+g.weight+";font-style:"+g.style)))}b(a)},n(this.d,this.I(c),function(a){a&&b(!1)})):b(!1)},W.prototype.load=function(a){a(this.p)},X.prototype.I=function(a){var b=l(this.d);return(this.f.api||b+"//use.typekit.net")+"/"+a+".js"},X.prototype.L=function(a,b){var c=this.f.id,d=this.d.w,e=this;c?n(this.d,this.I(c),function(a){if(a)b(!1);else{if(d.Typekit&&d.Typekit.config&&d.Typekit.config.fn){a=d.Typekit.config.fn;for(var c=0;c<a.length;c+=2)for(var f=a[c],g=a[c+1],h=0;h<g.length;h++)e.p.push(new z(f,g[h]));try{d.Typekit.load({events:!1,classes:!1})}catch(i){}}b(!0)}},2e3):b(!1)},X.prototype.load=function(a){a(this.p)},Y.prototype.L=function(a,b){var c=this,d=c.f.projectId,e=c.f.version;if(d){var f=c.d.w;n(this.d,c.I(d,e),function(e){if(e)b(!1);else{if(f["__mti_fntLst"+d]&&(e=f["__mti_fntLst"+d]()))for(var g=0;g<e.length;g++)c.p.push(new z(e[g].fontfamily));b(a.m.R)}}).id="__MonotypeAPIScript__"+d}else b(!1)},Y.prototype.I=function(a,b){var c=l(this.d),d=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return c+"//"+d+"/"+a+".js"+(b?"?v="+b:"")},Y.prototype.load=function(a){a(this.p)},Z.prototype.load=function(a){var b,c,d=this.f.urls||[],e=this.f.families||[],f=this.f.testStrings||{};for(b=0,c=d.length;c>b;b++)m(this.d,d[b]);for(d=[],b=0,c=e.length;c>b;b++){var g=e[b].split(":");if(g[1])for(var h=g[1].split(","),i=0;i<h.length;i+=1)d.push(new z(g[0],h[i]));else d.push(new z(g[0]))}a(d,f)},Z.prototype.L=function(a,b){return b(a.m.R)};var jb=new R($);jb.v.A.custom=function(a,b){return new Z(b,a)},jb.v.A.fontdeck=function(a,b){return new W(b,a)},jb.v.A.monotype=function(a,b){return new Y(b,a)},jb.v.A.typekit=function(a,b){return new X(b,a)},jb.v.A.google=function(a,b){return new V(b,a)},$.WebFont||($.WebFont={},$.WebFont.load=f(jb.load,jb),$.WebFontConfig&&jb.load($.WebFontConfig))}(this,document),c("webfontloader",function(a){return function(){var b;return b||a.WebFont}}(this)),c("lorax/controllers/core",["webfontloader"],function(a){var b=function(a,b,c,d,e){this._$scope=a,this._windowService=b,this._pubSubService=c,this._dataService=e,a.core={openEmailModal:this.openEmailModal.bind(this),openShareModal:this.openShareModal.bind(this),openShareOptions:this.openShareOptions.bind(this),closeShareOptions:this.closeShareOptions.bind(this),openAboutModal:this.openAboutModal.bind(this),openLegendModal:this.openLegendModal.bind(this),siteInfo:this.siteInfo.bind(this),isLoaded:!1},this.init()};return b.$inject=["$scope","windowService","pubSubService","routesService","dataService"],b.prototype.init=function(){a.load({active:this.loadMain.bind(this),custom:{families:["Fira Sans:n2,n3,n4,n5,n6,n7,n8,n9"]}})},b.prototype.loadMain=function(){this._dataService.getMain().then(function(a){this._$scope.core.miscData=a.getMiscLocale(),this.onLoaded()}.bind(this))},b.prototype.onLoaded=function(){document.title=this._$scope.core.miscData.siteTitle,this._$scope.core.isLoaded=!0,this._pubSubService.publish("window.onLoaded"),this._pubSubService.subscribe("windowService.breakpoint",this.onBreakpointChange.bind(this))},b.prototype.openEmailModal=function(){this._$scope.$broadcast("openEmailModal")},b.prototype.openShareModal=function(a){this._$scope.$broadcast("openShareModal",a)},b.prototype.openShareOptions=function(){this._$scope.core.shareOptions=!0},b.prototype.closeShareOptions=function(){this._$scope.core.shareOptions=!1},b.prototype.openAboutModal=function(){this._$scope.$broadcast("openAboutModal")},b.prototype.openLegendModal=function(){this._$scope.$broadcast("openLegendModal")},b.prototype.siteInfo=function(){this._$scope.$broadcast("openMobileOptions",!0)},b.prototype.onBreakpointChange=function(a){"small"!==a&&this._$scope.$broadcast("openMobileOptions",!1)},b}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function d(a){var b=a.length,c=ab.type(a);return"function"===c||ab.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){if(ab.isFunction(b))return ab.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ab.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ib.test(b))return ab.filter(b,a,c);b=ab.filter(b,a)}return ab.grep(a,function(a){return V.call(b,a)>=0!==c})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b=pb[a]={};return ab.each(a.match(ob)||[],function(a,c){b[c]=!0}),b}function h(){$.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1),ab.ready()}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ab.expando+i.uid++}function j(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(vb,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ub.test(c)?ab.parseJSON(c):c}catch(e){}tb.set(a,b,c)}else c=void 0;return c}function k(){return!0}function l(){return!1}function m(){try{return $.activeElement}catch(a){}}function n(a,b){return ab.nodeName(a,"table")&&ab.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function o(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function p(a){var b=Lb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c=0,d=a.length;d>c;c++)sb.set(a[c],"globalEval",!b||sb.get(b[c],"globalEval"))}function r(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(sb.hasData(a)&&(f=sb.access(a),g=sb.set(b,f),j=f.events,j)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)ab.event.add(b,e,j[e][c])}tb.hasData(a)&&(h=tb.access(a),i=ab.extend({},h),tb.set(b,i))}}function s(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ab.nodeName(a,b)?ab.merge([a],c):c}function t(a,b){var c=b.nodeName.toLowerCase();"input"===c&&zb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function u(b,c){var d,e=ab(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ab.css(e[0],"display");return e.detach(),f}function v(a){var b=$,c=Pb[a];return c||(c=u(a,b),"none"!==c&&c||(Ob=(Ob||ab("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ob[0].contentDocument,b.write(),b.close(),c=u(a,b),Ob.detach()),Pb[a]=c),c}function w(a,b,c){var d,e,f,g,h=a.style;return c=c||Sb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""===g&&!ab.contains(a.ownerDocument,a)&&(g=ab.style(a,b)),Rb.test(g)&&Qb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function x(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function y(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Yb.length;e--;)if(b=Yb[e]+c,b in a)return b;return d}function z(a,b,c){var d=Ub.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ab.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ab.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ab.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ab.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ab.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Sb(a),g="border-box"===ab.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=w(a,b,f),(0>e||null==e)&&(e=a.style[b]),Rb.test(e))return e;d=g&&(Z.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=sb.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&"none"===c&&(d.style.display=""),""===d.style.display&&yb(d)&&(f[g]=sb.access(d,"olddisplay",v(d.nodeName)))):(e=yb(d),("none"!==c||!e)&&sb.set(d,"olddisplay",e?c:ab.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c,d,e){return new D.prototype.init(a,b,c,d,e)}function E(){return setTimeout(function(){Zb=void 0}),Zb=ab.now()}function F(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=xb[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function G(a,b,c){for(var d,e=(dc[b]||[]).concat(dc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function H(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&yb(a),p=sb.get(a,"fxshow");c.queue||(h=ab._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ab.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ab.css(a,"display"),k="none"===j?sb.get(a,"olddisplay")||v(a.nodeName):j,"inline"===k&&"none"===ab.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],_b.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ab.style(a,d)}else j=void 0;if(ab.isEmptyObject(m))"inline"===("none"===j?v(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=sb.access(a,"fxshow",{}),f&&(p.hidden=!o),o?ab(a).show():l.done(function(){ab(a).hide()}),l.done(function(){var b;sb.remove(a,"fxshow");for(b in m)ab.style(a,b,m[b])});for(d in m)g=G(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function I(a,b){var c,d,e,f,g;for(c in a)if(d=ab.camelCase(c),e=b[d],f=a[c],ab.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ab.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f=0,g=cc.length,h=ab.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Zb||E(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ab.extend({},b),opts:ab.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Zb||E(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ab.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(I(k,j.opts.specialEasing);g>f;f++)if(d=cc[f].call(j,a,k,j.opts))return d;return ab.map(k,G,j),ab.isFunction(j.opts.start)&&j.opts.start.call(a,j),ab.fx.timer(ab.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ob)||[];if(ab.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function L(a,b,c,d){function e(h){var i;return f[h]=!0,ab.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===uc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function M(a,b){var c,d,e=ab.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ab.extend(!0,a,d),a}function N(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function O(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift(),f)if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function P(a,b,c,d){var e;if(ab.isArray(b))ab.each(b,function(b,e){c||zc.test(a)?d(a,e):P(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ab.type(b))d(a,b);else for(e in b)P(a+"["+e+"]",b[e],c,d)}function Q(a){return ab.isWindow(a)?a:9===a.nodeType&&a.defaultView}var R=[],S=R.slice,T=R.concat,U=R.push,V=R.indexOf,W={},X=W.toString,Y=W.hasOwnProperty,Z={},$=a.document,_="2.1.3",ab=function(a,b){return new ab.fn.init(a,b)},bb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,cb=/^-ms-/,db=/-([\da-z])/gi,eb=function(a,b){return b.toUpperCase()
};ab.fn=ab.prototype={jquery:_,constructor:ab,selector:"",length:0,toArray:function(){return S.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:S.call(this)},pushStack:function(a){var b=ab.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ab.each(this,a,b)},map:function(a){return this.pushStack(ab.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:R.sort,splice:R.splice},ab.extend=ab.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"!=typeof g&&!ab.isFunction(g)&&(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ab.isPlainObject(d)||(e=ab.isArray(d)))?(e?(e=!1,f=c&&ab.isArray(c)?c:[]):f=c&&ab.isPlainObject(c)?c:{},g[b]=ab.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ab.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ab.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!ab.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==ab.type(a)||a.nodeType||ab.isWindow(a)?!1:a.constructor&&!Y.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?W[X.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=ab.trim(a),a&&(1===a.indexOf("use strict")?(b=$.createElement("script"),b.text=a,$.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(cb,"ms-").replace(db,eb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,g=a.length,h=d(a);if(c){if(h)for(;g>f&&(e=b.apply(a[f],c),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],c),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(bb,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?ab.merge(c,"string"==typeof a?[a]:a):U.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:V.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f=0,g=a.length,h=d(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,c),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&i.push(e);return T.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),ab.isFunction(a)?(d=S.call(arguments,2),e=function(){return a.apply(b||this,d.concat(S.call(arguments)))},e.guid=a.guid=a.guid||ab.guid++,e):void 0},now:Date.now,support:Z}),ab.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()});var fb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sb.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ub,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=tb.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ab(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return ab(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)!p[o]&&!r[o]&&(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,ab=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},bb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",cb="[\\x20\\t\\r\\n\\f]",db="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",eb=db.replace("w","w#"),fb="\\["+cb+"*("+db+")(?:"+cb+"*([*^$|!~]?=)"+cb+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+eb+"))|)"+cb+"*\\]",gb=":("+db+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fb+")*)|.*)\\)|)",hb=new RegExp(cb+"+","g"),ib=new RegExp("^"+cb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cb+"+$","g"),jb=new RegExp("^"+cb+"*,"+cb+"*"),kb=new RegExp("^"+cb+"*([>+~]|"+cb+")"+cb+"*"),lb=new RegExp("="+cb+"*([^\\]'\"]*?)"+cb+"*\\]","g"),mb=new RegExp(gb),nb=new RegExp("^"+eb+"$"),ob={ID:new RegExp("^#("+db+")"),CLASS:new RegExp("^\\.("+db+")"),TAG:new RegExp("^("+db.replace("w","w*")+")"),ATTR:new RegExp("^"+fb),PSEUDO:new RegExp("^"+gb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cb+"*(even|odd|(([+-]|)(\\d*)n|)"+cb+"*(?:([+-]|)"+cb+"*(\\d+)|))"+cb+"*\\)|)","i"),bool:new RegExp("^(?:"+bb+")$","i"),needsContext:new RegExp("^"+cb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cb+"*((?:-\\d)?\\d*)"+cb+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+cb+"?|("+cb+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xb=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(yb){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xb,!1):c.attachEvent&&c.attachEvent("onunload",xb)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=rb.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=rb.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+cb+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+cb+"*(?:value|"+bb+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+cb+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=rb.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",gb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&1===d.nodeType&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?ab(D,a)-ab(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?ab(D,a)-ab(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[3]||a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&mb.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+cb+")"+a+"("+cb+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(hb," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=ab(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(vb,wb),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in w.filter)(e=ob[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),(!v.attributes||!e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}))&&f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(bb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ab.find=fb,ab.expr=fb.selectors,ab.expr[":"]=ab.expr.pseudos,ab.unique=fb.uniqueSort,ab.text=fb.getText,ab.isXMLDoc=fb.isXML,ab.contains=fb.contains;var gb=ab.expr.match.needsContext,hb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ib=/^.[^:#\[\.,]*$/;ab.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ab.find.matchesSelector(d,a)?[d]:[]:ab.find.matches(a,ab.grep(b,function(a){return 1===a.nodeType}))},ab.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(ab(a).filter(function(){for(b=0;c>b;b++)if(ab.contains(e[b],this))return!0}));for(b=0;c>b;b++)ab.find(a,e[b],d);return d=this.pushStack(c>1?ab.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&gb.test(a)?ab(a):a||[],!1).length}});var jb,kb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lb=ab.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:kb.exec(a),c&&(c[1]||!b)){if(c[1]){if(b=b instanceof ab?b[0]:b,ab.merge(this,ab.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:$,!0)),hb.test(c[1])&&ab.isPlainObject(b))for(c in b)ab.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=$.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=$,this.selector=a,this}return!b||b.jquery?(b||jb).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ab.isFunction(a)?"undefined"!=typeof jb.ready?jb.ready(a):a(ab):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ab.makeArray(a,this))};lb.prototype=ab.fn,jb=ab($);var mb=/^(?:parents|prev(?:Until|All))/,nb={children:!0,contents:!0,next:!0,prev:!0};ab.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ab(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ab.fn.extend({has:function(a){var b=ab(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(ab.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=gb.test(a)||"string"!=typeof a?ab(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ab.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ab.unique(f):f)},index:function(a){return a?"string"==typeof a?V.call(ab(a),this[0]):V.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ab.unique(ab.merge(this.get(),ab(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ab.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ab.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ab.dir(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ab.dir(a,"nextSibling")},prevAll:function(a){return ab.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ab.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ab.dir(a,"previousSibling",c)},siblings:function(a){return ab.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ab.sibling(a.firstChild)},contents:function(a){return a.contentDocument||ab.merge([],a.childNodes)}},function(a,b){ab.fn[a]=function(c,d){var e=ab.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ab.filter(d,e)),this.length>1&&(nb[a]||ab.unique(e),mb.test(a)&&e.reverse()),this.pushStack(e)}});var ob=/\S+/g,pb={};ab.Callbacks=function(a){a="string"==typeof a?pb[a]||g(a):ab.extend({},a);var b,c,d,e,f,h,i=[],j=!a.once&&[],k=function(g){for(b=a.memory&&g,c=!0,h=e||0,e=0,f=i.length,d=!0;i&&f>h;h++)if(i[h].apply(g[0],g[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function g(b){ab.each(b,function(b,c){var d=ab.type(c);"function"===d?(!a.unique||!l.has(c))&&i.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&ab.each(arguments,function(a,b){for(var c;(c=ab.inArray(b,i,c))>-1;)i.splice(c,1),d&&(f>=c&&f--,h>=c&&h--)}),this},has:function(a){return a?ab.inArray(a,i)>-1:!!i&&!!i.length},empty:function(){return i=[],f=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return i&&(!c||j)&&(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},ab.extend({Deferred:function(a){var b=[["resolve","done",ab.Callbacks("once memory"),"resolved"],["reject","fail",ab.Callbacks("once memory"),"rejected"],["notify","progress",ab.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ab.Deferred(function(c){ab.each(b,function(b,f){var g=ab.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ab.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ab.extend(a,d):d}},e={};return d.pipe=d.then,ab.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=S.call(arguments),g=f.length,h=1!==g||a&&ab.isFunction(a.promise)?g:0,i=1===h?a:ab.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?S.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ab.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var qb;ab.fn.ready=function(a){return ab.ready.promise().done(a),this},ab.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ab.readyWait++:ab.ready(!0)},ready:function(a){(a===!0?--ab.readyWait:ab.isReady)||(ab.isReady=!0,a!==!0&&--ab.readyWait>0||(qb.resolveWith($,[ab]),ab.fn.triggerHandler&&(ab($).triggerHandler("ready"),ab($).off("ready"))))}}),ab.ready.promise=function(b){return qb||(qb=ab.Deferred(),"complete"===$.readyState?setTimeout(ab.ready):($.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1))),qb.promise(b)},ab.ready.promise();var rb=ab.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ab.type(c)){e=!0;for(h in c)ab.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ab.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ab(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};ab.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},i.uid=1,i.accepts=ab.acceptData,i.prototype={key:function(a){if(!i.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=i.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,ab.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(ab.isEmptyObject(f))ab.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,ab.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{ab.isArray(b)?d=b.concat(b.map(ab.camelCase)):(e=ab.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(ob)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!ab.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var sb=new i,tb=new i,ub=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,vb=/([A-Z])/g;ab.extend({hasData:function(a){return tb.hasData(a)||sb.hasData(a)},data:function(a,b,c){return tb.access(a,b,c)},removeData:function(a,b){tb.remove(a,b)},_data:function(a,b,c){return sb.access(a,b,c)},_removeData:function(a,b){sb.remove(a,b)}}),ab.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=tb.get(f),1===f.nodeType&&!sb.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ab.camelCase(d.slice(5)),j(f,d,e[d])));sb.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){tb.set(this,a)}):rb(this,function(b){var c,d=ab.camelCase(a);if(f&&void 0===b){if(c=tb.get(f,a),void 0!==c)return c;if(c=tb.get(f,d),void 0!==c)return c;if(c=j(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=tb.get(this,d);tb.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&tb.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){tb.remove(this,a)})}}),ab.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=sb.get(a,b),c&&(!d||ab.isArray(c)?d=sb.access(a,b,ab.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ab.queue(a,b),d=c.length,e=c.shift(),f=ab._queueHooks(a,b),g=function(){ab.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return sb.get(a,c)||sb.access(a,c,{empty:ab.Callbacks("once memory").add(function(){sb.remove(a,[b+"queue",c])
})})}}),ab.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ab.queue(this[0],a):void 0===b?this:this.each(function(){var c=ab.queue(this,a,b);ab._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ab.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ab.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ab.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=sb.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var wb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xb=["Top","Right","Bottom","Left"],yb=function(a,b){return a=b||a,"none"===ab.css(a,"display")||!ab.contains(a.ownerDocument,a)},zb=/^(?:checkbox|radio)$/i;!function(){var a=$.createDocumentFragment(),b=a.appendChild($.createElement("div")),c=$.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Z.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ab="undefined";Z.focusinBubbles="onfocusin"in a;var Bb=/^key/,Cb=/^(?:mouse|pointer|contextmenu)|click/,Db=/^(?:focusinfocus|focusoutblur)$/,Eb=/^([^.]*)(?:\.(.+)|)$/;ab.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sb.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=ab.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof ab!==Ab&&ab.event.triggered!==b.type?ab.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ob)||[""],j=b.length;j--;)h=Eb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ab.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ab.event.special[n]||{},k=ab.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ab.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ab.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sb.hasData(a)&&sb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(ob)||[""],j=b.length;j--;)if(h=Eb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ab.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!(!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,!l.remove||!l.remove.call(a,k)));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&ab.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ab.event.remove(a,n+b[j],c,d,!0);ab.isEmptyObject(i)&&(delete q.handle,sb.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||$],n=Y.call(b,"type")?b.type:b,o=Y.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||$,3!==d.nodeType&&8!==d.nodeType&&!Db.test(n+ab.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ab.expando]?b:new ab.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ab.makeArray(c,[b]),l=ab.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ab.isWindow(d)){for(i=l.delegateType||n,Db.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||$)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(sb.get(g,"events")||{})[b.type]&&sb.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&ab.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,!e&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(m.pop(),c)===!1)&&ab.acceptData(d)&&j&&ab.isFunction(d[n])&&!ab.isWindow(d)&&(h=d[j],h&&(d[j]=null),ab.event.triggered=n,d[n](),ab.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=ab.event.fix(a);var b,c,d,e,f,g=[],h=S.call(arguments),i=(sb.get(this,"events")||{})[a.type]||[],j=ab.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ab.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((ab.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ab(e,this).index(i)>=0:ab.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||$,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&void 0!==f&&(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[ab.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Cb.test(e)?this.mouseHooks:Bb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ab.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=$),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ab.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return ab.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ab.extend(new ab.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ab.event.trigger(e,null,b):ab.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ab.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},ab.Event=function(a,b){return this instanceof ab.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?k:l):this.type=a,b&&ab.extend(this,b),this.timeStamp=a&&a.timeStamp||ab.now(),this[ab.expando]=!0,void 0):new ab.Event(a,b)},ab.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=k,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=k,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=k,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ab.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ab.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ab.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Z.focusinBubbles||ab.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ab.event.simulate(b,a.target,ab.event.fix(a),!0)};ab.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=sb.access(d,b);e||d.addEventListener(a,c,!0),sb.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=sb.access(d,b)-1;e?sb.access(d,b,e):(d.removeEventListener(a,c,!0),sb.remove(d,b))}}}),ab.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=l;else if(!d)return this;return 1===e&&(f=d,d=function(a){return ab().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=ab.guid++)),this.each(function(){ab.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ab(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=l),this.each(function(){ab.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ab.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ab.event.trigger(a,b,c,!0):void 0}});var Fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gb=/<([\w:]+)/,Hb=/<|&#?\w+;/,Ib=/<(?:script|style|link)/i,Jb=/checked\s*(?:[^=]|=\s*.checked.)/i,Kb=/^$|\/(?:java|ecma)script/i,Lb=/^true\/(.*)/,Mb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Nb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nb.optgroup=Nb.option,Nb.tbody=Nb.tfoot=Nb.colgroup=Nb.caption=Nb.thead,Nb.th=Nb.td,ab.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ab.contains(a.ownerDocument,a);if(!(Z.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ab.isXMLDoc(a)))for(g=s(h),f=s(a),d=0,e=f.length;e>d;d++)t(f[d],g[d]);if(b)if(c)for(f=f||s(a),g=g||s(h),d=0,e=f.length;e>d;d++)r(f[d],g[d]);else r(a,h);return g=s(h,"script"),g.length>0&&q(g,!i&&s(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===ab.type(e))ab.merge(l,e.nodeType?[e]:e);else if(Hb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Gb.exec(e)||["",""])[1].toLowerCase(),h=Nb[g]||Nb._default,f.innerHTML=h[1]+e.replace(Fb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;ab.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===ab.inArray(e,d))&&(i=ab.contains(e.ownerDocument,e),f=s(k.appendChild(e),"script"),i&&q(f),c))for(j=0;e=f[j++];)Kb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=ab.event.special,g=0;void 0!==(c=a[g]);g++){if(ab.acceptData(c)&&(e=c[sb.expando],e&&(b=sb.cache[e]))){if(b.events)for(d in b.events)f[d]?ab.event.remove(c,d):ab.removeEvent(c,d,b.handle);sb.cache[e]&&delete sb.cache[e]}delete tb.cache[c[tb.expando]]}}}),ab.fn.extend({text:function(a){return rb(this,function(a){return void 0===a?ab.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ab.filter(a,this):this,e=0;null!=(c=d[e]);e++)!b&&1===c.nodeType&&ab.cleanData(s(c)),c.parentNode&&(b&&ab.contains(c.ownerDocument,c)&&q(s(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ab.cleanData(s(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ab.clone(this,a,b)})},html:function(a){return rb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ib.test(a)&&!Nb[(Gb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Fb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ab.cleanData(s(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ab.cleanData(s(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=T.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ab.isFunction(m);if(n||j>1&&"string"==typeof m&&!Z.checkClone&&Jb.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=ab.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=ab.map(s(c,"script"),o),f=e.length;j>i;i++)g=c,i!==l&&(g=ab.clone(g,!0,!0),f&&ab.merge(e,s(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,ab.map(e,p),i=0;f>i;i++)g=e[i],Kb.test(g.type||"")&&!sb.access(g,"globalEval")&&ab.contains(h,g)&&(g.src?ab._evalUrl&&ab._evalUrl(g.src):ab.globalEval(g.textContent.replace(Mb,"")))}return this}}),ab.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ab.fn[a]=function(a){for(var c,d=[],e=ab(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),ab(e[g])[b](c),U.apply(d,c.get());return this.pushStack(d)}});var Ob,Pb={},Qb=/^margin/,Rb=new RegExp("^("+wb+")(?!px)[a-z%]+$","i"),Sb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=$.documentElement,f=$.createElement("div"),g=$.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&ab.extend(Z,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild($.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),ab.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Tb=/^(none|table(?!-c[ea]).+)/,Ub=new RegExp("^("+wb+")(.*)$","i"),Vb=new RegExp("^([+-])=("+wb+")","i"),Wb={position:"absolute",visibility:"hidden",display:"block"},Xb={letterSpacing:"0",fontWeight:"400"},Yb=["Webkit","O","Moz","ms"];ab.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=w(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ab.camelCase(b),i=a.style;if(b=ab.cssProps[h]||(ab.cssProps[h]=y(i,h)),g=ab.cssHooks[b]||ab.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];f=typeof c,"string"===f&&(e=Vb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ab.css(a,b)),f="number"),null!=c&&c===c&&("number"===f&&!ab.cssNumber[h]&&(c+="px"),!Z.clearCloneStyle&&""===c&&0===b.indexOf("background")&&(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))}},css:function(a,b,c,d){var e,f,g,h=ab.camelCase(b);return b=ab.cssProps[h]||(ab.cssProps[h]=y(a.style,h)),g=ab.cssHooks[b]||ab.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=w(a,b,d)),"normal"===e&&b in Xb&&(e=Xb[b]),""===c||c?(f=parseFloat(e),c===!0||ab.isNumeric(f)?f||0:e):e}}),ab.each(["height","width"],function(a,b){ab.cssHooks[b]={get:function(a,c,d){return c?Tb.test(ab.css(a,"display"))&&0===a.offsetWidth?ab.swap(a,Wb,function(){return B(a,b,d)}):B(a,b,d):void 0},set:function(a,c,d){var e=d&&Sb(a);return z(a,c,d?A(a,b,d,"border-box"===ab.css(a,"boxSizing",!1,e),e):0)}}}),ab.cssHooks.marginRight=x(Z.reliableMarginRight,function(a,b){return b?ab.swap(a,{display:"inline-block"},w,[a,"marginRight"]):void 0}),ab.each({margin:"",padding:"",border:"Width"},function(a,b){ab.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},Qb.test(a)||(ab.cssHooks[a+b].set=z)}),ab.fn.extend({css:function(a,b){return rb(this,function(a,b,c){var d,e,f={},g=0;if(ab.isArray(b)){for(d=Sb(a),e=b.length;e>g;g++)f[b[g]]=ab.css(a,b[g],!1,d);return f}return void 0!==c?ab.style(a,b,c):ab.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){yb(this)?ab(this).show():ab(this).hide()})}}),ab.Tween=D,D.prototype={constructor:D,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ab.cssNumber[c]?"":"px")},cur:function(){var a=D.propHooks[this.prop];return a&&a.get?a.get(this):D.propHooks._default.get(this)},run:function(a){var b,c=D.propHooks[this.prop];return this.pos=b=this.options.duration?ab.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ab.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ab.fx.step[a.prop]?ab.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ab.cssProps[a.prop]]||ab.cssHooks[a.prop])?ab.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ab.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ab.fx=D.prototype.init,ab.fx.step={};var Zb,$b,_b=/^(?:toggle|show|hide)$/,ac=new RegExp("^(?:([+-])=|)("+wb+")([a-z%]*)$","i"),bc=/queueHooks$/,cc=[H],dc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=ac.exec(b),f=e&&e[3]||(ab.cssNumber[a]?"":"px"),g=(ab.cssNumber[a]||"px"!==f&&+d)&&ac.exec(ab.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ab.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ab.Animation=ab.extend(J,{tweener:function(a,b){ab.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],dc[c]=dc[c]||[],dc[c].unshift(b)},prefilter:function(a,b){b?cc.unshift(a):cc.push(a)}}),ab.speed=function(a,b,c){var d=a&&"object"==typeof a?ab.extend({},a):{complete:c||!c&&b||ab.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ab.isFunction(b)&&b};return d.duration=ab.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ab.fx.speeds?ab.fx.speeds[d.duration]:ab.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ab.isFunction(d.old)&&d.old.call(this),d.queue&&ab.dequeue(this,d.queue)},d},ab.fn.extend({fadeTo:function(a,b,c,d){return this.filter(yb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ab.isEmptyObject(a),f=ab.speed(b,c,d),g=function(){var b=J(this,ab.extend({},a),f);(e||sb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ab.timers,g=sb.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&bc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(null==a||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ab.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=sb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ab.timers,g=d?d.length:0;for(c.finish=!0,ab.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ab.each(["toggle","show","hide"],function(a,b){var c=ab.fn[b];ab.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(F(b,!0),a,d,e)}}),ab.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ab.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ab.timers=[],ab.fx.tick=function(){var a,b=0,c=ab.timers;for(Zb=ab.now();b<c.length;b++)a=c[b],!a()&&c[b]===a&&c.splice(b--,1);c.length||ab.fx.stop(),Zb=void 0},ab.fx.timer=function(a){ab.timers.push(a),a()?ab.fx.start():ab.timers.pop()},ab.fx.interval=13,ab.fx.start=function(){$b||($b=setInterval(ab.fx.tick,ab.fx.interval))},ab.fx.stop=function(){clearInterval($b),$b=null},ab.fx.speeds={slow:600,fast:200,_default:400},ab.fn.delay=function(a,b){return a=ab.fx?ab.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=$.createElement("input"),b=$.createElement("select"),c=b.appendChild($.createElement("option"));a.type="checkbox",Z.checkOn=""!==a.value,Z.optSelected=c.selected,b.disabled=!0,Z.optDisabled=!c.disabled,a=$.createElement("input"),a.value="t",a.type="radio",Z.radioValue="t"===a.value}();var ec,fc,gc=ab.expr.attrHandle;ab.fn.extend({attr:function(a,b){return rb(this,ab.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ab.removeAttr(this,a)})}}),ab.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===Ab?ab.prop(a,b,c):(1===f&&ab.isXMLDoc(a)||(b=b.toLowerCase(),d=ab.attrHooks[b]||(ab.expr.match.bool.test(b)?fc:ec)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ab.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ab.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ob);if(f&&1===a.nodeType)for(;c=f[e++];)d=ab.propFix[c]||c,ab.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Z.radioValue&&"radio"===b&&ab.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),fc={set:function(a,b,c){return b===!1?ab.removeAttr(a,c):a.setAttribute(c,c),c}},ab.each(ab.expr.match.bool.source.match(/\w+/g),function(a,b){var c=gc[b]||ab.find.attr;gc[b]=function(a,b,d){var e,f;return d||(f=gc[b],gc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,gc[b]=f),e}});var hc=/^(?:input|select|textarea|button)$/i;ab.fn.extend({prop:function(a,b){return rb(this,ab.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ab.propFix[a]||a]})}}),ab.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ab.isXMLDoc(a),f&&(b=ab.propFix[b]||b,e=ab.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||hc.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Z.optSelected||(ab.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),ab.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ab.propFix[this.toLowerCase()]=this});var ic=/[\t\r\n\f]/g;ab.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(ab.isFunction(a))return this.each(function(b){ab(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ob)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ic," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ab.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(ab.isFunction(a))return this.each(function(b){ab(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ob)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ic," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ab.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(ab.isFunction(a)?function(c){ab(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=ab(this),f=a.match(ob)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===Ab||"boolean"===c)&&(this.className&&sb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":sb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ic," ").indexOf(b)>=0)return!0;return!1}});var jc=/\r/g;ab.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ab.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ab(this).val()):a,null==e?e="":"number"==typeof e?e+="":ab.isArray(e)&&(e=ab.map(e,function(a){return null==a?"":a+""})),b=ab.valHooks[this.type]||ab.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ab.valHooks[e.type]||ab.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(jc,""):null==c?"":c)}}}),ab.extend({valHooks:{option:{get:function(a){var b=ab.find.attr(a,"value");return null!=b?b:ab.trim(ab.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Z.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ab.nodeName(c.parentNode,"optgroup"))){if(b=ab(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ab.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ab.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ab.each(["radio","checkbox"],function(){ab.valHooks[this]={set:function(a,b){return ab.isArray(b)?a.checked=ab.inArray(ab(a).val(),b)>=0:void 0}},Z.checkOn||(ab.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),ab.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ab.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ab.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var kc=ab.now(),lc=/\?/;ab.parseJSON=function(a){return JSON.parse(a+"")},ab.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&ab.error("Invalid XML: "+a),b};var mc=/#.*$/,nc=/([?&])_=[^&]*/,oc=/^(.*?):[ \t]*([^\r\n]*)$/gm,pc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qc=/^(?:GET|HEAD)$/,rc=/^\/\//,sc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,tc={},uc={},vc="*/".concat("*"),wc=a.location.href,xc=sc.exec(wc.toLowerCase())||[];ab.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wc,type:"GET",isLocal:pc.test(xc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ab.parseJSON,"text xml":ab.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?M(M(a,ab.ajaxSettings),b):M(ab.ajaxSettings,a)},ajaxPrefilter:K(tc),ajaxTransport:K(uc),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=N(l,v,c)),s=O(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ab.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(ab.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--ab.active||ab.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};
var d,e,f,g,h,i,j,k,l=ab.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ab(m):ab.event,o=ab.Deferred(),p=ab.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=oc.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||wc)+"").replace(mc,"").replace(rc,xc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ab.trim(l.dataType||"*").toLowerCase().match(ob)||[""],null==l.crossDomain&&(i=sc.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===xc[1]&&i[2]===xc[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(xc[3]||("http:"===xc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ab.param(l.data,l.traditional)),L(tc,l,b,v),2===t)return v;j=ab.event&&l.global,j&&0===ab.active++&&ab.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!qc.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(lc.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=nc.test(e)?e.replace(nc,"$1_="+kc++):e+(lc.test(e)?"&":"?")+"_="+kc++)),l.ifModified&&(ab.lastModified[e]&&v.setRequestHeader("If-Modified-Since",ab.lastModified[e]),ab.etag[e]&&v.setRequestHeader("If-None-Match",ab.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+vc+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,v,l)!==!1&&2!==t){u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=L(uc,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v}return v.abort()},getJSON:function(a,b,c){return ab.get(a,b,c,"json")},getScript:function(a,b){return ab.get(a,void 0,b,"script")}}),ab.each(["get","post"],function(a,b){ab[b]=function(a,c,d,e){return ab.isFunction(c)&&(e=e||d,d=c,c=void 0),ab.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ab._evalUrl=function(a){return ab.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ab.fn.extend({wrapAll:function(a){var b;return ab.isFunction(a)?this.each(function(b){ab(this).wrapAll(a.call(this,b))}):(this[0]&&(b=ab(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(ab.isFunction(a)?function(b){ab(this).wrapInner(a.call(this,b))}:function(){var b=ab(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ab.isFunction(a);return this.each(function(c){ab(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ab.nodeName(this,"body")||ab(this).replaceWith(this.childNodes)}).end()}}),ab.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},ab.expr.filters.visible=function(a){return!ab.expr.filters.hidden(a)};var yc=/%20/g,zc=/\[\]$/,Ac=/\r?\n/g,Bc=/^(?:submit|button|image|reset|file)$/i,Cc=/^(?:input|select|textarea|keygen)/i;ab.param=function(a,b){var c,d=[],e=function(a,b){b=ab.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ab.ajaxSettings&&ab.ajaxSettings.traditional),ab.isArray(a)||a.jquery&&!ab.isPlainObject(a))ab.each(a,function(){e(this.name,this.value)});else for(c in a)P(c,a[c],b,e);return d.join("&").replace(yc,"+")},ab.fn.extend({serialize:function(){return ab.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ab.prop(this,"elements");return a?ab.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ab(this).is(":disabled")&&Cc.test(this.nodeName)&&!Bc.test(a)&&(this.checked||!zb.test(a))}).map(function(a,b){var c=ab(this).val();return null==c?null:ab.isArray(c)?ab.map(c,function(a){return{name:b.name,value:a.replace(Ac,"\r\n")}}):{name:b.name,value:c.replace(Ac,"\r\n")}}).get()}}),ab.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Dc=0,Ec={},Fc={0:200,1223:204},Gc=ab.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Ec)Ec[a]()}),Z.cors=!!Gc&&"withCredentials"in Gc,Z.ajax=Gc=!!Gc,ab.ajaxTransport(function(a){var b;return Z.cors||Gc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Dc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Ec[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Fc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Ec[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),ab.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ab.globalEval(a),a}}}),ab.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ab.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ab("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),$.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Hc=[],Ic=/(=)\?(?=&|$)|\?\?/;ab.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Hc.pop()||ab.expando+"_"+kc++;return this[a]=!0,a}}),ab.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ic.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ic.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ab.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ic,"$1"+e):b.jsonp!==!1&&(b.url+=(lc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ab.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Hc.push(e)),g&&ab.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ab.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||$;var d=hb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ab.buildFragment([a],b,e),e&&e.length&&ab(e).remove(),ab.merge([],d.childNodes))};var Jc=ab.fn.load;ab.fn.load=function(a,b,c){if("string"!=typeof a&&Jc)return Jc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ab.trim(a.slice(h)),a=a.slice(0,h)),ab.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ab.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ab("<div>").append(ab.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},ab.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ab.fn[b]=function(a){return this.on(b,a)}}),ab.expr.filters.animated=function(a){return ab.grep(ab.timers,function(b){return a===b.elem}).length};var Kc=a.document.documentElement;ab.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ab.css(a,"position"),l=ab(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ab.css(a,"top"),i=ab.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ab.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ab.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ab.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,ab.contains(b,d)?(typeof d.getBoundingClientRect!==Ab&&(e=d.getBoundingClientRect()),c=Q(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ab.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ab.nodeName(a[0],"html")||(d=a.offset()),d.top+=ab.css(a[0],"borderTopWidth",!0),d.left+=ab.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-ab.css(c,"marginTop",!0),left:b.left-d.left-ab.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Kc;a&&!ab.nodeName(a,"html")&&"static"===ab.css(a,"position");)a=a.offsetParent;return a||Kc})}}),ab.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;ab.fn[b]=function(e){return rb(this,function(b,e,f){var g=Q(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),ab.each(["top","left"],function(a,b){ab.cssHooks[b]=x(Z.pixelPosition,function(a,c){return c?(c=w(a,b),Rb.test(c)?ab(a).position()[b]+"px":c):void 0})}),ab.each({Height:"height",Width:"width"},function(a,b){ab.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ab.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return rb(this,function(b,c,d){var e;return ab.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ab.css(b,c,g):ab.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ab.fn.size=function(){return this.length},ab.fn.andSelf=ab.fn.addBack,"function"==typeof c&&c.amd&&c("jquery",[],function(){return ab});var Lc=a.jQuery,Mc=a.$;return ab.noConflict=function(b){return a.$===ab&&(a.$=Mc),b&&a.jQuery===ab&&(a.jQuery=Lc),ab},typeof b===Ab&&(a.jQuery=a.$=ab),ab}),c("lorax/controllers/nav",["jquery"],function(a){var b=function(b,c,d,e){this._$scope=b,this._$timeout=c,this._windowService=d,this._dataService=e,this._$scope.nav={active:null},this._dataService.getMain().then(function(a){this._$scope.nav.content=a.getMiscLocale()}.bind(this)),d.subscribe("topic",this._onChangeTopic.bind(this)),a(window).on("scroll",this._onScroll.bind(this))};return b.$inject=["$scope","$timeout","windowService","dataService"],b.prototype._onScroll=function(){var b=a(window).scrollTop();this.navElm||(this.navElm=a(".banner-nav-wrap"),this.navTop=parseInt(this.navElm.css("top")),this.bannerElm=a(".banner"),this.bannerTop=parseInt(this.bannerElm.css("top")),this.bannerInfoElm=a(".banner-info"),this.bannerInfoTop=parseInt(this.bannerInfoElm.css("top"))),b>this.lastScroll?(this.scrollStartPos||(this.scrollStartPos=b),b-this.scrollStartPos>this.bannerElm.height()&&(this.scrollStartPos=b-this.bannerElm.height())):b<this.lastScroll&&(b-this.scrollStartPos>0?this.scrollStartPos-=b-this.lastScroll:this.scrollStartPos=b),this.navElm.css("top",Math.max(0,this.navTop-(b-this.scrollStartPos))),this.bannerElm.css("top",this.bannerTop-(b-this.scrollStartPos)),this.bannerInfoElm.css("top",this.bannerInfoTop-(b-this.scrollStartPos)),this.scrollingDown=b-this.lastScroll>0,this.lastScroll=b},b.prototype._onChangeTopic=function(a){this._$timeout(function(){this._$scope.nav.active=a}.bind(this))},b}),function(a,b,c){function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments;for(c=f+g.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<h.length?mb(h[b+2]):a}),c=c+"\nhttp://errors.angularjs.org/1.3.8/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(mb(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return a.nodeType===qe&&b?!0:u(a)||je(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"!=d&&"length"!=d&&"name"!=d&&(!a.hasOwnProperty||a.hasOwnProperty(d))&&b.call(c,a[d],d,a);else if(je(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++he}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(Object.create(a),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===ee.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===ee.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===ee.call(a)}function C(a){return"[object FormData]"===ee.call(a)}function D(a){return"[object Blob]"===ee.call(a)}function E(a){return"boolean"==typeof a}function F(a){return a&&x(a.then)}function G(a){return!!a&&!!(a.nodeName||a.prop&&a.attr&&a.find)}function H(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function I(a){return Ud(a.nodeName||a[0]&&a[0].nodeName)}function J(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function K(a,b,c,d){if(z(a)||A(a))throw fe("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw fe("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(je(a)){b.length=0;for(var h=0;h<a.length;h++)g=K(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;je(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=K(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(je(a))b=K(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=K(a,l,c,d)}return b}function L(a,b){if(je(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function M(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!je(a)){if(w(a))return w(b)?M(a.getTime(),b.getTime()):!1;if(y(a)&&y(b))return a.toString()==b.toString();if(A(a)||A(b)||z(a)||z(b)||je(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!M(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!je(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!M(a[e],b[e]))return!1;return!0}}return!1}function N(a,b,c){return a.concat(be.call(b,c))}function O(a,b){return be.call(a,b||0)}function P(a,b){var c=arguments.length>2?O(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,N(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Q(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function R(a,b){return"undefined"==typeof a?c:(v(b)||(b=b?2:null),JSON.stringify(a,Q,b))}function S(a){return u(a)?JSON.parse(a):a}function T(a){a=$d(a).clone();try{a.empty()}catch(b){}var c=$d("<div>").append(a).html();try{return a[0].nodeType===re?Ud(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Ud(b)})}catch(b){return Ud(c)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;Vd.call(d,c)?je(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){je(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Z(a,b){var c,d,e=ne.length;for(a=$d(a),d=0;e>d;++d)if(c=ne[d]+b,u(c=a.attr(c)))return c;return null}function $(a,b){var c,d,e={};f(ne,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(ne,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Z(c,"strict-di"),b(c,d?[d]:[],e))}function _(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=$d(c),c.injector()){var a=c[0]===b?"document":T(c);throw fe("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Sb(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),void(ge.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),h()}))}function ab(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function bb(a){var b=ge.element(a).injector();if(!b)throw fe("test","no injector found for element argument to getTestability");return b.get("$$testability")}function cb(a,b){return b=b||"_",a.replace(oe,function(a,c){return(c?b:"")+a.toLowerCase()})}function db(){var b;pe||(_d=a.jQuery,_d&&_d.fn.on?($d=_d,l(_d.fn,{scope:Je.scope,isolateScope:Je.isolateScope,controller:Je.controller,injector:Je.injector,inheritedData:Je.inheritedData}),b=_d.cleanData,_d.cleanData=function(a){var c;if(ie)ie=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=_d._data(d,"events"),c&&c.$destroy&&_d(d).triggerHandler("$destroy");b(a)}):$d=ub,ge.element=$d,pe=!0)}function eb(a,b,c){if(!a)throw fe("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function fb(a,b,c){return c&&je(a)&&(a=a[a.length-1]),eb(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function gb(a,b){if("hasOwnProperty"===a)throw fe("badname","hasOwnProperty is not a valid {0} name",b)}function hb(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?P(f,a):a}function ib(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return $d(d)}function jb(){return Object.create(null)}function kb(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function lb(a){var b=[];return JSON.stringify(a,function(a,c){if(c=Q(a,c),t(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function mb(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?lb(a):a}function nb(b){l(b,{bootstrap:_,copy:K,extend:l,equals:M,element:$d,forEach:f,injector:Sb,noop:o,bind:P,toJson:R,fromJson:S,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:G,isArray:je,version:ve,isDate:w,lowercase:Ud,uppercase:Wd,callbacks:{counter:0},getTestability:bb,$$minErr:d,$$csp:me,reloadWithDebugInfo:ab}),ae=kb(a);try{ae("ngLocale")}catch(c){ae("ngLocale",[]).provider("$locale",qc)}ae("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Wc}),a.provider("$compile",Zb).directive({a:Bf,input:Uf,textarea:Uf,form:Gf,script:Lg,select:Og,style:Qg,option:Pg,ngBind:lg,ngBindHtml:ng,ngBindTemplate:mg,ngClass:og,ngClassEven:qg,ngClassOdd:pg,ngCloak:rg,ngController:sg,ngForm:Hf,ngHide:Fg,ngIf:vg,ngInclude:wg,ngInit:yg,ngNonBindable:zg,ngPluralize:Ag,ngRepeat:Bg,ngShow:Eg,ngStyle:Gg,ngSwitch:Hg,ngSwitchWhen:Ig,ngSwitchDefault:Jg,ngOptions:Ng,ngTransclude:Kg,ngModel:bg,ngList:hg,ngChange:cg,pattern:eg,ngPattern:eg,required:dg,ngRequired:dg,minlength:gg,ngMinlength:gg,maxlength:fg,ngMaxlength:fg,ngValue:jg,ngModelOptions:kg}).directive({ngInclude:xg}).directive(Cf).directive(tg),a.provider({$anchorScroll:Tb,$animate:Te,$browser:Wb,$cacheFactory:Xb,$controller:bc,$document:cc,$exceptionHandler:dc,$filter:gd,$interpolate:oc,$interval:pc,$http:kc,$httpBackend:mc,$location:Ec,$log:Fc,$parse:Qc,$rootScope:Vc,$q:Rc,$$q:Sc,$sce:$c,$sceDelegate:Zc,$sniffer:_c,$templateCache:Yb,$templateRequest:ad,$$testability:bd,$timeout:cd,$window:fd,$$rAF:Uc,$$asyncCallback:Ub,$$jqLite:Nb})}])}function ob(){return++xe}function pb(a){return a.replace(Ae,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Be,"Moz$1")}function qb(a){return!Fe.test(a)}function rb(a){var b=a.nodeType;return b===qe||!b||b===te}function sb(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(qb(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(Ge.exec(a)||["",""])[1].toLowerCase(),e=Ie[d]||Ie._default,c.innerHTML=e[1]+a.replace(He,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=N(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function tb(a,c){c=c||b;var d;return(d=Ee.exec(a))?[c.createElement(d[1])]:(d=sb(a,c))?d.childNodes:[]}function ub(a){if(a instanceof ub)return a;var b;if(u(a)&&(a=ke(a),b=!0),!(this instanceof ub)){if(b&&"<"!=a.charAt(0))throw De("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ub(a)}b?Eb(this,tb(a)):Eb(this,a)}function vb(a){return a.cloneNode(!0)}function wb(a,b){if(b||yb(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)yb(c[d])}function xb(a,b,c,d){if(s(d))throw De("offargs","jqLite#off() does not support the `selector` argument");var e=zb(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(J(d||[],c),d&&d.length>0)return}ze(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&ze(a,b,h),delete g[b]}function yb(a,b){var d=a.ng339,e=d&&we[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),xb(a)),delete we[d],a.ng339=c}}function zb(a,b){var d=a.ng339,e=d&&we[d];return b&&!e&&(a.ng339=d=ob(),e=we[d]={events:{},data:{},handle:c}),e}function Ab(a,b,c){if(rb(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=zb(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Bb(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Cb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",ke((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ke(b)+" "," ")))})}function Db(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=ke(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",ke(c))}}function Eb(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Fb(a,b){return Gb(a,"$"+(b||"ngController")+"Controller")}function Gb(a,b,d){a.nodeType==te&&(a=a.documentElement);for(var e=je(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=$d.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===ue&&a.host}}function Hb(a){for(wb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ib(a,b){b||wb(a);var c=a.parentNode;c&&c.removeChild(a)}function Jb(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):$d(c).on("load",b)}function Kb(a,b){var c=Ke[b.toLowerCase()];return c&&Le[I(a)]&&c}function Lb(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Me[b]}function Mb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=L(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Nb(){this.$get=function(){return l(ub,{hasClass:function(a,b){return a.attr&&(a=a[0]),Bb(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Db(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Cb(a,b)}})}}function Ob(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Pb(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Qb(a){var b=a.toString().replace(Qe,""),c=b.match(Ne);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Rb(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Qb(a)),Re("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Qe,""),g=e.match(Ne),f(g[1].split(Oe),function(a){a.replace(Pe,function(a,b,c){d.push(c)})})}a.$inject=d}}else je(a)?(h=a.length-1,fb(a[h],"fn"),d=a.slice(0,h)):fb(a,"fn",!0);return d}function Sb(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(gb(a,"service"),(x(b)||je(b))&&(b=A.instantiate(b)),!b.$get)throw Re("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var c=C.invoke(b,this);if(r(c))throw Re("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){gb(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=ae(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):je(a)?c.push(A.invoke(a)):fb(a,"module")}catch(e){throw je(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Re("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===s)throw Re("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b,d)}catch(e){throw a[b]===s&&delete a[b],e}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Rb(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Re("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return je(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((je(a)?a[a.length-1]:a).prototype),f=e(a,d,b,c);return t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Rb,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Pb([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(a,b){throw ge.isString(b)&&w.push(b),Re("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a,b){var d=A.get(a+v,b);return C.invoke(d.$get,d,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Tb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===I(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(G(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Jb(function(){d.$evalAsync(h)})}),h}]}function Ub(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Vb(a,b,d,e){function g(a){try{a.apply(null,O(arguments,1))}finally{if(x--,0===x)for(;y.length;)try{y.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");
return-1===b?"":a.substr(b+1)}function i(a,b){!function c(){f(A,function(a){a()}),z=b(c,a)}()}function j(){k(),l()}function k(){B=a.history.state,B=r(B)?null:B,M(B,I)&&(B=I),I=B}function l(){(D!==n.url()||C!==B)&&(D=n.url(),C=B,f(G,function(a){a(n.url(),B)}))}function m(a){try{return decodeURIComponent(a)}catch(b){return a}}var n=this,p=b[0],q=a.location,s=a.history,t=a.setTimeout,v=a.clearTimeout,w={};n.isMock=!1;var x=0,y=[];n.$$completeOutstandingRequest=g,n.$$incOutstandingRequestCount=function(){x++},n.notifyWhenNoOutstandingRequests=function(a){f(A,function(a){a()}),0===x?a():y.push(a)};var z,A=[];n.addPollFn=function(a){return r(z)&&i(100,t),A.push(a),a};var B,C,D=q.href,E=b.find("base"),F=null;k(),C=B,n.url=function(b,c,d){if(r(d)&&(d=null),q!==a.location&&(q=a.location),s!==a.history&&(s=a.history),b){var f=C===d;if(D===b&&(!e.history||f))return n;var g=D&&vc(D)===vc(b);return D=b,C=d,!e.history||g&&f?(g||(F=b),c?q.replace(b):g?q.hash=h(b):q.href=b):(s[c?"replaceState":"pushState"](d,"",b),k(),C=B),n}return F||q.href.replace(/%27/g,"'")},n.state=function(){return B};var G=[],H=!1,I=null;n.onUrlChange=function(b){return H||(e.history&&$d(a).on("popstate",j),$d(a).on("hashchange",j),H=!0),G.push(b),b},n.$$checkUrlChange=l,n.baseHref=function(){var a=E.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var J={},K="",L=n.baseHref();n.cookies=function(a,b){var e,f,g,h,i;if(!a){if(p.cookie!==K)for(K=p.cookie,f=K.split("; "),J={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=m(g.substring(0,i)),J[a]===c&&(J[a]=m(g.substring(i+1))));return J}b===c?p.cookie=encodeURIComponent(a)+"=;path="+L+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(p.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+L).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},n.defer=function(a,b){var c;return x++,c=t(function(){delete w[c],g(a)},b||0),w[c]=!0,c},n.defer.cancel=function(a){return w[a]?(delete w[a],v(a),g(o),!0):!1}}function Wb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Vb(a,d,b,c)}]}function Xb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Yb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Zb(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Ue("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}var g={},h="Directive",j=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,k=/(([\w\-]+)(?:\:([^;]+))?;?)/,m=H("ngSrc,ngSrcset,src,srcset"),r=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function y(b,c){return gb(b,"directive"),u(b)?(eb(c,"directiveFactory"),g.hasOwnProperty(b)||(g[b]=[],a.factory(b+h,["$injector","$exceptionHandler",function(a,c){var d=[];return f(g[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),g[b].push(c)):f(b,i(y)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(a){return s(a)?(w=a,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,i,q,s,y,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof $d||(a=$d(a)),f(a,function(b,c){b.nodeType==re&&b.nodeValue.match(/\S+/)&&(a[c]=$d(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){eb(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?$d($(h,$d("<div>").append(a).html())):c?Je.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==I(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo($d(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new gb,j=L(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c){var d=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return d}function L(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case qe:S(b,$b(I(a)),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var v=!1,w=!1;l=r[s],m=l.name,p=ke(l.value),o=$b(m),(q=lb.test(o))&&(m=m.replace(Ve,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var x=o.replace(/(Start|End)$/,"");U(x)&&o===x+"Start"&&(v=m,w=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=$b(m.toLowerCase()),i[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Kb(a,n)&&(c[n]=!0)),ab(a,b,p,n,q),S(b,n,"A",d,e,v,w)}if(g=a.className,u(g)&&""!==g)for(;f=k.exec(g);)n=$b(f[2]),S(b,n,"C",d,e)&&(c[n]=ke(f[3])),g=g.substr(f.index+f[0].length);break;case re:Z(b,a.nodeValue);break;case se:try{f=j.exec(a.nodeValue),f&&(n=$b(f[1]),S(b,n,"M",d,e)&&(c[n]=ke(f[2])))}catch(y){}}return b.sort(X),b}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Ue("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==qe&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return $d(d)}function P(a,b,c){return function(d,e,f,g,h){return e=N(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,i,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=db(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=db(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(r),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Ue("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return je(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function v(a,b,e,i,j){function k(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),j(a,b,e,d,D)}var n,o,r,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=$d(e),z=new gb(x,h)),I&&(u=b.$new(!0)),j&&(w=k,w.$$boundTransclude=j),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=s(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!J||J!==I&&J!==I.$$originalDirective),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,i=a.attrName,j=a.optional,k=a.mode;switch(k){case"@":z.$observe(i,function(a){C[c]=a}),z.$$observers[i].$$scope=b,z[i]&&(C[c]=d(z[i])(b));break;case"=":if(j&&!z[i])return;f=q(z[i]),h=f.literal?M:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Ue("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[i],I.name)},e=C[c]=f(b);var l=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};l.$stateful=!0;var m;m=a.collection?b.$watchCollection(z[i],l):b.$watch(q(z[i],l),null,f.literal),u.$on("$destroy",m);break;case"&":f=q(z[i]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),n=0,o=l.length;o>n;n++)r=l[n],fb(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,j),n=m.length-1;n>=0;n--)r=m[n],fb(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w)}n=n||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=n.controllerDirectives,I=n.newIsolateScopeDirective,J=n.templateDirective,K=n.nonTlbTranscludeDirective,Q=!1,S=!1,U=n.hasElementTranscludeDirective,X=h.$$element=$d(g),Z=k,_=i,ab=0,cb=a.length;cb>ab;ab++){z=a[ab];var eb=z.$$start,hb=z.$$end;if(eb&&(X=N(g,eb,hb)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=$d(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],bb(j,O(C),g),_=F(C,i,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=$d(vb(g)).contents(),X.empty(),_=F(C,i))),z.template)if(S=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=kb(E),z.replace){if(Z=z,C=qb(E)?[]:ac($(z.templateNamespace,ke(E))),g=C[0],1!=C.length||g.nodeType!==qe)throw Ue("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");bb(j,X,g);var ib={$attr:{}},jb=L(g,[],ib),lb=a.splice(ab+1,a.length-(ab+1));I&&R(jb),a=a.concat(jb).concat(lb),V(h,ib),cb=a.length}else X.html(E);if(z.templateUrl)S=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),v=W(a.splice(ab,a.length-ab),X,h,j,Q&&_,l,m,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),cb=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?o(null,D,eb,hb):D&&o(D.pre,D.post,eb,hb)}catch(mb){e(mb,T(X))}z.terminal&&(v.terminal=!0,G=Math.max(G,z.priority))}return v.scope=w&&w.scope===!0,v.transcludeOnThisElement=Q,v.elementTranscludeOnThisElement=U,v.templateOnThisElement=S,v.transclude=_,n.hasElementTranscludeDirective=U,v}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function S(b,d,f,i,j,k,l){if(d===j)return null;var m=null;if(g.hasOwnProperty(d))for(var o,p=a.get(d+h),q=0,r=p.length;r>q;q++)try{o=p[q],(i===c||i>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(g.hasOwnProperty(b))for(var c,d=a.get(b+h),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"!=f.charAt(0)&&!a.hasOwnProperty(f)&&(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,g,h,j){var k,m,n=[],o=b[0],p=a.shift(),q=l({},p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),i(B.getTrustedResourceUrl(r)).then(function(i){var l,u,v,w;if(i=kb(i),p.replace){if(v=qb(i)?[]:ac($(s,ke(i))),l=v[0],1!=v.length||l.nodeType!==qe)throw Ue("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},bb(d,b,l);var x=L(l,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else l=o,b.html(i);for(a.unshift(q),k=Q(a,l,c,e,b,p,g,h,j),f(d,function(a,c){a==l&&(d[c]=b[0])}),m=H(b[0].childNodes,e);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=vb(l)),bb(A,$d(z),C),E($d(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(m,y,C,d,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(m,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Ue("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Ud(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=I(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function ab(a,b,c,e,f){var g=_(a,e);f=m[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===I(a))throw Ue("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(v.test(e))throw Ue("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function bb(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),$d(d).data($d(g).data()),_d?(ie=!0,_d.cleanData([g])):delete $d.cache[g[$d.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];$d(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function db(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fb(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,T(c))}}var gb=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};gb.prototype={$normalize:$b,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=_b(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=_b(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Kb(i,a),k=Lb(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=cb(a,"-"))),h=I(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=ke(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(ke(q[t]),!0),m+=" "+ke(q[t+1])}var u=ke(q[2*s]).split(/\s/);m+=D(ke(u[0]),!0),2===u.length&&(m+=" "+ke(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=jb()),e=d[a]||(d[a]=[]);return e.push(b),y.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){J(e,b)}}};var hb=d.startSymbol(),ib=d.endSymbol(),kb="{{"==hb||"}}"==ib?p:function(a){return a.replace(/\{\{/g,hb).replace(/}}/g,ib)},lb=/^ngAttr[A-Z]/;return F.$$addBindingInfo=w?function(a,b){var c=a.data("$binding")||[];je(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=w?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=w?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=w?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function $b(a){return pb(a.replace(Ve,""))}function _b(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function ac(a){a=$d(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===se&&ce.call(a,b,1)}return a}function bc(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){gb(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)&&(n=d.match(e),o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:hb(i.$scope,o,!0)||(b?hb(g,o,!0):c),fb(d,o,!0)),j){var q=(je(d)?d[d.length-1]:d).prototype;return m=Object.create(q),p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function cc(){this.$get=["$window",function(a){return $d(a.document)}]}function dc(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function ec(a,b){if(u(a)){var c=a.replace($e,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(We)||fc(c))&&(a=S(c))}}return a}function fc(a){var b=a.match(Ye);return b&&Ze[b[0]].test(a)}function gc(a){var b,c,d,e=jb();return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Ud(ke(a.substr(0,d))),c=ke(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function hc(a){var b=t(a)?a:c;return function(c){if(b||(b=gc(a)),c){var d=b[Ud(c)];return void 0===d&&(d=null),d}return b}}function ic(a,b,c,d){return x(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function jc(a){return a>=200&&300>a}function kc(){var a=this.defaults={transformResponse:[ec],transformRequest:[function(a){return!t(a)||B(a)||D(a)||C(a)?a:R(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(Xe),put:L(Xe),patch:L(Xe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(g,i,j,k,m,n){function o(b){function e(a){var b=l({},a);return b.data=a.data?ic(a.data,a.headers,a.status,i.transformResponse):a.data,jc(a.status)?b:m.reject(b)}function g(a){var b,c={};return f(a,function(a,d){x(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[Ud(b.method)]);a:for(c in f){d=Ud(c);for(e in h)if(Ud(e)===d)continue a;h[c]=f[c]}return g(h)}if(!ge.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);i.headers=h(b),i.method=Wd(i.method);var j=function(b){var d=b.headers,g=ic(b.data,hc(d),c,b.transformRequest);return r(g)&&f(d,function(a,b){"content-type"===Ud(b)&&delete d[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),v(b,g).then(e,e)},k=[j,c],n=m.when(i);for(f(A,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){var o=k.shift(),p=k.shift();n=n.then(o,p)}return n.success=function(a){return n.then(function(b){a(b.data,b.status,b.headers,i)}),n},n.error=function(a){return n.then(null,function(b){a(b.data,b.status,b.headers,i)}),n},n}function p(){f(arguments,function(a){o[a]=function(b,c){return o(l(c||{},{method:a,url:b}))}})}function q(){f(arguments,function(a){o[a]=function(b,c,d){return o(l(d||{},{method:a,url:b,data:c}))}})}function v(d,e){function f(a,c,d,e){function f(){h(c,a,d,e)}n&&(jc(a)?n.put(w,[a,c,gc(d),e]):n.remove(w)),b?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function h(a,b,c,e){b=Math.max(b,0),(jc(b)?q.resolve:q.reject)({data:a,status:b,headers:hc(c),config:d,statusText:e})}function j(a){h(a.data,a.status,L(a.headers()),a.statusText)}function l(){var a=o.pendingRequests.indexOf(d);-1!==a&&o.pendingRequests.splice(a,1)}var n,p,q=m.defer(),u=q.promise,v=d.headers,w=y(d.url,d.params);if(o.pendingRequests.push(d),u.then(l,l),(d.cache||a.cache)&&d.cache!==!1&&("GET"===d.method||"JSONP"===d.method)&&(n=t(d.cache)?d.cache:t(a.cache)?a.cache:z),n&&(p=n.get(w),s(p)?F(p)?p.then(j,j):je(p)?h(p[1],p[0],L(p[2]),p[3]):h(p,200,{},"OK"):n.put(w,u)),r(p)){var x=ed(d.url)?i.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(v[d.xsrfHeaderName||a.xsrfHeaderName]=x),g(d.method,w,e,f,v,d.timeout,d.withCredentials,d.responseType)}return u}function y(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(je(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():R(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var z=j("$http"),A=[];return f(e,function(a){A.unshift(u(a)?n.get(a):n.invoke(a))}),o.pendingRequests=[],p("get","delete","head","jsonp"),q("post","put","patch"),o.defaults=a,o}]}function lc(){return new a.XMLHttpRequest}function mc(){this.$get=["$browser","$window","$document",function(a,b,c){return nc(a,lc,a.defer,b.angular.callbacks,c[0])}]}function nc(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){ze(d,"load",f),ze(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"===a.type&&!e[b].called&&(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},ye(d,"load",f),ye(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,p){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Ud(g)){var t="_"+(e.counter++).toString(36);e[t]=function(a){e[t].data=a,e[t].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){r(k,a,e[t].data,"",b),e[t]=o})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){s(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==dd(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),p)try{v.responseType=p}catch(x){if("json"!==p)throw x}v.send(j||null)}if(m>0)var y=d(q,m);else F(m)&&m.then(q)}}function oc(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){try{return a=D(a),n&&!s(a)?a:E(a)}catch(b){var c=_e("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,t,u,v=0,w=[],y=[],z=f.length,A=[],B=[];z>v;){if(-1==(q=f.indexOf(a,v))||-1==(t=f.indexOf(b,q+h))){v!==z&&A.push(o(f.substring(v)));break}v!==q&&A.push(o(f.substring(v,q))),u=f.substring(q+h,t),w.push(u),y.push(c(u,p)),v=t+i,B.push(A.length),A.push("")}if(m&&A.length>1)throw _e("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||w.length){var C=function(a){for(var b=0,c=w.length;c>b;b++){if(n&&r(a[b]))return;A[B[b]]=a[b]}return A.join("")},D=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},E=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=R(a)}return a};return l(function(a){var b=0,c=w.length,e=new Array(c);try{for(;c>b;b++)e[b]=y[b](a);return C(e)}catch(g){var h=_e("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:w,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(y,function(c,e){var f=C(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function pc(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function qc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function rc(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function sc(a,b){var c=dd(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||bf[c.protocol]||null}function tc(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dd(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=V(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function uc(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function vc(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function wc(a){return a.replace(/(#.+)|#$/,"$1")}function xc(a){return a.substr(0,vc(a).lastIndexOf("/")+1)}function yc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function zc(a,b){this.$$html5=!0,b=b||"";var d=xc(a);sc(a,this),this.$$parse=function(a){var b=uc(d,a);if(!u(b))throw cf("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);tc(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=uc(a,e))!==c?(h=g,i=(g=uc(b,g))!==c?d+(uc("/",g)||g):a+h):(g=uc(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Ac(a,b){var c=xc(a);sc(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=uc(a,d)||uc(c,d);"#"===g.charAt(0)?(f=uc(b,g),r(f)&&(f=g)):f=this.$$html5?g:"",tc(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b){return vc(a)==vc(b)?(this.$$parse(b),!0):!1}}function Bc(a,b){this.$$html5=!0,Ac.apply(this,arguments);var c=xc(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==vc(d)?f=d:(g=uc(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Cc(a){return function(){return this[a]}}function Dc(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Ec(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return E(a)?(b.enabled=a,this):t(a)?(E(a.enabled)&&(b.enabled=a.enabled),E(a.requireBase)&&(b.requireBase=a.requireBase),E(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw cf("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=yc(n)+(m||"/"),k=e.history?zc:Bc}else l=vc(n),k=Ac;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=$d(a.target);"a"!==I(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=dd(h.animVal).href),o.test(h)||h&&!e.attr("target")&&!a.isDefaultPrevented()&&j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),j.absUrl()!=n&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=wc(d.url()),b=wc(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;
(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Fc(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gc(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ef("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Hc(a,b){if(a){if(a.constructor===a)throw ef("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw ef("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ef("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw ef("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Ic(a,b){if(a){if(a.constructor===a)throw ef("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===ff||a===gf||a===hf)throw ef("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Jc(a){return a.constant}function Kc(a,b,c,d){Hc(a,d);for(var e,f=b.split("."),g=0;f.length>1;g++){e=Gc(f.shift(),d);var h=Hc(a[e],d);h||(h={},a[e]=h),a=h}return e=Gc(f.shift(),d),Hc(a[e],d),a[e]=c,c}function Lc(a){return"constructor"==a}function Mc(a,b,d,e,f,g,h){Gc(a,g),Gc(b,g),Gc(d,g),Gc(e,g),Gc(f,g);var i=function(a){return Hc(a,g)},j=h||Lc(a)?i:p,k=h||Lc(b)?i:p,l=h||Lc(d)?i:p,m=h||Lc(e)?i:p,n=h||Lc(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Nc(a,b){return function(c,d){return a(c,d,Hc,b)}}function Oc(a,b,d){var e=b.expensiveChecks,g=e?pf:of,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Mc(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Mc(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Gc(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Lc(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Nc(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c){return Kc(b,a,c,a)},g[a]=h,h}function Pc(a){return x(a.valueOf)?a.valueOf():qf.call(a)}function Qc(){var a=jb(),b=jb();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Pc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Pc(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Pc(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==k&&c!==j,e=d?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=i,e.inputs=[a]),e}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new mf(t),v=new nf(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Rc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Tc(function(b){a.$evalAsync(b)},b)}]}function Sc(){this.$get=["$browser","$exceptionHandler",function(a,b){return Tc(function(b){a.defer(b)},b)}]}function Tc(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=je(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return F(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(this instanceof u){var d=new k;return a(b,c),d.promise}return new u(a)};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Uc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Vc(){var a=10,b=d("$rootScope"),c=null,g=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,h,i,k){function l(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function m(a){if(v.$$phase)throw b("inprog","{0} already in progress",v.$$phase);v.$$phase=a}function n(){v.$$phase=null}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}function s(){for(;z.length;)try{z.shift()()}catch(a){h(a)}g=null}function u(){null===g&&(g=k.defer(function(){v.$apply(s)}))}l.prototype={constructor:l,$new:function(a,b){function c(){d.$$destroyed=!0}var d;return b=b||this,a?(d=new l,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),d=new this.$$ChildScope),d.$parent=b,d.$$prevSibling=b.$$childTail,b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d,(a||b!=this)&&d.$on("$destroy",c),d},$watch:function(a,b,d){var e=i(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,d,e);var f=this,g=f.$$watchers,h={fn:b,last:q,get:e,exp:a,eq:!!d};return c=null,x(b)||(h.fn=o),g||(g=f.$$watchers=[]),g.unshift(h),function(){J(g,h),c=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,!d&&i!==h&&(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,!d&&i!==h&&(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,j)):b(f,h,j),k)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Vd.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,j=this,k=b.length>1,l=0,m=i(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var d,e,f,i,j,l,o,p,r,t,u=a,z=this,A=[];m("$digest"),k.$$checkUrlChange(),this===v&&null!==g&&(k.defer.cancel(g),s()),c=null;do{for(l=!1,p=z;w.length;){try{t=w.shift(),t.scope.$eval(t.expression,t.locals)}catch(B){h(B)}c=null}a:do{if(i=p.$$watchers)for(j=i.length;j--;)try{if(d=i[j])if((e=d.get(p))===(f=d.last)||(d.eq?M(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))){if(d===c){l=!1;break a}}else l=!0,c=d,d.last=d.eq?K(e,null):e,d.fn(e,f===q?e:f,p),5>u&&(r=4-u,A[r]||(A[r]=[]),A[r].push({msg:x(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,newVal:e,oldVal:f}))}catch(B){h(B)}if(!(o=p.$$childHead||p!==z&&p.$$nextSibling))for(;p!==z&&!(o=p.$$nextSibling);)p=p.$parent}while(p=o);if((l||w.length)&&!u--)throw n(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,A)}while(l||w.length);for(n();y.length;)try{y.shift()()}catch(B){h(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==v){for(var b in this.$$listenerCount)p(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return i(a)(this,b)},$evalAsync:function(a,b){!v.$$phase&&!w.length&&k.defer(function(){w.length&&v.$digest()}),w.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){y.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){h(b)}finally{n();try{v.$digest()}catch(b){throw h(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&z.push(b),u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,p(e,1,a))}},$emit:function(a){var b,c,d,e=[],f=this,g=!1,i={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=N([i],arguments,1);do{for(b=f.$$listeners[a]||e,i.currentScope=f,c=0,d=b.length;d>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){h(k)}else b.splice(c,1),c--,d--;if(g)return i.currentScope=null,i;f=f.$parent}while(f);return i.currentScope=null,i},$broadcast:function(a){var b=this,c=b,d=b,e={name:a,targetScope:b,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!b.$$listenerCount[a])return e;for(var f,g,i,j=N([e],arguments,1);c=d;){for(e.currentScope=c,f=c.$$listeners[a]||[],g=0,i=f.length;i>g;g++)if(f[g])try{f[g].apply(null,j)}catch(k){h(k)}else f.splice(g,1),g--,i--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==b&&c.$$nextSibling))for(;c!==b&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var v=new l,w=v.$$asyncQueue=[],y=v.$$postDigestQueue=[],z=v.$$applyAsyncQueue=[];return v}]}function Wc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=dd(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Xc(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw rf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=le(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw rf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yc(a){var b=[];return s(a)&&f(a,function(a){b.push(Xc(a))}),b}function Zc(){this.SCE_CONTEXTS=sf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Yc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Yc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?ed(b):!!a.exec(b.href)}function f(c){var d,f,g=dd(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw rf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw rf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===sf.RESOURCE_URL){if(f(b))return b;throw rf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===sf.HTML)return k(b);throw rf("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(){throw rf("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[sf.HTML]=g(l),m[sf.CSS]=g(l),m[sf.URL]=g(l),m[sf.JS]=g(l),m[sf.RESOURCE_URL]=g(m[sf.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function $c(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Zd)throw rf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=L(sf);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(sf,function(a,b){var c=Ud(b);d[pb("parse_as_"+c)]=function(b){return e(a,b)},d[pb("get_trusted_"+c)]=function(b){return g(a,b)},d[pb("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function _c(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Ud((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k="transition"in j||c+"Transition"in j,l="animation"in j||c+"Animation"in j,f&&(!k||!l)&&(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=Zd)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:me(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function ad(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){function g(a){if(h.totalPendingRequests--,!f)throw Ue("tpload","Failed to load template: {0}",e);return c.reject(a)}var h=d;h.totalPendingRequests++;var i=b.defaults&&b.defaults.transformResponse;je(i)?i=i.filter(function(a){return a!==ec}):i===ec&&(i=null);var j={cache:a,transformResponse:i};return b.get(e,j).then(function(a){return h.totalPendingRequests--,a.data},g)}return d.totalPendingRequests=0,d}]}function bd(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=ge.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+le(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function cd(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function dd(a){var b=a;return Zd&&(tf.setAttribute("href",b),b=tf.href),tf.setAttribute("href",b),{href:tf.href,protocol:tf.protocol?tf.protocol.replace(/:$/,""):"",host:tf.host,search:tf.search?tf.search.replace(/^\?/,""):"",hash:tf.hash?tf.hash.replace(/^#/,""):"",hostname:tf.hostname,port:tf.port,pathname:"/"===tf.pathname.charAt(0)?tf.pathname:"/"+tf.pathname}}function ed(a){var b=u(a)?dd(a):a;return b.protocol===uf.protocol&&b.host===uf.host}function fd(){this.$get=q(a)}function gd(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",kd),b("date",vd),b("filter",hd),b("json",wd),b("limitTo",xd),b("lowercase",zf),b("number",ld),b("orderBy",yd),b("uppercase",Af)}function hd(){return function(a,b,c){if(!je(a))return a;var d,e;switch(typeof b){case"function":d=b;break;case"boolean":case"number":case"string":e=!0;case"object":d=id(b,c,e);break;default:return a}return a.filter(d)}}function id(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=M:x(b)||(b=function(a,b){return t(a)||t(b)?!1:(a=Ud(""+a),b=Ud(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?jd(d,a.$,b,!1):jd(d,a,b,c)}}function jd(a,b,c,d,e){var f=typeof a,g=typeof b;if("string"===g&&"!"===b.charAt(0))return!jd(a,b.substring(1),c,d);if("array"===f)return a.some(function(a){return jd(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&jd(a[h],b,c,!0))return!0;return e?!1:jd(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!x(i)){var j="$"===h,k=j?a:a[h];if(!jd(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function kd(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:md(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function ld(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:md(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function md(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?a=0:(h=g,j=!0)}if(j)e>0&&1>a&&(h=a.toFixed(e),a=parseFloat(h));else{var l=(g.split(vf)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(vf),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return 0===a&&(f=!1),i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf),i.join("")}function nd(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function od(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),nd(f,b,d)}}function pd(a,b){return function(c,d){var e=c["get"+a](),f=Wd(b?"SHORT"+a:a);return d[f][e]}}function qd(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=nd(Math[b>0?"floor":"ceil"](b/60),2)+nd(Math.abs(b%60),2)}function rd(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function sd(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function td(a){return function(b){var c=rd(b.getFullYear()),d=sd(b),e=+d-+c,f=1+Math.round(e/6048e5);return nd(f,a)}}function ud(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function vd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=yf.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=xf.exec(d),h?(j=N(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=wf[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function wd(){return function(a,b){return r(b)&&(b=2),R(a,b)}}function xd(){return function(a,b){if(v(a)&&(a=a.toString()),!je(a)&&!u(a))return a;if(b=1/0===Math.abs(Number(b))?Number(b):m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d;if(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0)c=0,d=b;else{if(!b)return[];c=a.length+b,d=a.length}return a.slice(c,d)}}function yd(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=je(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),be.call(b).sort(g(f,d))):b}}function zd(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Ad(a,b){a.$name=b}function Bd(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||Df;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){gb(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),J(i,a)},Pd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(J(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,Xf),e.addClass(a,Yf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,Xf,Yf+" "+Ef),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,Ef),h.$submitted=!0,j.$setSubmitted()}}function Cd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Dd(a,b,c,d,e,f){Ed(a,b,c,d,e,f),Cd(d)}function Ed(a,b,c,d,e,f){var g=Ud(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"!==g&&(!c.ngTrim||"false"!==c.ngTrim)&&(e=ke(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,(!b||b.value!==c)&&i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Fd(a,b){if(w(a))return a;if(u(a)){Of.lastIndex=0;var c=Of.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=rd(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return 0/0}function Gd(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),If.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return 0/0}}function Hd(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&(!a.getTime||a.getTime()===a.getTime())}function n(a){return s(a)?w(a)?a:d(a):c}Id(f,g,h,i),Ed(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return"UTC"===p&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(a&&!w(a))throw Sf("datefmt","Expected `{0}` to be a date",a);if(m(a)){if(o=a,o&&"UTC"===p){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return l("date")(a,e,p)}return o=null,""}),s(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||r(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(s(h.max)||h.ngMax){var t;i.$validators.max=function(a){return!m(a)||r(t)||d(a)<=t},h.$observe("max",function(a){t=n(a),i.$validate()})}}}function Id(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Td)||{};return d.badInput&&!d.typeMismatch?c:a})}function Jd(a,b,d,e,f,g){if(Id(a,b,d,e),Ed(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Lf.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw Sf("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),d.min||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(d.max||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Kd(a,b,c,d,e,f){Ed(a,b,c,d,e,f),Cd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Jf.test(c)}}function Ld(a,b,c,d,e,f){Ed(a,b,c,d,e,f),Cd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;
return d.$isEmpty(c)||Kf.test(c)}}function Md(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Nd(a,b,c,e,f){var g;if(s(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function Od(a,b,c,d,e,f,g,h){var i=Nd(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Nd(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return M(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Pd(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),E(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(_f,!0),h.$valid=h.$invalid=c,g("",null)):(f(_f,!1),h.$valid=Qd(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Qd(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+cb(a,"-"):"",f(Vf+a,b===!0),f(Wf+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[Wf]=!(j[Vf]=i.hasClass(Vf)),h.$setValidity=b}function Qd(a){if(a)for(var b in a)return!1;return!0}function Rd(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(je(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!M(a,o)){var d=e(o);m(d,c)}}else j(c)}o=L(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}var Sd=/^\/(.+)\/([a-z]*)$/,Td="validity",Ud=function(a){return u(a)?a.toLowerCase():a},Vd=Object.prototype.hasOwnProperty,Wd=function(a){return u(a)?a.toUpperCase():a},Xd=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Yd=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Ud=Xd,Wd=Yd);var Zd,$d,_d,ae,be=[].slice,ce=[].splice,de=[].push,ee=Object.prototype.toString,fe=d("ng"),ge=a.angular||(a.angular={}),he=0;Zd=b.documentMode,o.$inject=[],p.$inject=[];var ie,je=Array.isArray,ke=function(a){return u(a)?a.trim():a},le=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},me=function(){if(s(me.isActive_))return me.isActive_;var a=!!b.querySelector("[ng-csp]")||!!b.querySelector("[data-ng-csp]");if(!a)try{new Function("")}catch(c){a=!0}return me.isActive_=a},ne=["ng-","data-ng-","ng:","x-ng-"],oe=/[A-Z]/g,pe=!1,qe=1,re=3,se=8,te=9,ue=11,ve={full:"1.3.8",major:1,minor:3,dot:8,codeName:"prophetic-narwhal"};ub.expando="ng339";var we=ub.cache={},xe=1,ye=function(a,b,c){a.addEventListener(b,c,!1)},ze=function(a,b,c){a.removeEventListener(b,c,!1)};ub._data=function(a){return this.cache[a[this.expando]]||{}};var Ae=/([\:\-\_]+(.))/g,Be=/^moz([A-Z])/,Ce={mouseleave:"mouseout",mouseenter:"mouseover"},De=d("jqLite"),Ee=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Fe=/<|&#?\w+;/,Ge=/<([\w:]+)/,He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td;var Je=ub.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ub(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return $d(a>=0?this[a]:this[this.length+a])},length:0,push:de,sort:[].sort,splice:[].splice},Ke={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ke[Ud(a)]=a});var Le={};f("input,select,option,textarea,button,form,details".split(","),function(a){Le[a]=!0});var Me={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Ab,removeData:yb},function(a,b){ub[b]=a}),f({data:Ab,inheritedData:Gb,scope:function(a){return $d.data(a,"$scope")||Gb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return $d.data(a,"$isolateScope")||$d.data(a,"$isolateScopeNoTemplate")},controller:Fb,injector:function(a){return Gb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,c){return b=pb(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=Ud(b);if(Ke[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===qe||c===re?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===I(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(wb(a,!0),void(a.innerHTML=b))},empty:Hb},function(a,b){ub.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Hb&&(2==a.length&&a!==Bb&&a!==Fb?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===Ab)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:yb,on:function Rg(a,b,c,d){if(s(d))throw De("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(rb(a)){var e=zb(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Mb(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Rg(a,Ce[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&ye(a,b,g),j=f[b]),j.push(c)}}},off:xb,one:function(a,b,c){a=$d(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;wb(a),f(new ub(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===qe&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===qe||c===ue){b=new ub(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===qe){var c=a.firstChild;f(new ub(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=$d(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Ib,detach:function(a){Ib(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ub(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!Bb(a,b)),(d?Db:Cb)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==ue?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:vb,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=zb(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=L(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){ub.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=$d(e))):Eb(e,a(this[f],b,c,d));return s(e)?e:this},ub.prototype.bind=ub.prototype.on,ub.prototype.unbind=ub.prototype.off}),Pb.prototype={put:function(a,b){this[Ob(a,this.nextUid)]=b},get:function(a){return this[Ob(a,this.nextUid)]},remove:function(a){var b=this[a=Ob(a,this.nextUid)];return delete this[a],b}};var Ne=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Oe=/,/,Pe=/^\s*(_?)(\S+?)\1\s*$/,Qe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Re=d("$injector");Sb.$$annotate=Rb;var Se=d("$animate"),Te=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Se("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=jb();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a===!0&&!f&&c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if(ge.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a){return a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=$d(a),b=u(b)?b:je(b)?b.join(" "):"",f(a,function(a){Db(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=$d(a),b=u(b)?b:je(b)?b.join(" "):"",f(a,function(a){Cb(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=$d(a);var k=a.data(i);k?f&&k.options&&(k.options=ge.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=je(b)?b:b.split(" "),c=je(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Ue=d("$compile");Zb.$inject=["$provide","$$sanitizeUriProvider"];var Ve=/^((?:x|data)[\:\-_])/i,We="application/json",Xe={"Content-Type":We+";charset=utf-8"},Ye=/^\[|^\{(?!\{)/,Ze={"[":/]$/,"{":/}$/},$e=/^\)\]\}',?\n/,_e=d("$interpolate"),af=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,bf={http:80,https:443,ftp:21},cf=d("$location"),df={$$html5:!1,$$replace:!1,absUrl:Cc("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=af.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cc("$$protocol"),host:Cc("$$host"),port:Cc("$$port"),path:Dc("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw cf("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=K(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Dc("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Bc,Ac,zc],function(a){a.prototype=Object.create(df),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zc||!this.$$html5)throw cf("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var ef=d("$parse"),ff=Function.prototype.call,gf=Function.prototype.apply,hf=Function.prototype.bind,jf=jb();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,jf[b]=a}),jf["this"]=function(a){return a},jf["this"].sharedGetter=!0;var kf=l(jb(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),lf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},mf=function(a){this.options=a};mf.prototype={constructor:mf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=kf[b],f=kf[c],g=kf[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||""===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw ef("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Ud(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=lf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var nf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};nf.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),nf.prototype={constructor:nf,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in jf?a=jf[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b,c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw ef("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw ef("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){if(0===this.tokens.length)throw ef("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},unaryFn:function(a,b){var c=kf[a];return l(function(a,d){return c(a,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=kf[b];return l(function(b,d){return e(b,d,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return Oc(a,this.options,this.text)},constant:function(){var a=this.consume().value;return l(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.$filter(this.consume().text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());var f=[a].concat(b||[]);return l(function(f,g){var h=a(f,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](f,g);return e.apply(c,d)}return e(h)},{constant:!e.$stateful&&f.every(Jc),inputs:!e.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if((b=this.expect("?"))&&(a=this.assignment(),this.consume(":"))){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.text,this.logicalAND(),!0);return b},logicalAND:function(){for(var a,b=this.equality();a=this.expect("&&");)b=this.binaryFn(b,a.text,this.equality(),!0);return b},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b=this.binaryFn(b,a.text,this.relational());return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b=this.binaryFn(b,a.text,this.additive());return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.text,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.text,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(nf.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var b=this.identifier();return l(function(d,e,f){var g=f||a(d,e);return null==g?c:b(g)},{assign:function(c,d,e){var f=a(c,e);return f||a.assign(c,f={}),b.assign(f,d)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=d(e,f);return Gc(i,b),h?g=Hc(h[i],b):c},{assign:function(c,e,f){var g=Gc(d(c,f),b),h=Hc(a(c,f),b);return h||a.assign(c,h={}),h[g]=e}})},functionCall:function(a,b){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var i=b?b(g,h):s(b)?c:g,j=a(g,h,i)||o;if(f)for(var k=d.length;k--;)f[k]=Hc(d[k](g,h),e);Hc(i,e),Ic(j,e);var l=j.apply?j.apply(i,f):j(f[0],f[1],f[2],f[3],f[4]);return Hc(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Jc),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.consume();c.constant?a.push(c.value):c.identifier?a.push(c.text):this.throwError("invalid key",c),this.consume(":"),b.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Jc),inputs:b})}};var of=jb(),pf=jb(),qf=Object.prototype.valueOf,rf=d("$sce"),sf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ue=d("$compile"),tf=b.createElement("a"),uf=dd(a.location.href);gd.$inject=["$provide"],kd.$inject=["$locale"],ld.$inject=["$locale"];var vf=".",wf={yyyy:od("FullYear",4),yy:od("FullYear",2,0,!0),y:od("FullYear",1),MMMM:pd("Month"),MMM:pd("Month",!0),MM:od("Month",2,1),M:od("Month",1,1),dd:od("Date",2),d:od("Date",1),HH:od("Hours",2),H:od("Hours",1),hh:od("Hours",2,-12),h:od("Hours",1,-12),mm:od("Minutes",2),m:od("Minutes",1),ss:od("Seconds",2),s:od("Seconds",1),sss:od("Milliseconds",3),EEEE:pd("Day"),EEE:pd("Day",!0),a:ud,Z:qd,ww:td(2),w:td(1)},xf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,yf=/^\-?\d+$/;vd.$inject=["$locale"];var zf=q(Ud),Af=q(Wd);yd.$inject=["$parse"];var Bf=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){var c="[object SVGAnimatedString]"===ee.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),Cf={};f(Ke,function(a,b){if("multiple"!=a){var c=$b("ng-"+b);Cf[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Me,function(a,b){Cf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Sd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=$b("ng-"+a);Cf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ee.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Zd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Df={$addControl:o,$$renameControl:Ad,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},Ef="ng-submitted";Bd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Ff=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Bd,compile:function(a){return a.addClass(Xf).addClass(Vf),{pre:function(a,d,e,f){if(!("action"in e)){var g=function(b){a.$apply(function(){f.$commitViewValue(),f.$setSubmitted()}),b.preventDefault()};ye(d[0],"submit",g),d.on("$destroy",function(){b(function(){ze(d[0],"submit",g)},0,!1)})}var h=f.$$parentForm,i=f.$name;i&&(Kc(a,i,f,i),e.$observe(e.name?"name":"ngForm",function(b){i!==b&&(Kc(a,i,c,i),i=b,Kc(a,i,f,i),h.$$renameControl(f,i))})),d.on("$destroy",function(){h.$removeControl(f),i&&Kc(a,i,c,i),l(f,Df)})}}}};return d}]},Gf=Ff(),Hf=Ff(!0),If=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Jf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Kf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Lf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Mf=/^(\d{4})-(\d{2})-(\d{2})$/,Nf=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Of=/^(\d{4})-W(\d\d)$/,Pf=/^(\d{4})-(\d\d)$/,Qf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Rf=/(\s+|^)default(\s+|$)/,Sf=new d("ngModel"),Tf={text:Dd,date:Hd("date",Mf,Gd(Mf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Hd("datetimelocal",Nf,Gd(Nf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Hd("time",Qf,Gd(Qf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Hd("week",Of,Fd,"yyyy-Www"),month:Hd("month",Pf,Gd(Pf,["yyyy","MM"]),"yyyy-MM"),number:Jd,url:Kd,email:Ld,radio:Md,checkbox:Od,hidden:o,button:o,submit:o,reset:o,file:o},Uf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Tf[Ud(g.type)]||Tf.text)(e,f,g,h[0],b,a,c,d)}}}}],Vf="ng-valid",Wf="ng-invalid",Xf="ng-pristine",Yf="ng-dirty",Zf="ng-untouched",$f="ng-touched",_f="ng-pending",ag=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m=g(d.ngModel),n=m.assign,p=m,q=n,t=null,u=this;this.$$setOptions=function(a){if(u.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");p=function(a){var c=m(a);return x(c)&&(c=b(a)),c},q=function(a){x(m(a))?c(a,{$$$p:u.$modelValue}):n(a,u.$modelValue)}}else if(!m.assign)throw Sf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,T(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var w=e.inheritedData("$formController")||Df,y=0;Pd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:w,$animate:h}),this.$setPristine=function(){u.$dirty=!1,u.$pristine=!0,h.removeClass(e,Yf),h.addClass(e,Xf)},this.$setDirty=function(){u.$dirty=!0,u.$pristine=!1,h.removeClass(e,Xf),h.addClass(e,Yf),w.$setDirty()},this.$setUntouched=function(){u.$touched=!1,u.$untouched=!0,h.setClass(e,Zf,$f)},this.$setTouched=function(){u.$touched=!0,u.$untouched=!1,h.setClass(e,$f,Zf)},this.$rollbackViewValue=function(){i.cancel(t),u.$viewValue=u.$$lastCommittedViewValue,u.$render()},this.$validate=function(){if(!v(u.$modelValue)||!isNaN(u.$modelValue)){var a=u.$$lastCommittedViewValue,b=u.$$rawModelValue,d=u.$$parserName||"parse",e=u.$error[d]?!1:c,f=u.$valid,g=u.$modelValue,h=u.$options&&u.$options.allowInvalid;u.$$runValidators(e,b,a,function(a){!h&&f!==a&&(u.$modelValue=a?b:c,u.$modelValue!==g&&u.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d,e){function g(a){var b=u.$$parserName||"parse";if(a===c)j(b,null);else if(j(b,a),!a)return f(u.$validators,function(a,b){j(b,null)}),f(u.$asyncValidators,function(a,b){j(b,null)}),!1;return!0}function h(){var a=!0;return f(u.$validators,function(c,e){var f=c(b,d);a=a&&f,j(e,f)}),a?!0:(f(u.$asyncValidators,function(a,b){j(b,null)}),!1)}function i(){var a=[],e=!0;f(u.$asyncValidators,function(f,g){var h=f(b,d);if(!F(h))throw Sf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);j(g,c),a.push(h.then(function(){j(g,!0)},function(){e=!1,j(g,!1)}))}),a.length?k.all(a).then(function(){l(e)},o):l(!0)}function j(a,b){m===y&&u.$setValidity(a,b)}function l(a){m===y&&e(a)}y++;var m=y;return g(a)&&h()?void i():void l(!1)},this.$commitViewValue=function(){var a=u.$viewValue;i.cancel(t),(u.$$lastCommittedViewValue!==a||""===a&&u.$$hasNativeValidators)&&(u.$$lastCommittedViewValue=a,u.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){u.$modelValue!==h&&u.$$writeModelToScope()}var d=u.$$lastCommittedViewValue,e=d,f=r(e)?c:!0;if(f)for(var g=0;g<u.$parsers.length;g++)if(e=u.$parsers[g](e),r(e)){f=!1;break}v(u.$modelValue)&&isNaN(u.$modelValue)&&(u.$modelValue=p(a));var h=u.$modelValue,i=u.$options&&u.$options.allowInvalid;u.$$rawModelValue=e,i&&(u.$modelValue=e,b()),u.$$runValidators(f,e,u.$$lastCommittedViewValue,function(a){i||(u.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){q(a,u.$modelValue),f(u.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){u.$viewValue=a,(!u.$options||u.$options.updateOnDefault)&&u.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=u.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(t),d?t=i(function(){u.$commitViewValue()},d):j.$$phase?u.$commitViewValue():a.$apply(function(){u.$commitViewValue()})},a.$watch(function(){var b=p(a);if(b!==u.$modelValue){u.$modelValue=u.$$rawModelValue=b;for(var d=u.$formatters,e=d.length,f=b;e--;)f=d[e](f);u.$viewValue!==f&&(u.$viewValue=u.$$lastCommittedViewValue=f,u.$render(),u.$$runValidators(c,b,f,o))}return b})}],bg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ag,priority:1,compile:function(b){return b.addClass(Xf).addClass(Zf).addClass(Vf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||Df;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)
}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],cg=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),dg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},eg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,T(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||r(g)||g.test(a)}}}}},fg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=m(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(a)||b.length<=e}}}}},gg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}},hg=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?ke(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?ke(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return je(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},ig=/^(true|false|\d+)$/,jg=function(){return{restrict:"A",priority:100,compile:function(a,b){return ig.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},kg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=ke(this.$options.updateOn.replace(Rf,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},lg=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],mg=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],ng=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],og=Rd("",!0),pg=Rd("Odd",0),qg=Rd("Even",1),rg=zd({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),sg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],tg={},ug={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=$b("ng-"+a);tg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};ug[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var vg=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ib(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],wg=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ge.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",i=f.autoscroll;return function(e,f,j,k,l){var m,n,o,p=0,q=function(){n&&(n.remove(),n=null),m&&(m.$destroy(),m=null),o&&(c.leave(o).then(function(){n=null}),n=o,o=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=function(){s(i)&&(!i||e.$eval(i))&&b()},j=++p;d?(a(d,!0).then(function(a){if(j===p){var b=e.$new();k.template=a;var i=l(b,function(a){q(),c.enter(a,null,f).then(g)});m=b,o=i,m.$emit("$includeContentLoaded",d),e.$eval(h)}},function(){j===p&&(q(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(q(),k.template=null)})}}}}],xg=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(sb(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],yg=zd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),zg=zd({terminal:!0,priority:1e3}),Ag=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,g,h){function i(a){g.text(a||"")}var j,k=h.count,l=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,n=e.$eval(l)||{},o={},p=b.startSymbol(),q=b.endSymbol(),r=p+k+"-"+m+q,s=ge.noop;f(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+Ud(c[2]);n[e]=g.attr(h.$attr[b])}}),f(n,function(a,d){o[d]=b(a.replace(c,r))}),e.$watch(k,function(b){var c=parseFloat(b),d=isNaN(c);!d&&!(c in n)&&(c=a.pluralCat(c-m)),c!==j&&(!d||!isNaN(j))&&(s(),s=e.$watch(o[c],i),j=c)})}}}],Bg=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!a.$first&&!a.$last,a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Ob};return t?w=a(t):(y=function(a,b){return Ob(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=jb();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=jb();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=ib(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(ib(F.clone),null,$d(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,$d(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],Cg="ng-hide",Dg="ng-hide-animate",Eg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Cg,{tempClasses:Dg})})}}}],Fg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Cg,{tempClasses:Dg})})}}}],Gg=zd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Hg=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=ib(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Ig=zd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Jg=zd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Kg=zd({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Lg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Mg=d("ngOptions"),Ng=q({restrict:"A",terminal:!0}),Og=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){gb(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue===a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Ob(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Pb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){M(d,c.$viewValue)||(d=L(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(t)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),r()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&je(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))}return a}function n(a){var b;if(t)if(J&&je(a)){b=new Pb([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Pb(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,t?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){w||(b.$$postDigest(r),w=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function r(){w=!1;var a,c,d,e,k,l,m,o,r,u,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;u=S.length,u>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(t||(v||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,r=P.length;r>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:y.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,u=c.length;u>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label),D.prop("label",l.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),Zd&&D.prop("selected",l.selected))):(""===d.id&&v?G=v:(G=x.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove()}for(;L.length>z;){for(c=L.pop(),B=1;B<c.length;++B)q(T,c[B].label,!1);c[0].element.remove()}f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}var z;if(!(z=u.match(e)))throw Mg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),h.empty(),h.on("change",k),i.$render=r,b.$watchCollection(H,o),b.$watchCollection(m,o),t&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=!1,x=$d(b.createElement("option")),y=$d(b.createElement("optgroup")),z=x.clone(),A=0,B=i.children(),C=B.length;C>A;A++)if(""===B[A].value){o=v=B.eq(A);break}p.init(q,v,z),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Pg=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Qg=q({restrict:"E",terminal:!1});a.angular.bootstrap||(db(),nb(ge),$d(b).ready(function(){$(b,_)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),c("angular",["jquery"],function(a){return function(){var b;return b||a.angular}}(this)),c("lorax/directives/window",["angular","jquery"],function(a,b){var c={0:"small",560:"medium",960:"large",1360:"xlarge"},d=function(){return{restrict:"A",controller:e,link:f}};d.$inject=["$rootScope"];var e=function(a,b,c,d,e,f){this.$scope=a,this.$rootScope=b,this.$compile=c,this.$timeout=d,this.windowService=e,this.pubSubService=f,this._hasPageYOffset=void 0!==window.pageYOffset};e.$inject=["$scope","$rootScope","$compile","$timeout","windowService","pubSubService"],e.prototype.evaluateBreakpoint=function(){var a=c[Object.keys(c)[0]];for(var b in c)b<this.windowDims.width&&(a=c[b]);a!==this.latestBreakpoint&&(this.latestBreakpoint=a,this.windowService.setBreakpoint(this.latestBreakpoint),this.$timeout(function(){this.$scope.$apply()}.bind(this)))},e.prototype.onResize=function(){this.windowService.setDimensions(this.windowDims),this.evaluateBreakpoint()},e.prototype.onScroll=function(a){var b=this._hasPageYOffset?a.originalEvent.currentTarget.pageYOffset:(document.documentElement||document.body).scrollTop;this.windowService.setScrollTop(b)},e.prototype.getBreakpoint=function(){return this.windowService.breakpoint},e.prototype.setBreakpoint=function(a){this.windowService.setBreakpoint(a)};var f=function(c,d,e,f){function g(a){d.removeClass(function(a,b){return(b.match(/bp-\S+/g)||[]).join(" ")}).addClass("bp-"+a)}function h(a){var b=a===!0?"addClass":"removeClass";d[b]("is-detail")}function i(a,b){b||d.addClass("no-anim"),d.attr("data-bg-mode",a),b||setTimeout(function(){d.removeClass("no-anim")},500)}function j(a){var b=a===!0?"addClass":"removeClass";d[b]("is-modal-open")}function k(a,b){var c=a===!0?"addClass":"removeClass";d[c]("is-side-panel-open side-panel-"+b)}var l=b(window),m=a.bind(f,function(){this.windowDims={height:l.innerHeight(),width:l.innerWidth()},this.onResize()});l.on("scroll",f.onScroll.bind(f)).on("resize",m).trigger("resize"),g(f.windowService.breakpoint()),f.pubSubService.subscribe("windowService.breakpoint",g),f.pubSubService.subscribe("windowService.detailMode",h),f.pubSubService.subscribe("windowService.bgMode",i),f.pubSubService.subscribe("windowService.modalOpen",j),f.pubSubService.subscribe("windowService.sidePanelOpen",k)};return d}),c("lorax/directives/prevent-default",[],function(){var a=function(){return{restrict:"A",link:b}},b=function(a,b,c){(c.ngClick||""===c.href||"#"===c.href)&&b.on("click",function(a){a.preventDefault()})};return a}),function(a){a.fn.extend({customSelect:function(b){if("undefined"==typeof document.body.style.maxHeight)return this;var c={customClass:"customSelect",mapClass:!0,mapStyle:!0},b=a.extend(c,b),d=b.customClass,e=function(b,c){var d=b.find(":selected"),e=c.children(":first"),g=d.html()||"&nbsp;";e.html(g),d.attr("disabled")?c.addClass(f("DisabledOption")):c.removeClass(f("DisabledOption")),setTimeout(function(){c.removeClass(f("Open")),a(document).off("mouseup.customSelect")},60)},f=function(a){return d+a};return this.each(function(){var c=a(this),g=a("<span />").addClass(f("Inner")),h=a("<span />");c.after(h.append(g)),h.addClass(d),b.mapClass&&h.addClass(c.attr("class")),b.mapStyle&&h.attr("style",c.attr("style")),c.addClass("hasCustomSelect").on("render.customSelect",function(){e(c,h),c.css("width","");var a=parseInt(c.outerWidth(),10)-(parseInt(h.outerWidth(),10)-parseInt(h.width(),10));h.css({display:"inline-block"});var b=h.outerHeight();c.attr("disabled")?h.addClass(f("Disabled")):h.removeClass(f("Disabled")),g.css({width:a,display:"inline-block"}),c.css({"-webkit-appearance":"menulist-button",width:h.outerWidth(),position:"absolute",opacity:0,height:b,fontSize:h.css("font-size")})}).on("change.customSelect",function(){h.addClass(f("Changed")),e(c,h)}).on("keyup.customSelect",function(a){h.hasClass(f("Open"))?(13==a.which||27==a.which)&&e(c,h):(c.trigger("blur.customSelect"),c.trigger("focus.customSelect"))}).on("mousedown.customSelect",function(){h.removeClass(f("Changed"))}).on("mouseup.customSelect",function(b){h.hasClass(f("Open"))||(a("."+f("Open")).not(h).length>0&&"undefined"!=typeof InstallTrigger?c.trigger("focus.customSelect"):(h.addClass(f("Open")),b.stopPropagation(),a(document).one("mouseup.customSelect",function(b){b.target!=c.get(0)&&a.inArray(b.target,c.find("*").get())<0?c.trigger("blur.customSelect"):e(c,h)})))}).on("focus.customSelect",function(){h.removeClass(f("Changed")).addClass(f("Focus"))}).on("blur.customSelect",function(){h.removeClass(f("Focus")+" "+f("Open"))}).on("mouseenter.customSelect",function(){h.addClass(f("Hover"))}).on("mouseleave.customSelect",function(){h.removeClass(f("Hover"))}).trigger("render.customSelect")})}})}(jQuery),c("jquery-customselect",["jquery"],function(){}),c("lorax/directives/modal-email",["angular","jquery","jquery-customselect"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,templateUrl:"/app/lorax/directives/modal-email.tpl.html"}},d=function(a,b,c){this._$scope=a,this._windowService=b,this._dataService=c,a.modalEmail={open:!1,closeModal:this.closeModal.bind(this),email:null,terms:null,onInputChange:this.onInputChange.bind(this),showSubmitBtn:!1,showFailedBtn:!1,showSuccessBtn:!1},a.$on("openEmailModal",this.openModal.bind(this)),this._dataService.getMain().then(function(a){this._$scope.modalEmail.content=a.getModals().email}.bind(this)),this._dataService.getMap().then(function(a){this._$scope.modalEmail.countries=a.countryData}.bind(this))};return d.$inject=["$scope","windowService","dataService"],d.prototype.openModal=function(){a.extend(this._$scope.modalEmail,{open:!0}),this._windowService.setModalOpen(!0),b(".enter-email__country select").customSelect({customClass:"enter-email__country-dropdown"})},d.prototype.closeModal=function(){this._$scope.modalEmail.open=!1,this._windowService.setModalOpen(!1)},d.prototype.onInputChange=function(){this._$scope.modalEmail.showSubmitBtn=this._$scope.modalEmail.terms&&this._$scope.modalEmail.email?!0:!1},d.prototype.onSubmitFail=function(){this._$scope.modalEmail.showFailedBtn=!0},d.prototype.onSubmitSuccess=function(){this._$scope.modalEmail.showSuccessBtn=!0},c}),c("lorax/directives/modal-share",["angular","jquery"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/modal-share.tpl.html"}},d=function(b,c,d,e,f,g){this._$scope=b,this._$timeout=c,this._dataService=d,this._windowService=e,this._utilsService=f,this._routesService=g,this._offset={small:-60,medium:-60,large:-30,xlarge:-30},this._clickPhrase={small:!1,medium:!1,large:!0,xlarge:!0},b.modalShare={open:!1,service:null,closeModal:this.closeModal.bind(this),onShare:this.onShare.bind(this),shareFacebook:this.shareFacebook.bind(this),shareTwitter:this.shareTwitter.bind(this),onSecondStep:!1,backToFirstStep:this.backToFirstStep.bind(this),currentIssue:null},b.$on("openShareModal",this.openModal.bind(this)),this._dataService.getMain().then(function(b){this._$scope.modalShare.content=b.getModals().share;var c=[];a.forEach(b._topics,function(b){a.forEach(b._issues,function(a){c.push(a)})}),this._$scope.modalShare.issues=c}.bind(this))};d.$inject=["$scope","$timeout","dataService","windowService","utilsService","routesService"],d.prototype.openModal=function(c,d){if(a.extend(this._$scope.modalShare,{open:!0,service:d}),this._windowService.setModalOpen(!0),b.each(this._$scope.modalShare.issues,function(a,b){b.getId()===this._routesService.params.issue&&(this._$scope.modalShare.currentIssue=b)}.bind(this)),this._$scope.modalShare.currentIssue){var e=this._$scope.modalShare.currentIssue.getId();this._$scope.modalShare.onSecondStep=!0,this.scrollToIssue(e)}},d.prototype.closeModal=function(){this._$scope.modalShare.open=!1,this._$scope.modalShare.onSecondStep=!1,this._$scope.modalShare.currentIssue=null,this._windowService.setModalOpen(!1)},d.prototype.onShare=function(a,b){switch(this._$scope.modalShare.service){case"twitter":a.preventDefault(),this.shareTwitter(b);break;case"fb":a.preventDefault(b),this.shareFacebook();break;case null:a.preventDefault(),this.secondStep(b)}},d.prototype.shareFacebook=function(a){window.open("https://www.facebook.com/sharer/sharer.php?u="+a.getShareUrl(),"_blank")},d.prototype.shareTwitter=function(a){window.open("http://twitter.com/share?text="+a.getTitle()+"&url="+a.getShareUrl()+"&hashtags="+this._$scope.modalShare.content.hashtag,"_blank")},d.prototype.secondStep=function(a){this._$scope.modalShare.onSecondStep=!0;var c=a.getId();this._$scope.modalShare.currentIssue=a,b(".sharing-list__item").addClass("sharing-quote__normal").removeClass("sharing-quote__active");var d=b('[data-id="'+c+'"]');d.addClass("sharing-quote__active").removeClass("sharing-quote__normal")},d.prototype.backToFirstStep=function(){this._$scope.modalShare.onSecondStep=!1,b(".sharing-list__item").addClass("sharing-quote__normal").removeClass("sharing-quote__active")};var e=function(a,c,d,e){e.scrollToIssue=function(a){e._$timeout(function(){var c=b('[data-id="'+a+'"]'),d=c.position().top,f=e._windowService.getDeviceWindowHeight(),g=-f/2;b(".modal").scrollTop(d+g),b(".sharing-list__item").addClass("sharing-quote__normal").removeClass("sharing-quote__active"),c.addClass("sharing-quote__active").removeClass("sharing-quote__normal")})}};return c}),c("lorax/directives/modal-about",[],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/modal-about.tpl.html"}},b=function(a,b,c){this._$scope=a,this._dataService=b,this._windowService=c,a.modalAbout={open:!1,closeModal:this.closeModal.bind(this)},a.$on("openAboutModal",this.openModal.bind(this)),this._dataService.getMain().then(function(a){this._$scope.modalAbout.content=a.getModals().about}.bind(this))};return b.$inject=["$scope","dataService","windowService"],b.prototype.openModal=function(){this._$scope.modalAbout.open=!0,this._windowService.setSidePanelOpen(!0,"about"),this._windowService.publish("onOpenModal",[!0])},b.prototype.closeModal=function(){this._$scope.modalAbout.open=!1,this._windowService.setSidePanelOpen(!1,"about"),this._windowService.publish("onOpenModal",[!1])},a}),c("lorax/directives/modal-legend",[],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/modal-legend.tpl.html"}},b=function(a,b,c,d){this._$scope=a,this._$animate=b,this._dataService=c,this._windowService=d,a.modalLegend={open:!1,closeModal:this.closeModal.bind(this)},a.$on("openLegendModal",this.openModal.bind(this)),this._dataService.getMain().then(function(a){this._$scope.modalLegend.content=a.getModals().legend}.bind(this))};return b.$inject=["$scope","$animate","dataService","windowService"],b.prototype.openModal=function(){this._$scope.modalLegend.open=!0,this._windowService.setSidePanelOpen(!0,"legend"),this._windowService.publish("onOpenModal",[!0])},b.prototype.closeModal=function(){this._$scope.modalLegend.open=!1,this._windowService.setSidePanelOpen(!1,"legend"),this._windowService.publish("onOpenModal",[!1])},a}),c("lorax/directives/modal-mobile-options",["angular"],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/modal-mobile-options.tpl.html"}},b=function(a,b,c,d){this._$scope=a,this._$rootScope=b,this._windowService=c,this._dataService=d,a.modalOptions={open:!1,closeModal:this.closeModal.bind(this),openEmail:this.openEmail.bind(this),openLegend:this.openLegend.bind(this),openShare:this.openShare.bind(this),openAbout:this.openAbout.bind(this)},this._dataService.getMain().then(function(b){a.modalOptions.miscData=b.getMiscLocale()}),a.$on("openMobileOptions",this.openModal.bind(this))};return b.$inject=["$scope","$rootScope","windowService","dataService"],b.prototype.openModal=function(a,b){this._$scope.modalOptions.open=b,this._windowService.setModalOpen(b)},b.prototype.closeModal=function(){this._$scope.modalOptions.open=!1,this._windowService.setModalOpen(!1)},b.prototype.openEmail=function(){this._$rootScope.$broadcast("openEmailModal"),this._$scope.modalOptions.open=!1},b.prototype.openLegend=function(){this._$rootScope.$broadcast("openLegendModal"),this._$scope.modalOptions.open=!1},b.prototype.openShare=function(){this._$rootScope.$broadcast("openShareModal",null),this._$scope.modalOptions.open=!1},b.prototype.openAbout=function(){this._$rootScope.$broadcast("openAboutModal"),this._$scope.modalOptions.open=!1},a}),c("lorax/directives/issue-details",[],function(){var a=function(){return{restrict:"A",replace:!0,transclude:!0,scope:{issueStatus:"@",issueName:"@"},controller:b,templateUrl:"/app/lorax/directives/issue-details.tpl.html"}},b=function(a,b){this._$scope=a,this._$scope.issueDetails={status:a.issueStatus},b.getMain().then(function(b){this._$scope.issueDetails.issue=b.getIssueById(a.issueName)}.bind(this))};return b.$inject=["$scope","dataService"],b.prototype.testMethod=function(){},a}),c("lorax/directives/issue-all",["jquery","webfontloader"],function(a,b){var c=function(){return{restrict:"A",scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/issue-all.tpl.html"}},d=function(a,b,c,d,e,f,g){this._$scope=a,this._$timeout=b,this._dataService=c,this._windowService=d,this._scrollService=e,this._pubSubService=f,this._experienceService=g,this._$scope.detail={currentIssue:"",scrollTo:this.scrollToIssue.bind(this),nextIssue:this.nextIssue.bind(this)},this._downArrowOpacity=1,this._issueOffset={small:60,medium:100,large:125,xlarge:138},this._onScrollBind=this.onScroll.bind(this),this._dataService.getMain().then(this.onModelLoaded.bind(this)),this._pubSubService.subscribe("detail.scrollToIssue",this.scrollToIssue.bind(this)),this._pubSubService.subscribe("detail.open",this.open.bind(this)),this._pubSubService.subscribe("detail.close",this.close.bind(this))};d.$inject=["$scope","$timeout","dataService","windowService","scrollService","pubSubService","experienceService"],d.prototype.init=function(){b.load({active:this.onFontsLoaded.bind(this),custom:{families:["Fira Sans:n2,n3,n4,n5,n6,n7,n8,n9"]}})},d.prototype.open=function(){a(window).on("scroll",this._onScrollBind)},d.prototype.close=function(){a(window).off("scroll",this._onScrollBind)},d.prototype.onFontsLoaded=function(){this.fontsLoaded=!0,this._$scope.detail.model&&this.setOffsets()},d.prototype.onModelLoaded=function(a){this._$scope.detail.model=a,this.fontsLoaded&&this.setOffsets()},d.prototype.setOffsets=function(){var b,c,d,e=this._$scope.detail.model.getIssues(),f=a("#detail").hasClass("ng-hide");a("#detail").removeClass("ng-hide");var g=a("rect",".banner-nav-bg"),h=g.attr("fill");g.attr("fill",""),g.attr("fill",h);var i=e[e.length-1];if(!i.offset||i.offset.top!==a("#"+i.getId()).offset().top){for(var j=0;j<e.length;j++)b=e[j],c=a("#"+b.getId()),d=a(".detail-header-section",c),b.offset=c.offset(),b.titleOffset=d.offset();this._experienceService.setMenuPositions(),f&&a("#detail").addClass("ng-hide"),this.initialized=!0,(this.issue||this.topic)&&this._doScrollToIssue()}},d.prototype.scrollToIssue=function(b,c){if(this.issue=b,this.topic=c,0!==a(".detail").length){var d=a(window).scrollTop(),e=a(".detail")[0];a(".detail").each(function(a,b){return b.offsetTop-100>=d?!1:void(e=b)});var f=e.attributes["data-issue-status"].value;f!==this._currentStatus&&(this._windowService.setBgMode(f),this._currentStatus=f),this.initialized&&this._doScrollToIssue()}},d.prototype._doScrollToIssue=function(){this.setOffsets(),this._currentStatus=null,this.topic&&!this.issue&&(this.issue=this._$scope.detail.model.getTopicById(this.topic).getIssues()[0].getId());var a=0;this.issue&&(a=this._$scope.detail.model.getIssueById(this.issue).offset.top-this._issueOffset[this._windowService.breakpoint()]),a=Math.max(1,a),this._scrolled||this._scrollService.go("top",{offset:a,animate:!1}),this._scrolled=!1,this._$scope.detail.currentIssue=this.issue
},d.prototype.nextIssue=function(){this._$scope.detail.currentIssue=a("#"+this._$scope.detail.currentIssue).next().attr("id"),this._$scope.detail.currentIssue&&this._$scope.detail.scrollTo(this._$scope.detail.currentIssue)},d.prototype.onScroll=function(){var b=a(window).scrollTop();this._experienceService.onScroll(b);var c=a(".detail")[0];a(".detail").each(function(a,d){return d.offsetTop-100>=b?!1:void(c=d)});var d=this._$scope.detail.model.getIssueById(c.id),e=c.attributes["data-issue-status"].value;c.id!==this.issue&&null!==this._currentStatus&&(this._scrolled=!0,this.issue=c.id,this._windowService.setIssue(d)),e!==this._currentStatus&&(this._windowService.setBgMode(e),this._currentStatus=e);var f=d.getParentId();f!==this._currentTopic&&(this._windowService.setTopic(f),this._currentTopic=f),this._downArrowOpacity-=.005,a(".down-arrow-nav").css("opacity",this._downArrowOpacity)};var e=function(b,c,d,e){var f=setInterval(function(){e._$timeout(function(){var b=a(".main--detail").children();b.length&&a(b[0]).attr("data-issue-name")&&(clearInterval(f),e.init())})},100)};return c}),!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:0/0}function b(a){return null===a?0/0:+a}function d(a){return!isNaN(a)}function e(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function f(a){return a.length}function g(a){for(var b=1;a*b%1;)b*=10;return b}function h(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function i(){this._=Object.create(null)}function j(a){return(a+="")===rh||a[0]===sh?sh+a:a}function k(a){return(a+="")[0]===sh?a.slice(1):a}function l(a){return j(a)in this._}function m(a){return(a=j(a))in this._&&delete this._[a]}function n(){var a=[];for(var b in this._)a.push(k(b));return a}function o(){var a=0;for(var b in this._)++a;return a}function p(){for(var a in this._)return!1;return!0}function q(){this._=Object.create(null)}function r(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function s(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=th.length;d>c;++c){var e=th[c]+b;if(e in a)return e}}function t(){}function u(){}function v(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new i;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function w(){ch.event.preventDefault()}function x(){for(var a,b=ch.event;a=b.sourceEvent;)b=a;return b}function y(a){for(var b=new u,c=0,d=arguments.length;++c<d;)b[arguments[c]]=v(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=ch.event;e.target=a,ch.event=e,b[e.type].apply(c,d)}finally{ch.event=f}}},b}function z(a){return vh(a,Ah),a}function A(a){return"function"==typeof a?a:function(){return wh(a,this)}}function B(a){return"function"==typeof a?a:function(){return xh(a,this)}}function C(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=ch.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function D(a){return a.trim().replace(/\s+/g," ")}function E(a){return new RegExp("(?:^|\\s+)"+ch.requote(a)+"(?:\\s+|$)","g")}function F(a){return(a+"").trim().split(/^|\s+/)}function G(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=F(a).map(H);var e=a.length;return"function"==typeof b?d:c}function H(a){var b=E(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",D(e+" "+a))):c.setAttribute("class",D(e.replace(b," ")))}}function I(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function J(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function K(a){return"function"==typeof a?a:(a=ch.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function L(){var a=this.parentNode;a&&a.removeChild(this)}function M(a){return{__data__:a}}function N(a){return function(){return zh(this,a)}}function O(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function P(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function Q(a){return vh(a,Ch),a}function R(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function S(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,eh(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+ch.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=T;h>0&&(a=a.slice(0,h));var j=Eh.get(a);return j&&(a=j,i=U),h?b?e:d:b?t:f}function T(a,b){return function(c){var d=ch.event;ch.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{ch.event=d}}}function U(a,b){var c=T(a,b);return function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!(8&d.compareDocumentPosition(b)))&&c.call(b,a)}}function V(){var a=".dragsuppress-"+ ++Gh,b="click"+a,c=ch.select(hh).on("touchmove"+a,w).on("dragstart"+a,w).on("selectstart"+a,w);if(Fh){var d=gh.style,e=d[Fh];d[Fh]="none"}return function(f){if(c.on(a,null),Fh&&(d[Fh]=e),f){var g=function(){c.on(b,null)};c.on(b,function(){w(),g()},!0),setTimeout(g,0)}}}function W(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Hh&&(hh.scrollX||hh.scrollY)){c=ch.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();Hh=!e.f&&!e.e,c.remove()}return Hh?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function X(){return ch.event.changedTouches[0].identifier}function Y(){return ch.event.target}function Z(){return hh}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ab(a){return a>1?0:-1>a?Kh:Math.acos(a)}function bb(a){return a>1?Nh:-1>a?-Nh:Math.asin(a)}function cb(a){return((a=Math.exp(a))-1/a)/2}function db(a){return((a=Math.exp(a))+1/a)/2}function eb(a){return((a=Math.exp(2*a))-1)/(a+1)}function fb(a){return(a=Math.sin(a/2))*a}function gb(){}function hb(a,b,c){return this instanceof hb?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof hb?new hb(a.h,a.s,a.l):vb(""+a,wb,hb):new hb(a,b,c)}function ib(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new rb(e(a+120),e(a),e(a-120))}function jb(a,b,c){return this instanceof jb?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof jb?new jb(a.h,a.c,a.l):a instanceof lb?nb(a.l,a.a,a.b):nb((a=xb((a=ch.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new jb(a,b,c)}function kb(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new lb(c,Math.cos(a*=Oh)*b,Math.sin(a)*b)}function lb(a,b,c){return this instanceof lb?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof lb?new lb(a.l,a.a,a.b):a instanceof jb?kb(a.h,a.c,a.l):xb((a=rb(a)).r,a.g,a.b):new lb(a,b,c)}function mb(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ob(e)*Zh,d=ob(d)*$h,f=ob(f)*_h,new rb(qb(3.2404542*e-1.5371385*d-.4985314*f),qb(-.969266*e+1.8760108*d+.041556*f),qb(.0556434*e-.2040259*d+1.0572252*f))}function nb(a,b,c){return a>0?new jb(Math.atan2(c,b)*Ph,Math.sqrt(b*b+c*c),a):new jb(0/0,0/0,a)}function ob(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pb(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function rb(a,b,c){return this instanceof rb?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof rb?new rb(a.r,a.g,a.b):vb(""+a,rb,ib):new rb(a,b,c)}function sb(a){return new rb(a>>16,a>>8&255,255&a)}function tb(a){return sb(a)+""}function ub(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function vb(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(zb(e[0]),zb(e[1]),zb(e[2]))}return(f=ci.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&!isNaN(f=parseInt(a.slice(1),16))&&(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wb(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=i>0&&1>i?0:d),new hb(d,e,i)}function xb(a,b,c){a=yb(a),b=yb(b),c=yb(c);var d=pb((.4124564*a+.3575761*b+.1804375*c)/Zh),e=pb((.2126729*a+.7151522*b+.072175*c)/$h),f=pb((.0193339*a+.119192*b+.9503041*c)/_h);return lb(116*e-16,500*(d-e),200*(e-f))}function yb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function zb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ab(a){return"function"==typeof a?a:function(){return a}}function Bb(a){return a}function Cb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Db(b,c,a,d)}}function Db(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fb(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=ch.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return hh.XDomainRequest&&!("withCredentials"in i)&&/^(http(s)?:)?\/\//.test(a)&&(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=ch.event;ch.event=a;try{g.progress.call(f,i)}finally{ch.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(eh(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null!=b&&!("accept"in h)&&(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},ch.rebind(f,g,"on"),null==d?f:f.get(Eb(d))}function Eb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fb(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Gb(){var a=Hb(),b=Ib()-a;b>24?(isFinite(b)&&(clearTimeout(gi),gi=setTimeout(Gb,b)),fi=0):(fi=1,ii(Gb))}function Hb(){var a=Date.now();for(hi=di;hi;)a>=hi.t&&(hi.f=hi.c(a-hi.t)),hi=hi.n;return a}function Ib(){for(var a,b=di,c=1/0;b;)b.f?b=a?a.n=b.n:di=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return ei=a,c}function Jb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Kb(a,b){var c=Math.pow(10,3*qh(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Lb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:Bb;return function(a){var c=ki.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"==n&&!m&&(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=li.get(n)||Mb;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=ch.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Mb(a){return a+""}function Nb(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ob(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new ni(c-1)),1),c}function f(a,c){return b(a=new ni(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{ni=Nb;var d=new Nb;return d._=a,g(d,b,c)}finally{ni=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pb(a);return i.floor=i,i.round=Pb(d),i.ceil=Pb(e),i.offset=Pb(f),i.range=h,a}function Pb(a){return function(b,c){try{ni=Nb;var d=new Nb;return d._=b,a(d,c)._}finally{ni=Date}}}function Qb(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=pi[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&ni!==Nb,g=new(f?Nb:ni);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in pi?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{ni=Nb;var b=new ni;return b._=a,d(b)}finally{ni=Date}}var d=b(a);return c.parse=function(a){try{ni=Nb;var b=d.parse(a);return b&&b._}finally{ni=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ic;var t=ch.map(),u=Sb(p),v=Tb(p),w=Sb(q),x=Tb(q),y=Sb(r),z=Tb(r),A=Sb(s),B=Tb(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Rb(a.getDate(),b,2)},e:function(a,b){return Rb(a.getDate(),b,2)},H:function(a,b){return Rb(a.getHours(),b,2)},I:function(a,b){return Rb(a.getHours()%12||12,b,2)},j:function(a,b){return Rb(1+mi.dayOfYear(a),b,3)},L:function(a,b){return Rb(a.getMilliseconds(),b,3)},m:function(a,b){return Rb(a.getMonth()+1,b,2)},M:function(a,b){return Rb(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Rb(a.getSeconds(),b,2)},U:function(a,b){return Rb(mi.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Rb(mi.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Rb(a.getFullYear()%100,b,2)},Y:function(a,b){return Rb(a.getFullYear()%1e4,b,4)},Z:gc,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ac,e:ac,H:cc,I:cc,j:bc,L:fc,m:_b,M:dc,p:k,S:ec,U:Vb,w:Ub,W:Wb,x:i,X:j,y:Yb,Y:Xb,Z:Zb,"%":hc};return b}function Rb(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Sb(a){return new RegExp("^(?:"+a.map(ch.requote).join("|")+")","i")}function Tb(a){for(var b=new i,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ub(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Vb(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wb(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xb(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Yb(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.y=$b(+d[0]),c+d[0].length):-1}function Zb(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $b(a){return a+(a>68?1900:2e3)}function _b(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ac(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bc(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cc(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function dc(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function ec(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fc(a,b,c){qi.lastIndex=0;var d=qi.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gc(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=qh(b)/60|0,e=qh(b)%60;return c+Rb(d,"0",2)+Rb(e,"0",2)}function hc(a,b,c){ri.lastIndex=0;var d=ri.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ic(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jc(){}function kc(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lc(a,b){a&&vi.hasOwnProperty(a.type)&&vi[a.type](a,b)}function mc(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nc(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mc(a[c],b,1);b.polygonEnd()}function oc(){function a(a,b){a*=Oh,b=b*Oh/2+Kh/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);xi.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;yi.point=function(g,h){yi.point=a,d=(b=g)*Oh,e=Math.cos(h=(c=h)*Oh/2+Kh/4),f=Math.sin(h)},yi.lineEnd=function(){a(b,c)}}function pc(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sc(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function uc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vc(a){return[Math.atan2(a[1],a[0]),bb(a[2])]}function wc(a,b){return qh(a[0]-b[0])<Ih&&qh(a[1]-b[1])<Ih}function xc(a,b){a*=Oh;var c=Math.cos(b*=Oh);yc(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yc(a,b,c){++zi,Bi+=(a-Bi)/zi,Ci+=(b-Ci)/zi,Di+=(c-Di)/zi}function zc(){function a(a,e){a*=Oh;var f=Math.cos(e*=Oh),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Ai+=j,Ei+=j*(b+(b=g)),Fi+=j*(c+(c=h)),Gi+=j*(d+(d=i)),yc(b,c,d)}var b,c,d;Ki.point=function(e,f){e*=Oh;var g=Math.cos(f*=Oh);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Ki.point=a,yc(b,c,d)}}function Ac(){Ki.point=xc}function Bc(){function a(a,b){a*=Oh;var c=Math.cos(b*=Oh),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ab(n)/m,p=Math.atan2(m,n);Hi+=o*j,Ii+=o*k,Ji+=o*l,Ai+=p,Ei+=p*(d+(d=g)),Fi+=p*(e+(e=h)),Gi+=p*(f+(f=i)),yc(d,e,f)}var b,c,d,e,f;Ki.point=function(g,h){b=g,c=h,Ki.point=a,g*=Oh;var i=Math.cos(h*=Oh);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yc(d,e,f)},Ki.lineEnd=function(){a(b,c),Ki.lineEnd=Ac,Ki.point=xc}}function Cc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Dc(){return!0}function Ec(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wc(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Gc(c,a,null,!0),j=new Gc(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Gc(d,a,null,!1),j=new Gc(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Fc(f),Fc(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Fc(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Gc(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Hc(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Ic))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=ch.merge(n);var a=Oc(r,o);n.length?(v||(f.polygonStart(),v=!0),Ec(n,Kc,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Jc(),u=b(t),v=!1;return s}}function Ic(a){return a.length>1}function Jc(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:t,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Kc(a,b){return((a=a.x)[0]<0?a[1]-Nh-Ih:Nh-a[1])-((b=b.x)[0]<0?b[1]-Nh-Ih:Nh-b[1])}function Lc(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Kh:-Kh,i=qh(f-c);qh(i-Kh)<Ih?(a.point(c,d=(d+g)/2>0?Nh:-Nh),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Kh&&(qh(c-e)<Ih&&(c-=e*Ih),qh(f-h)<Ih&&(f-=h*Ih),d=Mc(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function Mc(a,b,c,d){var e,f,g=Math.sin(a-c);return qh(g)>Ih?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Nc(a,b,c,d){var e;if(null==a)e=c*Nh,d.point(-Kh,e),d.point(0,e),d.point(Kh,e),d.point(Kh,0),d.point(Kh,-e),d.point(0,-e),d.point(-Kh,-e),d.point(-Kh,0),d.point(-Kh,e);else if(qh(a[0]-b[0])>Ih){var f=a[0]<b[0]?Kh:-Kh;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Oc(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;xi.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Kh/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Kh/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Kh,z=o*t;if(xi.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Lh:v,y^m>=c^r>=c){var A=rc(pc(l),pc(a));uc(A);var B=rc(e,A);uc(B);var C=(y^v>=0?-1:1)*bb(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Ih>f||Ih>f&&0>xi)^1&g}function Pc(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Kh:-Kh),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wc(c,n)||wc(o,n))&&(o[0]+=Ih,o[1]+=Ih,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;!(q&f)&&(r=d(o,c,!0))&&(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}p&&(!c||!wc(c,o))&&a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pc(a),e=pc(b),g=[1,0,0],h=rc(d,e),i=qc(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rc(g,h),o=tc(g,l),p=tc(h,m);sc(o,p);var q=n,r=qc(o,q),s=qc(q,q),t=r*r-s*(qc(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=tc(q,(-r-u)/s);if(sc(v,o),v=vc(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=qh(B-Kh)<Ih,D=C||Ih>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(qh(v[0]-x)<Ih?z:A):z<=v[1]&&v[1]<=A:B>Kh^(x<=v[0]&&v[0]<=y)){var E=tc(q,(-r+u)/s);return sc(E,o),[v,vc(E)]}}}function e(b,c){var d=g?a:Kh-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=qh(f)>Ih,i=od(a,6*Oh);return Hc(b,c,i,g?[0,-a]:[-Kh,a-Kh])}function Qc(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Rc(a,b,c,d){function e(d,e){return qh(d[0]-a)<Ih?e>0?0:3:qh(d[0]-c)<Ih?e>0?2:1:qh(d[1]-b)<Ih?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=0/0}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Mi,Math.min(Mi,a)),b=Math.max(-Mi,Math.min(Mi,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Jc(),C=Qc(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=ch.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Ec(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Sc(a){var b=0,c=Kh/3,d=gd(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Kh/180,c=a[1]*Kh/180):[b/Kh*180,c/Kh*180]},e}function Tc(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,bb((f-(a*a+c*c)*e*e)/(2*e))]},c}function Uc(){function a(a,b){Oi+=e*a-d*b,d=a,e=b}var b,c,d,e;Ti.point=function(f,g){Ti.point=a,b=d=f,c=e=g},Ti.lineEnd=function(){a(b,c)}}function Vc(a,b){Pi>a&&(Pi=a),a>Ri&&(Ri=a),Qi>b&&(Qi=b),b>Si&&(Si=b)}function Wc(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yc(a,b){Bi+=a,Ci+=b,++Di}function Zc(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Ei+=g*(b+a)/2,Fi+=g*(c+d)/2,Gi+=g,Yc(b=a,c=d)}var b,c;Vi.point=function(d,e){Vi.point=a,Yc(b=d,c=e)}}function $c(){Vi.point=Yc}function _c(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Ei+=g*(d+a)/2,Fi+=g*(e+b)/2,Gi+=g,g=e*a-d*b,Hi+=g*(d+a),Ii+=g*(e+b),Ji+=3*g,Yc(d=a,e=b)}var b,c,d,e;Vi.point=function(f,g){Vi.point=a,Yc(b=d=f,c=e=g)},Vi.lineEnd=function(){a(b,c)}}function ad(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Lh)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)
}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:t};return h}function bd(a){function b(a){return(h?d:c)(a)}function c(b){return ed(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=0/0,y.point=f,b.lineStart()}function f(c,d){var f=pc([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=qh(qh(x)-1)<Ih||qh(d-m)<Ih?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||qh((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Oh),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cd(a){var b=bd(function(b,c){return a([b*Ph,c*Ph])});return function(a){return hd(b(a))}}function dd(a){this.stream=a}function ed(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fd(a){return gd(function(){return a})()}function gd(a){function b(a){return a=h(a[0]*Oh,a[1]*Oh),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Ph,a[1]*Ph]}function d(){h=Cc(g=kd(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bd(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Li,v=Bb,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=hd(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Li):Pc((w=+a)*Oh),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Rc(a[0][0],a[0][1],a[1][0],a[1][1]):Bb,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Oh,q=a[1]%360*Oh,d()):[p*Ph,q*Ph]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Oh,s=a[1]%360*Oh,t=a.length>2?a[2]%360*Oh:0,d()):[r*Ph,s*Ph,t*Ph]},ch.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hd(a){return ed(a,function(b,c){a.point(b*Oh,c*Oh)})}function id(a,b){return[a,b]}function jd(a,b){return[a>Kh?a-Lh:-Kh>a?a+Lh:a,b]}function kd(a,b,c){return a?b||c?Cc(md(a),nd(b,c)):md(a):b||c?nd(b,c):jd}function ld(a){return function(b,c){return b+=a,[b>Kh?b-Lh:-Kh>b?b+Lh:b,c]}}function md(a){var b=ld(a);return b.invert=ld(-a),b}function nd(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),bb(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),bb(k*d-h*e)]},c}function od(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pd(c,e),f=pd(c,f),(g>0?f>e:e>f)&&(e+=g*Lh)):(e=a+g*Lh,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=vc([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pd(a,b){var c=pc(b);c[0]-=a,uc(c);var d=ab(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Ih)%(2*Math.PI)}function qd(a,b,c){var d=ch.range(a,b-Ih,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rd(a,b,c){var d=ch.range(a,b-Ih,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sd(a){return a.source}function td(a){return a.target}function ud(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fb(d-b)+e*g*fb(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Ph,Math.atan2(g,Math.sqrt(d*d+e*e))*Ph]}:function(){return[a*Ph,b*Ph]};return o.distance=m,o}function vd(){function a(a,e){var f=Math.sin(e*=Oh),g=Math.cos(e),h=qh((a*=Oh)-b),i=Math.cos(h);Wi+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Xi.point=function(e,f){b=e*Oh,c=Math.sin(f*=Oh),d=Math.cos(f),Xi.point=a},Xi.lineEnd=function(){Xi.point=Xi.lineEnd=t}}function wd(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xd(a,b){function c(a,b){g>0?-Nh+Ih>b&&(b=-Nh+Ih):b>Nh-Ih&&(b=Nh-Ih);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Kh/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Nh]},c):zd}function yd(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return qh(e)<Ih?id:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zd(a,b){return[a,Math.log(Math.tan(Kh/4+b/2))]}function Ad(a){var b,c=fd(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Kh*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bd(a,b){return[Math.log(Math.tan(Kh/4+b/2)),-a]}function Cd(a){return a[0]}function Dd(a){return a[1]}function Ed(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fd(a,b){return a[0]-b[0]||a[1]-b[1]}function Gd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Id(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jd(){ce(this),this.edge=this.site=this.circle=null}function Kd(a){var b=hj.pop()||new Jd;return b.site=a,b}function Ld(a){Vd(a),ej.remove(a),hj.push(a),ce(a)}function Md(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Ld(a);for(var i=f;i.circle&&qh(c-i.circle.x)<Ih&&qh(d-i.circle.cy)<Ih;)f=i.P,h.unshift(i),Ld(i),i=f;h.unshift(i),Vd(i);for(var j=g;j.circle&&qh(c-j.circle.x)<Ih&&qh(d-j.circle.cy)<Ih;)g=j.N,h.push(j),Ld(j),j=g;h.push(j),Vd(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],_d(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zd(i.site,j.site,null,e),Ud(i),Ud(j)}function Nd(a){for(var b,c,d,e,f=a.x,g=a.y,h=ej._;h;)if(d=Od(h,g)-f,d>Ih)h=h.L;else{if(e=f-Pd(h,g),!(e>Ih)){d>-Ih?(b=h.P,c=h):e>-Ih?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kd(a);if(ej.insert(b,i),b||c){if(b===c)return Vd(b),c=Kd(b.site),ej.insert(i,c),i.edge=c.edge=Zd(b.site,i.site),Ud(b),Ud(c),void 0;if(!c)return void(i.edge=Zd(b.site,i.site));Vd(b),Vd(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_d(c.edge,j,o,u),i.edge=Zd(j,a,null,u),c.edge=Zd(a,o,null,u),Ud(b),Ud(c)}}function Od(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pd(a,b){var c=a.N;if(c)return Od(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qd(a){this.site=a,this.edges=[]}function Rd(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=dj,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(qh(d-b)>Ih||qh(e-c)>Ih)&&(h.splice(g,0,new ae($d(f.site,k,qh(d-l)<Ih&&o-e>Ih?{x:l,y:qh(b-l)<Ih?c:o}:qh(e-o)<Ih&&m-d>Ih?{x:qh(c-o)<Ih?b:m,y:o}:qh(d-m)<Ih&&e-n>Ih?{x:m,y:qh(b-m)<Ih?c:n}:qh(e-n)<Ih&&d-l>Ih?{x:qh(c-n)<Ih?b:l,y:n}:null),f.site,null)),++i)}function Sd(a,b){return b.angle-a.angle}function Td(){ce(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ud(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Jh)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ij.pop()||new Td;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=gj._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}gj.insert(s,r),s||(fj=r)}}}}function Vd(a){var b=a.circle;b&&(b.P||(fj=b.N),gj.remove(b),ij.push(b),ce(b),a.circle=null)}function Wd(a){for(var b,c=cj,d=Qc(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xd(b,a)||!d(b)||qh(b.a.x-b.b.x)<Ih&&qh(b.a.y-b.b.y)<Ih)&&(b.a=b.b=null,c.splice(e,1))}function Xd(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yd(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zd(a,b,c,d){var e=new Yd(a,b);return cj.push(e),c&&_d(e,a,b,c),d&&_d(e,b,a,d),dj[a.i].edges.push(new ae(e,a,b)),dj[b.i].edges.push(new ae(e,b,a)),e}function $d(a,b,c){var d=new Yd(a,null);return d.a=b,d.b=c,cj.push(d),d}function _d(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ae(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function be(){this._=null}function ce(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function de(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ee(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fe(a){for(;a.L;)a=a.L;return a}function ge(a,b){var c,d,e,f=a.sort(he).pop();for(cj=[],dj=new Array(a.length),ej=new be,gj=new be;;)if(e=fj,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(dj[f.i]=new Qd(f),Nd(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Md(e.arc)}b&&(Wd(b),Rd(b));var g={cells:dj,edges:cj};return ej=gj=cj=dj=null,g}function he(a,b){return b.y-a.y||b.x-a.x}function ie(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function je(a){return a.x}function ke(a){return a.y}function le(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function me(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&me(a,i[0],c,d,g,h),i[1]&&me(a,i[1],g,d,e,h),i[2]&&me(a,i[2],c,h,g,f),i[3]&&me(a,i[3],g,h,e,f)}}function ne(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-o[0],q=c-o[1],r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function oe(a,b){a=ch.rgb(a),b=ch.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ub(Math.round(c+f*a))+ub(Math.round(d+g*a))+ub(Math.round(e+h*a))}}function pe(a,b){var c,d={},e={};for(c in a)c in b?d[c]=se(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function qe(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function re(a,b){var c,d,e,f=kj.lastIndex=lj.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=kj.exec(a))&&(d=lj.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:qe(c,d)})),f=lj.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function se(a,b){for(var c,d=ch.interpolators.length;--d>=0&&!(c=ch.interpolators[d](a,b)););return c}function te(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(se(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function ue(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function ve(a){return function(b){return 1-a(1-b)}}function we(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function xe(a){return a*a}function ye(a){return a*a*a}function ze(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Ae(a){return function(b){return Math.pow(b,a)}}function Be(a){return 1-Math.cos(a*Nh)}function Ce(a){return Math.pow(2,10*(a-1))}function De(a){return 1-Math.sqrt(1-a*a)}function Ee(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Lh*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Lh/b)}}function Fe(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Ge(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function He(a,b){a=ch.hcl(a),b=ch.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return kb(c+f*a,d+g*a,e+h*a)+""}}function Ie(a,b){a=ch.hsl(a),b=ch.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ib(c+f*a,d+g*a,e+h*a)+""}}function Je(a,b){a=ch.lab(a),b=ch.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return mb(c+f*a,d+g*a,e+h*a)+""}}function Ke(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Le(a){var b=[a.a,a.b],c=[a.c,a.d],d=Ne(b),e=Me(b,c),f=Ne(Oe(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Ph,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Ph:0}function Me(a,b){return a[0]*b[0]+a[1]*b[1]}function Ne(a){var b=Math.sqrt(Me(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Oe(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Pe(a,b){var c,d=[],e=[],f=ch.transform(a),g=ch.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:qe(h[0],i[0])},{i:3,x:qe(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:qe(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:qe(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:qe(n[0],o[0])},{i:c-2,x:qe(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Qe(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Re(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Se(a){for(var b=a.source,c=a.target,d=Ue(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Te(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Ue(a,b){if(a===b)return a;for(var c=Te(a),d=Te(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Ve(a){a.fixed|=2}function We(a){a.fixed&=-7}function Xe(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Ye(a){a.fixed&=-5}function Ze(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Ze(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function $e(a,b){return ch.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ef,a}function _e(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function af(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function bf(a){return a.children}function cf(a){return a.value}function df(a,b){return b.value-a.value}function ef(a){return ch.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ff(a){return a.x}function gf(a){return a.y}function hf(a,b,c){a.y0=b,a.y=c}function jf(a){return ch.range(a.length)}function kf(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function lf(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function mf(a){return a.reduce(nf,0)}function nf(a,b){return a+b[1]}function of(a,b){return pf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function pf(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function qf(a){return[ch.min(a),ch.max(a)]}function rf(a,b){return a.value-b.value}function sf(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function tf(a,b){a._pack_next=b,b._pack_prev=a}function uf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function vf(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(wf),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],zf(d,e,f),b(f),sf(d,f),d._pack_prev=f,sf(f,e),e=d._pack_next,g=3;j>g;g++){zf(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(uf(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!uf(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?tf(d,e=h):tf(d=i,e),g--):(sf(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(xf)}}function wf(a){a._pack_next=a._pack_prev=a}function xf(a){delete a._pack_next,delete a._pack_prev}function yf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)yf(e[f],b,c,d)}function zf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Af(a,b){return a.parent==b.parent?1:2}function Bf(a){var b=a.children;return b.length?b[0]:a.t}function Cf(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Df(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ef(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ff(a,b,c){return a.a.parent===b.parent?a.a:c}function Gf(a){return 1+ch.max(a,function(a){return a.y})}function Hf(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function If(a){var b=a.children;return b&&b.length?If(b[0]):a}function Jf(a){var b,c=a.children;return c&&(b=c.length)?Jf(c[b-1]):a}function Kf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Lf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Mf(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Nf(a){return a.rangeExtent?a.rangeExtent():Mf(a.range())}function Of(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Pf(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Qf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:wj}function Rf(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=ch.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Sf(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Rf:Of,i=d?Re:Qe;return g=e(a,b,i,c),h=e(b,a,i,se),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ke)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Wf(a,b)},f.tickFormat=function(b,c){return Xf(a,b,c)},f.nice=function(b){return Uf(a,b),e()},f.copy=function(){return Sf(a,b,c,d)},e()}function Tf(a,b){return ch.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Uf(a,b){return Pf(a,Qf(Vf(a,b)[2]))}function Vf(a,b){null==b&&(b=10);var c=Mf(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Wf(a,b){return ch.range.apply(ch,Vf(a,b))}function Xf(a,b,c){var d=Vf(a,b);if(c){var e=ki.exec(c);if(e.shift(),"s"===e[8]){var f=ch.formatPrefix(Math.max(qh(d[0]),qh(d[1])));return e[7]||(e[7]="."+Yf(f.scale(d[2]))),e[8]="f",c=ch.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Zf(e[8],d)),c=e.join("")}else c=",."+Yf(d[2])+"f";return ch.format(c)}function Yf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Zf(a,b){var c=Yf(b[2]);return a in xj?Math.abs(c-Yf(Math.max(qh(b[0]),qh(b[1]))))+ +("e"!==a):c-2*("%"===a)}function $f(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Pf(d.map(e),c?Math:zj);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Mf(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return yj;arguments.length<2?b=yj:"function"!=typeof b&&(b=ch.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return $f(a.copy(),b,c,d)},Tf(g,a)}function _f(a,b,c){function d(b){return a(e(b))}var e=ag(b),f=ag(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Wf(c,a)},d.tickFormat=function(a,b){return Xf(c,a,b)},d.nice=function(a){return d.domain(Uf(c,a))},d.exponent=function(g){return arguments.length?(e=ag(b=g),f=ag(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return _f(a.copy(),b,c)},Tf(d,a)}function ag(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function bg(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):0/0))-1)%f.length]}function d(b,c){return ch.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new i;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Mf(b.a[0])},c.copy=function(){return bg(a,b)},c.domain(a)}function cg(c,e){function f(){var a=0,b=e.length;for(h=[];++a<b;)h[a-1]=ch.quantile(c,a/b);return g}function g(a){return isNaN(a=+a)?void 0:e[ch.bisect(h,a)]}var h;return g.domain=function(e){return arguments.length?(c=e.map(b).filter(d).sort(a),f()):c},g.range=function(a){return arguments.length?(e=a,f()):e},g.quantiles=function(){return h},g.invertExtent=function(a){return a=e.indexOf(a),0>a?[0/0,0/0]:[a>0?h[a-1]:c[0],a<h.length?h[a]:c[c.length-1]]},g.copy=function(){return cg(c,e)},f()}function dg(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return dg(a,b,c)},e()}function eg(a,b){function c(c){return c>=c?b[ch.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return eg(a,b)},c}function fg(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Wf(a,b)},b.tickFormat=function(b,c){return Xf(a,b,c)},b.copy=function(){return fg(a)},b}function gg(){return 0}function hg(a){return a.innerRadius}function ig(a){return a.outerRadius}function jg(a){return a.startAngle}function kg(a){return a.endAngle}function lg(a){return a&&a.padAngle}function mg(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function ng(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function og(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ab(c),o=Ab(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cd,d=Dd,e=Dc,f=pg,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Fj.get(a)||pg).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function pg(a){return a.join("L")}function qg(a){return pg(a)+"Z"}function rg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function sg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function tg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function ug(a,b){return a.length<4?pg(a):a[1]+xg(a.slice(1,-1),yg(a,b))}function vg(a,b){return a.length<3?pg(a):a[0]+xg((a.push(a[0]),a),yg([a[a.length-2]].concat(a,[a[1]]),b))}function wg(a,b){return a.length<3?pg(a):a[0]+xg(a,yg(a,b))}function xg(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return pg(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function yg(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function zg(a){if(a.length<3)return pg(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Dg(Ij,g),",",Dg(Ij,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Eg(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Ag(a){if(a.length<4)return pg(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Dg(Ij,f)+","+Dg(Ij,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Eg(c,f,g);return c.join("")}function Bg(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Dg(Ij,g),",",Dg(Ij,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Eg(b,g,h);return b.join("")}function Cg(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return zg(a)}function Dg(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Eg(a,b,c){a.push("C",Dg(Gj,b),",",Dg(Gj,c),",",Dg(Hj,b),",",Dg(Hj,c),",",Dg(Ij,b),",",Dg(Ij,c))}function Fg(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Gg(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Fg(e,f);++b<c;)d[b]=(g+(g=Fg(e=f,f=a[b+1])))/2;return d[b]=g,d}function Hg(a){for(var b,c,d,e,f=[],g=Gg(a),h=-1,i=a.length-1;++h<i;)b=Fg(a[h],a[h+1]),qh(b)<Ih?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);
return f}function Ig(a){return a.length<3?pg(a):a[0]+xg(a,Hg(a))}function Jg(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Nh,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Kg(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ab(c),v=Ab(e),w=c===d?function(){return n}:Ab(d),x=e===f?function(){return o}:Ab(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cd,d=Cd,e=0,f=Dd,g=Dc,h=pg,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Fj.get(a)||pg).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Lg(a){return a.radius}function Mg(a){return[a.x,a.y]}function Ng(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Nh;return[c*Math.cos(d),c*Math.sin(d)]}}function Og(){return 64}function Pg(){return"circle"}function Qg(a){var b=Math.sqrt(a/Kh);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Rg(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Sg(a,b,c){return vh(a,Pj),a.namespace=b,a.id=c,a}function Tg(a,b,c,d){var e=a.id,f=a.namespace;return P(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Ug(a){return null==a&&(a=""),function(){this.textContent=a}}function Vg(a){return null==a?"__transition__":"__transition_"+a+"__"}function Wg(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),g=f[d];if(!g){var h=e.time;g=f[d]={tween:new i,time:h,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++f.count,ch.timer(function(e){function i(c){if(f.active>d)return k();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(a,a.__data__,e.index)),f.active=d,g.event&&g.event.start.call(a,a.__data__,b),g.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&p.push(d)}),m=g.ease,l=g.duration,ch.timer(function(){return o.c=j(c||1)?Dc:j,1},0,h)}function j(c){if(f.active!==d)return 1;for(var e=c/l,h=m(e),i=p.length;i>0;)p[--i].call(a,h);return e>=1?(g.event&&g.event.end.call(a,a.__data__,b),k()):void 0}function k(){return--f.count?delete f[d]:delete a[c],1}var l,m,n=g.delay,o=hi,p=[];return o.t=n+h,e>=n?i(e-n):void(o.c=i)},0,h)}}function Xg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Yg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Zg(a){return a.toISOString()}function $g(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=ch.bisect(Yj,e);return f==Yj.length?[b.year,Vf(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Yj[f-1]<Yj[f]/e?f-1:f]:[_j,Vf(a,c)[2]]}return d.invert=function(b){return _g(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(_g)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,_g(+c+1),b).length}var f=d.domain(),g=Mf(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Pf(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=_g(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=_g(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Mf(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],_g(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return $g(a.copy(),b,c)},Tf(d,a)}function _g(a){return new Date(a)}function ah(a){return JSON.parse(a.responseText)}function bh(a){var b=fh.createRange();return b.selectNode(fh.body),b.createContextualFragment(a.responseText)}var ch={version:"3.5.3"};Date.now||(Date.now=function(){return+new Date});var dh=[].slice,eh=function(a){return dh.call(a)},fh=document,gh=fh.documentElement,hh=window;try{eh(gh.childNodes)[0].nodeType}catch(ih){eh=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{fh.createElement("div").style.setProperty("opacity",0,"")}catch(jh){var kh=hh.Element.prototype,lh=kh.setAttribute,mh=kh.setAttributeNS,nh=hh.CSSStyleDeclaration.prototype,oh=nh.setProperty;kh.setAttribute=function(a,b){lh.call(this,a,b+"")},kh.setAttributeNS=function(a,b,c){mh.call(this,a,b,c+"")},nh.setProperty=function(a,b,c){oh.call(this,a,b+"",c)}}ch.ascending=a,ch.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},ch.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},ch.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},ch.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},ch.sum=function(a,b){var c,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)d(c=+a[g])&&(e+=c);else for(;++g<f;)d(c=+b.call(a,a[g],g))&&(e+=c);return e},ch.mean=function(a,c){var e,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)d(e=b(a[h]))?f+=e:--i;else for(;++h<g;)d(e=b(c.call(a,a[h],h)))?f+=e:--i;return i?f/i:void 0},ch.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},ch.median=function(c,e){var f,g=[],h=c.length,i=-1;if(1===arguments.length)for(;++i<h;)d(f=b(c[i]))&&g.push(f);else for(;++i<h;)d(f=b(e.call(c,c[i],i)))&&g.push(f);return g.length?ch.quantile(g.sort(a),.5):void 0},ch.variance=function(a,c){var e,f,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)d(e=b(a[j]))&&(f=e-h,h+=f/++k,i+=f*(e-h));else for(;++j<g;)d(e=b(c.call(a,a[j],j)))&&(f=e-h,h+=f/++k,i+=f*(e-h));return k>1?i/(k-1):void 0},ch.deviation=function(){var a=ch.variance.apply(this,arguments);return a?Math.sqrt(a):a};var ph=e(a);ch.bisectLeft=ph.left,ch.bisect=ch.bisectRight=ph.right,ch.bisector=function(b){return e(1===b.length?function(c,d){return a(b(c),d)}:b)},ch.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},ch.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},ch.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},ch.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=ch.min(arguments,f),c=new Array(b);++a<b;)for(var d,e=-1,g=c[a]=new Array(d);++e<d;)g[e]=arguments[e][a];return c},ch.transpose=function(a){return ch.zip.apply(ch,a)},ch.keys=function(a){var b=[];for(var c in a)b.push(c);return b},ch.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},ch.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},ch.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var qh=Math.abs;ch.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=g(qh(c)),h=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++h)>b;)e.push(d/f);else for(;(d=a+c*++h)<b;)e.push(d/f);return e},ch.map=function(a,b){var c=new i;if(a instanceof i)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var rh="__proto__",sh="\x00";h(i,{has:l,get:function(a){return this._[j(a)]},set:function(a,b){return this._[j(a)]=b},remove:m,keys:n,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:k(b),value:this._[b]});return a},size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b),this._[b])}}),ch.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var j,k,l,m,n=-1,o=g.length,p=f[h++],q=new i;++n<o;)(m=q.get(j=p(k=g[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(ch.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},ch.set=function(a){var b=new q;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},h(q,{has:l,add:function(a){return this._[j(a+="")]=!0,a},remove:m,values:n,size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b))}}),ch.behavior={},ch.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=r(a,b,b[c]);return a};var th=["webkit","ms","moz","Moz","o","O"];ch.dispatch=function(){for(var a=new u,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=v(a);return a},u.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},ch.event=null,ch.requote=function(a){return a.replace(uh,"\\$&")};var uh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,vh={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},wh=function(a,b){return b.querySelector(a)},xh=function(a,b){return b.querySelectorAll(a)},yh=gh.matches||gh[s(gh,"matchesSelector")],zh=function(a,b){return yh.call(a,b)};"function"==typeof Sizzle&&(wh=function(a,b){return Sizzle(a,b)[0]||null},xh=Sizzle,zh=Sizzle.matchesSelector),ch.selection=function(){return Dh};var Ah=ch.selection.prototype=[];Ah.select=function(a){var b,c,d,e,f=[];a=A(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return z(f)},Ah.selectAll=function(a){var b,c,d=[];a=B(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=eh(a.call(c,c.__data__,h,e))),b.parentNode=c);return z(d)};var Bh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ch.ns={prefix:Bh,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),Bh.hasOwnProperty(c)?{space:Bh[c],local:a}:a}},Ah.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=ch.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(C(b,a[b]));return this}return this.each(C(a,b))},Ah.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=F(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!E(a[e]).test(b))return!1;return!0}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},Ah.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(I(c,a[c],b));return this}if(2>d)return hh.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(I(a,b,c))},Ah.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},Ah.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Ah.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Ah.append=function(a){return a=K(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Ah.insert=function(a,b){return a=K(a),b=A(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Ah.remove=function(){return this.each(L)},Ah.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new i,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=M(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=M(f);for(;l>d;++d)o[d]=M(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),j.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=Q([]),j=z([]),k=z([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return j.enter=function(){return h},j.exit=function(){return k},j},Ah.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Ah.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=N(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return z(e)},Ah.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Ah.sort=function(a){a=O.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Ah.each=function(a){return P(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Ah.call=function(a){var b=eh(arguments);return a.apply(b[0]=this,b),this},Ah.empty=function(){return!this.node()},Ah.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},Ah.size=function(){var a=0;return P(this,function(){++a}),a};var Ch=[];ch.selection.enter=Q,ch.selection.enter.prototype=Ch,Ch.append=Ah.append,Ch.empty=Ah.empty,Ch.node=Ah.node,Ch.call=Ah.call,Ch.size=Ah.size,Ch.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return z(g)},Ch.insert=function(a,b){return arguments.length<2&&(b=R(this)),Ah.insert.call(this,a,b)},ch.select=function(a){var b=["string"==typeof a?wh(a,fh):a];return b.parentNode=gh,z([b])},ch.selectAll=function(a){var b=eh("string"==typeof a?xh(a,fh):a);return b.parentNode=gh,z([b])};var Dh=ch.select(gh);Ah.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(S(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(S(a,b,c))};var Eh=ch.map({mouseenter:"mouseover",mouseleave:"mouseout"});Eh.forEach(function(a){"on"+a in fh&&Eh.remove(a)});var Fh="onselectstart"in fh?null:s(gh.style,"userSelect"),Gh=0;ch.mouse=function(a){return W(a,x())};var Hh=/WebKit/.test(hh.navigator.userAgent)?-1:0;ch.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=x().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return W(a,d)},ch.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&ch.event.target===l),n({type:"dragend"}))}var j,k=this,l=ch.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=ch.select(e()).on(f+q,h).on(g+q,i),s=V(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=y(a,"drag","dragstart","dragend"),d=null,e=b(t,ch.mouse,Z,"mousemove","mouseup"),f=b(X,ch.touch,Y,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},ch.rebind(a,c,"on")},ch.touches=function(a,b){return arguments.length<2&&(b=x().touches),b?eh(b).map(function(b){var c=W(a,b);return c.identifier=b.identifier,c}):[]};var Ih=1e-6,Jh=Ih*Ih,Kh=Math.PI,Lh=2*Kh,Mh=Lh-Ih,Nh=Kh/2,Oh=Kh/180,Ph=180/Kh,Qh=Math.SQRT2,Rh=2,Sh=4;ch.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=db(p),g=f/(Rh*m)*(c*eb(Qh*b+p)-cb(p));return[d+g*j,e+g*k,f*c/db(Qh*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Qh*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Sh*l)/(2*f*Rh*m),o=(i*i-f*f-Sh*l)/(2*i*Rh*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Qh;return c.duration=1e3*s,c},ch.behavior.zoom=function(){function a(a){a.on(E,k).on(Vh+".zoom",m).on("dblclick.zoom",n).on(H,l)}function b(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function c(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function d(a){z.k=Math.max(B[0],Math.min(B[1],a))}function e(a,b){b=c(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function f(b,c,f,g){b.__chart__={x:z.x,y:z.y,k:z.k},d(Math.pow(2,g)),e(p=c,f),b=ch.select(b),C>0&&(b=b.transition().duration(C)),b.call(a.event)}function g(){u&&u.domain(t.range().map(function(a){return(a-z.x)/z.k}).map(t.invert)),x&&x.domain(v.range().map(function(a){return(a-z.y)/z.k}).map(v.invert))}function h(a){D++||a({type:"zoomstart"})}function i(a){g(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function j(a){--D||a({type:"zoomend"}),p=null}function k(){function a(){k=1,e(ch.mouse(d),m),i(g)}function c(){l.on(F,null).on(G,null),n(k&&ch.event.target===f),j(g)}var d=this,f=ch.event.target,g=I.of(d,arguments),k=0,l=ch.select(hh).on(F,a).on(G,c),m=b(ch.mouse(d)),n=V();Oj.call(d),h(g)}function l(){function a(){var a=ch.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=ch.event.target;ch.select(b).on(u,g).on(v,m),x.push(b);for(var c=ch.event.changedTouches,d=0,e=c.length;e>d;++d)q[c[d].identifier]=null;var h=a(),i=Date.now();if(1===h.length){if(500>i-s){var j=h[0];f(o,j,q[j.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),w()}s=i}else if(h.length>1){var j=h[0],k=h[1],l=j[0]-k[0],n=j[1]-k[1];r=l*l+n*n}}function g(){var a,b,c,f,g=ch.touches(o);Oj.call(o);for(var h=0,j=g.length;j>h;++h,f=null)if(c=g[h],f=q[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*n)}s=null,e(a,b),i(p)}function m(){if(ch.event.touches.length){for(var b=ch.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}ch.selectAll(x).on(t,null),y.on(E,k).on(H,l),A(),j(p)}var n,o=this,p=I.of(o,arguments),q={},r=0,t=".zoom-"+ch.event.changedTouches[0].identifier,u="touchmove"+t,v="touchend"+t,x=[],y=ch.select(o),A=V();c(),h(p),y.on(E,null).on(H,c)}function m(){var a=I.of(this,arguments);r?clearTimeout(r):(o=b(p=q||ch.mouse(this)),Oj.call(this),h(a)),r=setTimeout(function(){r=null,j(a)},50),w(),d(Math.pow(2,.002*Th())*z.k),e(p,o),i(a)}function n(){var a=ch.mouse(this),c=Math.log(z.k)/Math.LN2;f(this,a,b(a),ch.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var o,p,q,r,s,t,u,v,x,z={x:0,y:0,k:1},A=[960,500],B=Uh,C=250,D=0,E="mousedown.zoom",F="mousemove.zoom",G="mouseup.zoom",H="touchstart.zoom",I=y(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=I.of(this,arguments),b=z;Mj?ch.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},h(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=p?p[0]:c/2,f=p?p[1]:d/2,g=ch.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},i(a)}}).each("interrupt.zoom",function(){j(a)}).each("end.zoom",function(){j(a)}):(this.__chart__=z,h(a),i(a),j(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},g(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:+b},g(),a):z.k},a.scaleExtent=function(b){return arguments.length?(B=null==b?Uh:[+b[0],+b[1]],a):B},a.center=function(b){return arguments.length?(q=b&&[+b[0],+b[1]],a):q},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(C=+b,a):C},a.x=function(b){return arguments.length?(u=b,t=b.copy(),z={x:0,y:0,k:1},a):u},a.y=function(b){return arguments.length?(x=b,v=b.copy(),z={x:0,y:0,k:1},a):x},ch.rebind(a,I,"on")};var Th,Uh=[0,1/0],Vh="onwheel"in fh?(Th=function(){return-ch.event.deltaY*(ch.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fh?(Th=function(){return ch.event.wheelDelta},"mousewheel"):(Th=function(){return-ch.event.detail},"MozMousePixelScroll");ch.color=gb,gb.prototype.toString=function(){return this.rgb()+""},ch.hsl=hb;var Wh=hb.prototype=new gb;Wh.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,this.l/a)},Wh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,a*this.l)},Wh.rgb=function(){return ib(this.h,this.s,this.l)},ch.hcl=jb;var Xh=jb.prototype=new gb;Xh.brighter=function(a){return new jb(this.h,this.c,Math.min(100,this.l+Yh*(arguments.length?a:1)))},Xh.darker=function(a){return new jb(this.h,this.c,Math.max(0,this.l-Yh*(arguments.length?a:1)))},Xh.rgb=function(){return kb(this.h,this.c,this.l).rgb()},ch.lab=lb;var Yh=18,Zh=.95047,$h=1,_h=1.08883,ai=lb.prototype=new gb;ai.brighter=function(a){return new lb(Math.min(100,this.l+Yh*(arguments.length?a:1)),this.a,this.b)},ai.darker=function(a){return new lb(Math.max(0,this.l-Yh*(arguments.length?a:1)),this.a,this.b)},ai.rgb=function(){return mb(this.l,this.a,this.b)},ch.rgb=rb;var bi=rb.prototype=new gb;bi.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new rb(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new rb(e,e,e)},bi.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new rb(a*this.r,a*this.g,a*this.b)},bi.hsl=function(){return wb(this.r,this.g,this.b)},bi.toString=function(){return"#"+ub(this.r)+ub(this.g)+ub(this.b)};var ci=ch.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ci.forEach(function(a,b){ci.set(a,sb(b))}),ch.functor=Ab,ch.xhr=Cb(Bb),ch.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Db(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new q,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},ch.csv=ch.dsv(",","text/csv"),ch.tsv=ch.dsv("	","text/tab-separated-values");var di,ei,fi,gi,hi,ii=hh[s(hh,"requestAnimationFrame")]||function(a){setTimeout(a,17)};ch.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};ei?ei.n=f:di=f,ei=f,fi||(gi=clearTimeout(gi),fi=1,ii(Gb))},ch.timer.flush=function(){Hb(),Ib()},ch.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ji=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Kb);ch.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=ch.round(a,Jb(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ji[8+c/3]};var ki=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,li=ch.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=ch.round(a,Jb(a,b))).toFixed(Math.max(0,Math.min(20,Jb(a*(1+1e-15),b))))}}),mi=ch.time={},ni=Date;Nb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){oi.setUTCDate.apply(this._,arguments)},setDay:function(){oi.setUTCDay.apply(this._,arguments)},setFullYear:function(){oi.setUTCFullYear.apply(this._,arguments)},setHours:function(){oi.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){oi.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){oi.setUTCMinutes.apply(this._,arguments)},setMonth:function(){oi.setUTCMonth.apply(this._,arguments)},setSeconds:function(){oi.setUTCSeconds.apply(this._,arguments)},setTime:function(){oi.setTime.apply(this._,arguments)}};var oi=Date.prototype;mi.year=Ob(function(a){return a=mi.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),mi.years=mi.year.range,mi.years.utc=mi.year.utc.range,mi.day=Ob(function(a){var b=new ni(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),mi.days=mi.day.range,mi.days.utc=mi.day.utc.range,mi.dayOfYear=function(a){var b=mi.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=mi[a]=Ob(function(a){return(a=mi.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=mi.year(a).getDay();return Math.floor((mi.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});mi[a+"s"]=c.range,mi[a+"s"].utc=c.utc.range,mi[a+"OfYear"]=function(a){var c=mi.year(a).getDay();return Math.floor((mi.dayOfYear(a)+(c+b)%7)/7)}}),mi.week=mi.sunday,mi.weeks=mi.sunday.range,mi.weeks.utc=mi.sunday.utc.range,mi.weekOfYear=mi.sundayOfYear;var pi={"-":"",_:" ",0:"0"},qi=/^\s*\d+/,ri=/^%/;ch.locale=function(a){return{numberFormat:Lb(a),timeFormat:Qb(a)}
};var si=ch.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ch.format=si.numberFormat,ch.geo={},jc.prototype={s:0,t:0,add:function(a){kc(a,this.t,ti),kc(ti.s,this.s,this),this.s?this.t+=ti.t:this.s=ti.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ti=new jc;ch.geo.stream=function(a,b){a&&ui.hasOwnProperty(a.type)?ui[a.type](a,b):lc(a,b)};var ui={Feature:function(a,b){lc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lc(c[d].geometry,b)}},vi={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mc(c[d],b,0)},Polygon:function(a,b){nc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nc(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lc(c[d],b)}};ch.geo.area=function(a){return wi=0,ch.geo.stream(a,yi),wi};var wi,xi=new jc,yi={sphere:function(){wi+=4*Kh},point:t,lineStart:t,lineEnd:t,polygonStart:function(){xi.reset(),yi.lineStart=oc},polygonEnd:function(){var a=2*xi;wi+=0>a?4*Kh+a:a,yi.lineStart=yi.lineEnd=yi.point=t}};ch.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=pc([b*Oh,c*Oh]);if(r){var e=rc(r,d),f=[e[1],-e[0],0],g=rc(f,e);uc(g),g=vc(g);var i=b-o,j=i>0?1:-1,p=g[0]*Ph*j,q=qh(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Ph;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Ph;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=qh(d)>180?d+(d>0?360:-360):d}else p=a,q=c;yi.point(a,c),b(a,c)}function f(){yi.lineStart()}function g(){e(p,q),yi.lineEnd(),qh(s)>Ih&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,yi.polygonStart()},polygonEnd:function(){yi.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>xi?(k=-(m=180),l=-(n=90)):s>Ih?n=90:-Ih>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],ch.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,1/0===k||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[k,l],[m,n]]}}(),ch.geo.centroid=function(a){zi=Ai=Bi=Ci=Di=Ei=Fi=Gi=Hi=Ii=Ji=0,ch.geo.stream(a,Ki);var b=Hi,c=Ii,d=Ji,e=b*b+c*c+d*d;return Jh>e&&(b=Ei,c=Fi,d=Gi,Ih>Ai&&(b=Bi,c=Ci,d=Di),e=b*b+c*c+d*d,Jh>e)?[0/0,0/0]:[Math.atan2(c,b)*Ph,bb(d/Math.sqrt(e))*Ph]};var zi,Ai,Bi,Ci,Di,Ei,Fi,Gi,Hi,Ii,Ji,Ki={sphere:t,point:xc,lineStart:zc,lineEnd:Ac,polygonStart:function(){Ki.lineStart=Bc},polygonEnd:function(){Ki.lineStart=zc}},Li=Hc(Dc,Lc,Nc,[-Kh,-Kh/2]),Mi=1e9;ch.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Rc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(ch.geo.conicEqualArea=function(){return Sc(Tc)}).raw=Tc,ch.geo.albers=function(){return ch.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ch.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=ch.geo.albers(),g=ch.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ch.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Ih,l+.12*j+Ih],[k-.214*j-Ih,l+.234*j-Ih]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Ih,l+.166*j+Ih],[k-.115*j-Ih,l+.234*j-Ih]]).stream(i).point,a},a.scale(1070)};var Ni,Oi,Pi,Qi,Ri,Si,Ti={point:t,lineStart:t,lineEnd:t,polygonStart:function(){Oi=0,Ti.lineStart=Uc},polygonEnd:function(){Ti.lineStart=Ti.lineEnd=Ti.point=t,Ni+=qh(Oi/2)}},Ui={point:Vc,lineStart:t,lineEnd:t,polygonStart:t,polygonEnd:t},Vi={point:Yc,lineStart:Zc,lineEnd:$c,polygonStart:function(){Vi.lineStart=_c},polygonEnd:function(){Vi.point=Yc,Vi.lineStart=Zc,Vi.lineEnd=$c}};ch.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),ch.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Ni=0,ch.geo.stream(a,e(Ti)),Ni},a.centroid=function(a){return Bi=Ci=Di=Ei=Fi=Gi=Hi=Ii=Ji=0,ch.geo.stream(a,e(Vi)),Ji?[Hi/Ji,Ii/Ji]:Gi?[Ei/Gi,Fi/Gi]:Di?[Bi/Di,Ci/Di]:[0/0,0/0]},a.bounds=function(a){return Ri=Si=-(Pi=Qi=1/0),ch.geo.stream(a,e(Ui)),[[Pi,Qi],[Ri,Si]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cd(a):Bb,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wc:new ad(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(ch.geo.albersUsa()).context(null)},ch.geo.transform=function(a){return{stream:function(b){var c=new dd(b);for(var d in a)c[d]=a[d];return c}}},dd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ch.geo.projection=fd,ch.geo.projectionMutator=gd,(ch.geo.equirectangular=function(){return fd(id)}).raw=id.invert=id,ch.geo.rotation=function(a){function b(b){return b=a(b[0]*Oh,b[1]*Oh),b[0]*=Ph,b[1]*=Ph,b}return a=kd(a[0]%360*Oh,a[1]*Oh,a.length>2?a[2]*Oh:0),b.invert=function(b){return b=a.invert(b[0]*Oh,b[1]*Oh),b[0]*=Ph,b[1]*=Ph,b},b},jd.invert=id,ch.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kd(-a[0]*Oh,-a[1]*Oh,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Ph,a[1]*=Ph}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=od((b=+d)*Oh,e*Oh),a):b},a.precision=function(d){return arguments.length?(c=od(b*Oh,(e=+d)*Oh),a):e},a.angle(90)},ch.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Oh,e=a[1]*Oh,f=b[1]*Oh,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},ch.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return ch.range(Math.ceil(f/q)*q,e,q).map(m).concat(ch.range(Math.ceil(j/r)*r,i,r).map(n)).concat(ch.range(Math.ceil(d/o)*o,c,o).filter(function(a){return qh(a%q)>Ih}).map(k)).concat(ch.range(Math.ceil(h/p)*p,g,p).filter(function(a){return qh(a%r)>Ih}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qd(h,g,90),l=rd(d,c,s),m=qd(j,i,90),n=rd(f,e,s),a):s},a.majorExtent([[-180,-90+Ih],[180,90-Ih]]).minorExtent([[-180,-80-Ih],[180,80+Ih]])},ch.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sd,e=td;return a.distance=function(){return ch.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},ch.geo.interpolate=function(a,b){return ud(a[0]*Oh,a[1]*Oh,b[0]*Oh,b[1]*Oh)},ch.geo.length=function(a){return Wi=0,ch.geo.stream(a,Xi),Wi};var Wi,Xi={sphere:t,point:t,lineStart:vd,lineEnd:t,polygonStart:t,polygonEnd:t},Yi=wd(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(ch.geo.azimuthalEqualArea=function(){return fd(Yi)}).raw=Yi;var Zi=wd(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},Bb);(ch.geo.azimuthalEquidistant=function(){return fd(Zi)}).raw=Zi,(ch.geo.conicConformal=function(){return Sc(xd)}).raw=xd,(ch.geo.conicEquidistant=function(){return Sc(yd)}).raw=yd;var $i=wd(function(a){return 1/a},Math.atan);(ch.geo.gnomonic=function(){return fd($i)}).raw=$i,zd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Nh]},(ch.geo.mercator=function(){return Ad(zd)}).raw=zd;var _i=wd(function(){return 1},Math.asin);(ch.geo.orthographic=function(){return fd(_i)}).raw=_i;var aj=wd(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(ch.geo.stereographic=function(){return fd(aj)}).raw=aj,Bd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Nh]},(ch.geo.transverseMercator=function(){var a=Ad(Bd),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bd,ch.geom={},ch.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ab(c),f=Ab(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fd),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Ed(h),k=Ed(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cd,d=Dd;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},ch.geom.polygon=function(a){return vh(a,bj),a};var bj=ch.geom.polygon.prototype=[];bj.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},bj.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},bj.clip=function(a){for(var b,c,d,e,f,g,h=Id(a),i=-1,j=this.length-Id(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gd(g,k,e)?(Gd(f,k,e)||a.push(Hd(f,g,k,e)),a.push(g)):Gd(f,k,e)&&a.push(Hd(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var cj,dj,ej,fj,gj,hj=[],ij=[];Qd.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,(!a.b||!a.a)&&b.splice(c,1);return b.sort(Sd),b.length},ae.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},be.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fe(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(de(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ee(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ee(this,c),a=c,c=a.U),c.C=!1,d.C=!0,de(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fe(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,de(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ee(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,de(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ee(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,de(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ee(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},ch.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return ge(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Ih)*Ih,y:Math.round(g(a,b)/Ih)*Ih,i:b}})}var d=Cd,e=Dd,f=d,g=e,h=jj;return a?b(a):(b.links=function(a){return ge(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return ge(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sd),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&ie(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ab(d=a),b):d},b.y=function(a){return arguments.length?(g=Ab(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?jj:a,b):h===jj?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===jj?null:h&&h[1]},b)};var jj=[[-1e6,-1e6],[1e6,1e6]];ch.geom.delaunay=function(a){return ch.geom.voronoi().triangles(a)},ch.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(qh(i-c)+qh(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=le()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ab(h),u=Ab(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=le();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){me(a,z,p,q,r,s)},z.find=function(a){return ne(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cd,i=Dd;return(g=arguments.length)?(h=je,i=ke,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},ch.interpolateRgb=oe,ch.interpolateObject=pe,ch.interpolateNumber=qe,ch.interpolateString=re;var kj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lj=new RegExp(kj.source,"g");ch.interpolate=se,ch.interpolators=[function(a,b){var c=typeof b;return("string"===c?ci.has(b)||/^(#|rgb\(|hsl\()/.test(b)?oe:re:b instanceof gb?oe:Array.isArray(b)?te:"object"===c&&isNaN(b)?pe:qe)(a,b)}],ch.interpolateArray=te;var mj=function(){return Bb},nj=ch.map({linear:mj,poly:Ae,quad:function(){return xe},cubic:function(){return ye},sin:function(){return Be},exp:function(){return Ce},circle:function(){return De},elastic:Ee,back:Fe,bounce:function(){return Ge}}),oj=ch.map({"in":Bb,out:ve,"in-out":we,"out-in":function(a){return we(ve(a))}});ch.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=nj.get(c)||mj,d=oj.get(d)||Bb,ue(d(c.apply(null,dh.call(arguments,1))))},ch.interpolateHcl=He,ch.interpolateHsl=Ie,ch.interpolateLab=Je,ch.interpolateRound=Ke,ch.transform=function(a){var b=fh.createElementNS(ch.ns.prefix.svg,"g");return(ch.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Le(c?c.matrix:pj)})(a)},Le.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pj={a:1,b:0,c:0,d:1,e:0,f:0};ch.interpolateTransform=Pe,ch.layout={},ch.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Se(a[c]));return b}},ch.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=ch.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(ch.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Lh-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},ch.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=ch.event.x,a.py=ch.event.y,h.resume()}var c,d,e,f,g,h={},i=ch.dispatch("start","tick","end"),j=[1,1],k=.9,l=qj,m=rj,n=-30,o=sj,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Ze(b=ch.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),ch.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=ch.behavior.drag().origin(Bb).on("dragstart.force",Ve).on("drag.force",b).on("dragend.force",We)),arguments.length?void this.on("mouseover.force",Xe).on("mouseout.force",Ye).call(c):c},ch.rebind(h,i,"on")};var qj=20,rj=1,sj=1/0;ch.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return af(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=df,c=bf,d=cf;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(_e(b,function(a){a.children&&(a.value=0)}),af(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},ch.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=ch.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},$e(c,d)},ch.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=(l-i*n)/ch.sum(j),p=ch.range(i),q=[];return null!=c&&p.sort(c===tj?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),p.forEach(function(a){q[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*o+n,padAngle:m}}),q}var b=Number,c=tj,d=0,e=Lh,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var tj={};ch.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=ch.permute(j,l),k=ch.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=Bb,c=jf,d=kf,e=hf,f=ff,g=gf;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:uj.get(b)||jf,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:vj.get(b)||kf,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var uj=ch.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(lf),f=a.map(mf),g=ch.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return ch.range(a.length).reverse()},"default":jf}),vj=ch.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:kf});ch.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[ch.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=qf,e=of;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ab(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return pf(a,b)}:Ab(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},ch.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,af(h,function(a){a.r=+k(a.value)}),af(h,vf),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;af(h,function(a){a.r+=l}),af(h,vf),af(h,function(a){a.r-=l})}return yf(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=ch.layout.hierarchy().sort(rf),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},$e(a,c)},ch.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(af(m,c),m.parent.m=-m.z,_e(m,d),j)_e(l,f);else{var n=l,o=l,p=l;_e(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);_e(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ef(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Cf(g),e=Bf(e),g&&e;)i=Bf(i),f=Cf(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Df(Ff(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Cf(f)&&(f.t=g,f.m+=l-k),e&&!Bf(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=ch.layout.hierarchy().sort(null).value(null),h=Af,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},$e(a,g)},ch.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;af(i,function(a){var b=a.children;b&&b.length?(a.x=Hf(b),a.y=Gf(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=If(i),l=Jf(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return af(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=ch.layout.hierarchy().sort(null).value(null),c=Af,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},$e(a,b)},ch.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));
return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=ch.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Kf,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Kf(b):Lf(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Lf(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Kf:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},$e(f,h)},ch.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=ch.random.normal.apply(ch,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=ch.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},ch.scale={};var wj={floor:Bb,ceil:Bb};ch.scale.linear=function(){return Sf([0,1],[0,1],se,!1)};var xj={s:1,g:1,p:1,r:1,e:1};ch.scale.log=function(){return $f(ch.scale.linear().domain([0,1]),10,!0,[1,10])};var yj=ch.format(".0e"),zj={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};ch.scale.pow=function(){return _f(ch.scale.linear(),1,[0,1])},ch.scale.sqrt=function(){return ch.scale.pow().exponent(.5)},ch.scale.ordinal=function(){return bg([],{t:"range",a:[[]]})},ch.scale.category10=function(){return ch.scale.ordinal().range(Aj)},ch.scale.category20=function(){return ch.scale.ordinal().range(Bj)},ch.scale.category20b=function(){return ch.scale.ordinal().range(Cj)},ch.scale.category20c=function(){return ch.scale.ordinal().range(Dj)};var Aj=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tb),Bj=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tb),Cj=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tb),Dj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tb);ch.scale.quantile=function(){return cg([],[])},ch.scale.quantize=function(){return dg(0,1,[0,1])},ch.scale.threshold=function(){return eg([.5],[0,1])},ch.scale.identity=function(){return fg([0,1])},ch.svg={},ch.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Nh,l=h.apply(this,arguments)-Nh,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Mh)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Ej?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=bb(q/j*Math.sin(r))),a&&(A=bb(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Kh?0:1;if(B&&mg(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Kh?0:1;if(A&&mg(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if((o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=null==y?[w,x]:null==u?[s,t]:Hd([s,t],[y,z],[u,v],[w,x]),I=s-H[0],J=t-H[1],K=u-H[0],L=v-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=u){var O=Math.min(o,(j-N)/(M+1)),P=ng(null==y?[w,x]:[y,z],[s,t],j,O,n),Q=ng([u,v],[w,x],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^mg(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",s,",",t);if(null!=y){var R=Math.min(o,(a-N)/(M-1)),S=ng([s,t],[y,z],a,-R,n),T=ng([w,x],null==u?[s,t]:[u,v],a,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^mg(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=hg,d=ig,e=gg,f=Ej,g=jg,h=kg,i=lg;return a.innerRadius=function(b){return arguments.length?(c=Ab(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ab(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ab(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Ej?Ej:Ab(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ab(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ab(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ab(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Nh;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Ej="auto";ch.svg.line=function(){return og(Bb)};var Fj=ch.map({linear:pg,"linear-closed":qg,step:rg,"step-before":sg,"step-after":tg,basis:zg,"basis-open":Ag,"basis-closed":Bg,bundle:Cg,cardinal:wg,"cardinal-open":ug,"cardinal-closed":vg,monotone:Ig});Fj.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Gj=[0,2/3,1/3,0],Hj=[0,1/3,2/3,0],Ij=[0,1/6,2/3,1/6];ch.svg.line.radial=function(){var a=og(Jg);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},sg.reverse=tg,tg.reverse=sg,ch.svg.area=function(){return Kg(Bb)},ch.svg.area.radial=function(){var a=Kg(Jg);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},ch.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Nh,k=j.call(a,e,d)-Nh;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Kh)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sd,g=td,h=Lg,i=jg,j=kg;return a.radius=function(b){return arguments.length?(h=Ab(b),a):h},a.source=function(b){return arguments.length?(f=Ab(b),a):f},a.target=function(b){return arguments.length?(g=Ab(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ab(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ab(b),a):j},a},ch.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sd,c=td,d=Mg;return a.source=function(c){return arguments.length?(b=Ab(c),a):b},a.target=function(b){return arguments.length?(c=Ab(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},ch.svg.diagonal.radial=function(){var a=ch.svg.diagonal(),b=Mg,c=a.projection;return a.projection=function(a){return arguments.length?c(Ng(b=a)):b},a},ch.svg.symbol=function(){function a(a,d){return(Jj.get(b.call(this,a,d))||Qg)(c.call(this,a,d))}var b=Pg,c=Og;return a.type=function(c){return arguments.length?(b=Ab(c),a):b},a.size=function(b){return arguments.length?(c=Ab(b),a):c},a};var Jj=ch.map({circle:Qg,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Lj)),c=b*Lj;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Kj),c=b*Kj/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Kj),c=b*Kj/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});ch.svg.symbolTypes=Jj.keys();var Kj=Math.sqrt(3),Lj=Math.tan(30*Oh);Ah.transition=function(a){for(var b,c,d=Mj||++Qj,e=Vg(a),f=[],g=Nj||{time:Date.now(),ease:ze,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&Wg(c,k,e,d,g),b.push(c)}return Sg(f,e,d)},Ah.interrupt=function(a){return this.each(null==a?Oj:Rg(Vg(a)))};var Mj,Nj,Oj=Rg(Vg()),Pj=[],Qj=0;Pj.call=Ah.call,Pj.empty=Ah.empty,Pj.node=Ah.node,Pj.size=Ah.size,ch.transition=function(a,b){return a&&a.transition?Mj?a.transition(b):a:Dh.transition(a)},ch.transition.prototype=Pj,Pj.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=A(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),Wg(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Sg(g,f,e)},Pj.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=B(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&Wg(e,o,h,g,f),b.push(e)}return Sg(i,h,g)},Pj.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=N(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Sg(e,this.namespace,this.id)},Pj.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):P(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Pj.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Pe:se,h=ch.ns.qualify(a);return Tg(this,"attr."+a,b,h.local?f:e)},Pj.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=ch.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Pj.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=hh.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=se(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Tg(this,"style."+a,b,e)},Pj.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,hh.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Pj.text=function(a){return Tg(this,"text",a,Ug)},Pj.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Pj.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=ch.ease.apply(ch,arguments)),P(this,function(d){d[c][b].ease=a}))},Pj.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:P(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Pj.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:P(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Pj.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Nj,f=Mj;try{Mj=c,P(this,function(b,e,f){Nj=b[d][c],a.call(b,b.__data__,e,f)})}finally{Nj=e,Mj=f}}else P(this,function(e){var f=e[d][c];(f.event||(f.event=ch.dispatch("start","end","interrupt"))).on(a,b)});return this},Pj.transition=function(){for(var a,b,c,d,e=this.id,f=++Qj,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],Wg(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Sg(h,g,f)},ch.svg.axis=function(){function a(a){a.each(function(){var a,j=ch.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):Bb:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Ih),q=ch.transition(o.exit()).style("opacity",Ih).remove(),r=ch.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Nf(l),u=j.selectAll(".domain").data([0]),v=(u.enter().append("path").attr("class","domain"),ch.transition(u));p.append("line"),p.append("text");var w,x,y,z,A=p.select("line"),B=r.select("line"),C=o.select("text").text(n),D=p.select("text"),E=r.select("text"),F="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Xg,w="x",y="y",x="x2",z="y2",C.attr("dy",0>F?"0em":".71em").style("text-anchor","middle"),v.attr("d","M"+t[0]+","+F*f+"V0H"+t[1]+"V"+F*f)):(a=Yg,w="y",y="x",x="y2",z="x2",C.attr("dy",".32em").style("text-anchor",0>F?"end":"start"),v.attr("d","M"+F*f+","+t[0]+"H0V"+t[1]+"H"+F*f)),A.attr(z,F*e),D.attr(y,F*s),B.attr(x,0).attr(z,F*e),E.attr(w,0).attr(y,F*s),l.rangeBand){var G=l,H=G.rangeBand()/2;k=l=function(a){return G(a)+H}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=ch.scale.linear(),d=Rj,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Sj?b+"":Rj,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Rj="bottom",Sj={top:1,right:1,bottom:1,left:1};ch.svg.brush=function(){function a(f){f.each(function(){var f=ch.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,Bb);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Tj[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=ch.transition(f),m=ch.transition(g);i&&(k=Nf(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Nf(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==ch.event.keyCode&&(C||(s=null,E[0]-=k[1],E[1]-=l[1],C=2),w())}function o(){32==ch.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,w())}function p(){var a=ch.mouse(u),e=!1;t&&(a[0]+=t[0],a[1]+=t[1]),C||(ch.event.altKey?(s||(s=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<s[0])],E[1]=l[+(a[1]<s[1])]):s=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Nf(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(s&&(o=Math.max(i,Math.min(j,2*s[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),ch.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var s,t,u=this,v=ch.select(ch.event.target),x=h.of(u,arguments),y=ch.select(u),z=v.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=v.classed("extent"),D=V(),E=ch.mouse(u),F=ch.select(hh).on("keydown.brush",e).on("keyup.brush",o);if(ch.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);t=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else ch.event.altKey&&(s=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),ch.select("body").style("cursor",v.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=y(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Uj[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,Mj?ch.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=te(k,b.x),d=te(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Uj[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Uj[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),(e!=l[0]||h!=l[1])&&(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},ch.rebind(a,h,"on")};var Tj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uj=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vj=mi.format=si.timeFormat,Wj=Vj.utc,Xj=Wj("%Y-%m-%dT%H:%M:%S.%LZ");Vj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zg:Xj,Zg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Zg.toString=Xj.toString,mi.second=Ob(function(a){return new ni(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),mi.seconds=mi.second.range,mi.seconds.utc=mi.second.utc.range,mi.minute=Ob(function(a){return new ni(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),mi.minutes=mi.minute.range,mi.minutes.utc=mi.minute.utc.range,mi.hour=Ob(function(a){var b=a.getTimezoneOffset()/60;return new ni(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),mi.hours=mi.hour.range,mi.hours.utc=mi.hour.utc.range,mi.month=Ob(function(a){return a=mi.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),mi.months=mi.month.range,mi.months.utc=mi.month.utc.range;var Yj=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zj=[[mi.second,1],[mi.second,5],[mi.second,15],[mi.second,30],[mi.minute,1],[mi.minute,5],[mi.minute,15],[mi.minute,30],[mi.hour,1],[mi.hour,3],[mi.hour,6],[mi.hour,12],[mi.day,1],[mi.day,2],[mi.week,1],[mi.month,1],[mi.month,3],[mi.year,1]],$j=Vj.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Dc]]),_j={range:function(a,b,c){return ch.range(Math.ceil(a/c)*c,+b,c).map(_g)},floor:Bb,ceil:Bb};Zj.year=mi.year,mi.scale=function(){return $g(ch.scale.linear(),Zj,$j)};var ak=Zj.map(function(a){return[a[0].utc,a[1]]}),bk=Wj.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Dc]]);ak.year=mi.year.utc,mi.scale.utc=function(){return $g(ch.scale.linear(),ak,bk)},ch.text=Cb(function(a){return a.responseText}),ch.json=function(a,b){return Db(a,"application/json",ah,b)},ch.html=function(a,b){return Db(a,"text/html",bh,b)},ch.xml=Cb(function(a){return a.responseXML}),"function"==typeof c&&c.amd?c("d3",ch):"object"==typeof module&&module.exports&&(module.exports=ch),this.d3=ch}(),c("lorax/directives/chart-terms-and-conditions",["jquery","d3"],function(a){var b=function(){return{restrict:"A",replace:!0,scope:!0,controller:c,link:d,templateUrl:"/app/lorax/directives/chart-terms-and-conditions.tpl.html"}},c=function(a,b,c,d){this._$scope=a,this._$timeout=b,this._pubSubService=c,this._windowService=d,this._data=a.issue.getInfographic().getDataPoints().termsAndConditions,this._localeData=a.issue.getInfographic().getDataPoints().labels,a.tAndC={data:this._data,minutesToString:this.minutesToString.bind(this)},this._stackMultipliers={small:.85,medium:1.65,large:1.65,xlarge:1.65}};c.$inject=["$scope","$timeout","pubSubService","windowService"],c.prototype.minutesToString=function(a){var b=Math.floor(a/60),c=a%60;return 0===b?c+this._localeData.minutes:1===b?this._localeData.hour+c+this._localeData.minutes:b+this._localeData.hours+c+this._localeData.minutes};var d=function(b,c,d,e){var f=function(){var b=a(".terms-company__stacks");b.html(""),b.each(function(b){for(var c=a(this),d=e._data[b].length,f=Math.round(d/1e3)*e._stackMultipliers[e._windowService.breakpoint()],g=0;f>g;g++)c.append('<div class="stacks-item"></div>')})};e._$timeout(f),e._pubSubService.subscribe("windowService.breakpoint",f)};return b}),c("lorax/directives/chart-common-languages",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/chart-common-languages.tpl.html"}},d=function(a,b){this._$scope=a,this._$timeout=b,this._data=this._$scope.issue.getInfographic().getDataPoints().commonLanguages,this._localeData=this._$scope.issue.getInfographic().getDataPoints().labels,a.languages={data:this._data,localeData:this._localeData}};d.$inject=["$scope","$timeout"];var e=function(a,c,d,e){e._$timeout(function(){var c=a.issue.getInfographic().getDataPoints().commonLanguages,d=b.selectAll(".common-languages-content"),e=a.issue.getInfographic().getDataPoints().topPercentageOfLanguages,f=e+5,g=d.selectAll("div").data(c).enter().append("tr");g.append("td").text(function(a){return a.spoken.pct+"%"}),g.append("td").append("div").attr("class","common-languages-bar cf").append("div").attr("class","common-languages-bar__inner common-languages-bar__inner--spoken").attr("style",function(a){var b=a.spoken.pct/f*100;return"width: "+b+"%"}),g.append("td").text(function(a){return a.spoken.lang}),g.append("td").text(function(a,b){return b+1}),g.append("td").text(function(a){return a.internet.lang}),g.append("td").append("div").attr("class","common-languages-bar").append("div").attr("class","common-languages-bar__inner common-languages-bar__inner--internet").attr("style",function(a){var b=a.internet.pct/f*100;return"width: "+b+"%"}),g.append("td").text(function(a){return a.internet.pct+"%"})})};return c}),!function(){function a(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function b(b,c,d){function e(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=b.arcs.length;n>m;++m)i.push(m);return{type:"MultiLineString",arcs:a(b,i)}}function d(b,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})}),h.push(a)}function e(a){return l(g(b,{type:"Polygon",arcs:[a]}).coordinates[0])>0}var f={},h=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),h.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),h.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].length<2&&d.push(a)})})}),d=a(b,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;n>i;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function e(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return f(a,b)})}:f(a,b)}function f(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:g(a,b)};return null==b.id&&delete c.id,c}function g(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[0>a?~a:a],e=0,f=d.length;f>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&h(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function i(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(i)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=q(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return i(b)}function h(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function i(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function j(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var j=e[h],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=f[o])[h=i(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=i(n,o)]!==o&&n.splice(h,0,o)}return f}function k(a,b){function c(a){f.remove(a),a[1][2]=b(a),f.push(a)}var d=q(a.transform),e=r(a.transform),f=p();return b||(b=m),a.arcs.forEach(function(a){for(var g,h,i=[],j=0,k=0,l=a.length;l>k;++k)h=a[k],d(a[k]=[h[0],h[1],1/0],k);for(var k=1,l=a.length-1;l>k;++k)g=a.slice(k-1,k+2),g[1][2]=b(g),i.push(g),f.push(g);for(var k=0,l=i.length;l>k;++k)g=i[k],g.previous=i[k-1],g.next=i[k+1];for(;g=f.pop();){var m=g.previous,n=g.next;g[1][2]<j?g[1][2]=j:j=g[1][2],m&&(m.next=n,m[2]=g[2],c(m)),n&&(n.previous=m,n[0]=g[0],c(n))}a.forEach(e)}),a}function l(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function o(a,b){return a[1][2]-b[1][2]}function p(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(o(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&o(d[f],h)<0&&(h=d[g=f]),e>c&&o(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;return d[g]===c?(g!==--e&&(f=d[e],(o(f,c)<0?a:b)(d[f._=g]=f,g)),g):void 0},c}function q(a){if(!a)return s;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];
return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function r(a){if(!a)return s;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function s(){}var t={version:"1.6.18",mesh:function(a){return g(a,b.apply(this,arguments))},meshArcs:b,merge:function(a){return g(a,d.apply(this,arguments))},mergeArcs:d,feature:e,neighbors:j,presimplify:k};"function"==typeof c&&c.amd?c("topojson",t):"object"==typeof module&&module.exports?module.exports=t:this.topojson=t}(),c("lorax/directives/chart-world-map",["jquery","d3","topojson","jquery-customselect"],function(a,b,c){var d=function(){return{restrict:"A",replace:!0,scope:!0,controller:e,link:f}},e=function(a,b,c,d){this._$scope=a,this._$timeout=b,this._windowService=d,this._dataService=c,this._getMap=this._dataService.getMap()};e.prototype._init=function(c,d){this.map={mapData:c,countryData:d,demoMode:!0,demoTimer:null,shadeName:this._$scope.issue.getInfographic().getDataPoints().countryData.shading.name,shadeValues:this._$scope.issue.getInfographic().getDataPoints().countryData.shading.values,shadeInvert:this._$scope.issue.getInfographic().getDataPoints().countryData.shading.invert,shadeLegend:this._$scope.issue.getInfographic().getDataPoints().countryData.shading.legend,displayDataset:this._$scope.issue.getInfographic().getDataPoints().countryData.display.name,displayUnits:this._$scope.issue.getInfographic().getDataPoints().countryData.display.units,displayReduceSize:this._$scope.issue.getInfographic().getDataPoints().countryData.display.reduceSize,infographicData:{},width:938,height:500,defaultCountry:"CHN",enableHover:{small:!1,medium:!1,large:!0,xlarge:!0},labelLocation:[{left:33,top:42},{left:41,top:68},{left:66,top:65},{left:87,top:50}]},this.map.map=b.select("#"+this._$scope.issue.getId()+" .infographic__wrapper div").attr("class","worldmap"),this.map.mapWidth=a("#"+this._$scope.issue.getId()+" .infographic__wrapper div").width(),this.map.colorScale=this._setShading(this.map.shadeValues,this.map.shadeInvert),a.each(this.map.countryData,function(a,b){var c=b.id,d=b.displayName,e=b[this.map.shadeName],f=b[this.map.displayDataset],g=b.labelArea;this.map.infographicData[c]={displayName:d,shadeData:e,displayData:f,displayUnits:this.map.displayUnits,labelArea:g}}.bind(this))},e.prototype._drawDropdown=function(){var b=this.map.map.append("select").attr("class","worldmap__dropdown");b.append("option").attr("value",function(){return this._$scope.issue.getInfographic().getDataPoints().countryData.findCountry}.bind(this)).text(function(){return this._$scope.issue.getInfographic().getDataPoints().countryData.findCountry}.bind(this)),a.each(this.map.countryData,function(a,c){this.map.infographicData[c.id]&&this.map.infographicData[c.id].displayData&&this.map.infographicData[c.id].labelArea&&b.append("option").attr("value",c.id).text(c.displayName)}.bind(this)),a("#"+this._$scope.issue.getId()+" .infographic__wrapper div select").change(function(a){this.map.infographicData[a.target.value]&&this.map.infographicData[a.target.value].displayData&&(this.map.demoMode&&(this.map.demoMode=!1,this._demoMode()),this._selectCountry(a.target.value))}.bind(this))},e.prototype._selectCountry=function(a){var b=this.map.g.select("#"+a);this.map.map.select(".worldmap__label-country").text(""),this.map.map.select(".worldmap__label-data").text(""),this.map.g.selectAll("path").style("fill",function(a){return this.map.infographicData[a.id]&&this.map.infographicData[a.id].displayData?this.map.colorScale(this.map.infographicData[a.id].shadeData):"rgba(0,0,0,0.15)"}.bind(this)),b.style("fill","#fff"),this.map.enableHover[this._windowService.breakpoint()]?this.map.labelContainer.style("left",function(){var b=this.map.infographicData[a].labelArea;return this.map.labelLocation[b].left+"%"}.bind(this)).style("top",function(){var b=this.map.infographicData[a].labelArea;return this.map.labelLocation[b].top+"%"}.bind(this)):this.map.labelContainer.style("left","50%").style("top","50%"),this.map.map.select(".worldmap__label-country").text(this.map.infographicData[a].displayName),this.map.map.select(".worldmap__label-data").text(this.map.infographicData[a].displayData+this.map.infographicData[a].displayUnits)},e.prototype._drawLegend=function(){var a=this.map.map.append("div").attr("class","worldmap__legend"),b=a.selectAll(".worldmap__legend-label").data(this.map.shadeLegend).enter().append("div").attr("class","worldmap__legend-label");b.append("div").style("width","15px").style("height","15px").style("background",function(a,b){return this.map.colorScale(this.map.shadeValues[b]-.01)}.bind(this)),b.append("p").attr("left","20px").attr("top","7.5px").text(function(a){return a})},e.prototype._drawMap=function(){var a=function(a){a&&this.map.infographicData[a.id]&&this.map.infographicData[a.id].displayData&&this.map.enableHover[this._windowService.breakpoint()]&&(this.map.demoMode&&(this.map.demoMode=!1,this._demoMode()),this._selectCountry(a.id))}.bind(this),d=b.geo.mercator().scale(150).translate([this.map.width/2,this.map.height/1.5]),e=b.geo.path().projection(d);this.map.svg=this.map.map.append("svg").attr("preserveAspectRatio","xMidYMid").attr("viewBox","0 0 "+this.map.width+" "+this.map.height).attr("width",this.map.mapWidth).attr("height",this.map.mapWidth*this.map.height/this.map.width),this.map.svg.append("rect").attr("class","worldmap__background").attr("width",this.map.width).attr("height",this.map.height),this.map.g=this.map.svg.append("g"),this.map.g.append("g").attr("class","worldmap__countries").selectAll("path").data(c.feature(this.map.mapData,this.map.mapData.objects.countries).features).enter().append("path").attr("id",function(a){return a.id}).attr("class","worldmap__country").style("fill",function(a){return this.map.infographicData[a.id]&&this.map.infographicData[a.id].displayData?this.map.colorScale(this.map.infographicData[a.id].shadeData):"rgba(0,0,0,0.15)"}.bind(this)).attr("d",e).on("mouseover",a)},e.prototype._setShading=function(a,c){for(var d=.8,e=.8,f=e/a.length,g=[],h=0;h<a.length;h++)g.push("rgba(0,0,0,"+(d-h*f)+")");c&&g.reverse();var i=b.scale.threshold().domain(a).range(g);return i},e.prototype._resize=function(){var b=!1,c=function(){var c=a("#"+this._$scope.issue.getId()+" .infographic__wrapper div").width();b=c>0,b&&(this.map.svg.attr("width",c),this.map.svg.attr("height",c*this.map.height/this.map.width))}.bind(this);a(window).resize(c);var d=setInterval(function(){c(),b&&clearTimeout(d)},5e3)},e.prototype._drawLabel=function(){this.map.labelContainer=this.map.map.append("div").attr("class","worldmap__label-container").style("left",function(){var a=this.map.infographicData[this.map.defaultCountry].labelArea;return this.map.labelLocation[a].left+"%"}.bind(this)).style("top",function(){var a=this.map.infographicData[this.map.defaultCountry].labelArea;return this.map.labelLocation[a].top+"%"}.bind(this)),this.map.labelContainer.append("div").attr("class","worldmap__label worldmap__label-country"),this.map.labelContainer.append("div").attr("class",function(){return this.map.displayReduceSize?"worldmap__label worldmap__label-data worldmap__label-data-font-small":"worldmap__label worldmap__label-data worldmap__label-data-font-normal"}.bind(this))},e.prototype._demoMode=function(){var a=function(){for(var a=!1,b="";!a;){var c=Math.floor(Math.random()*this.map.countryData.length);b=this.map.countryData[c].id,this.map.infographicData[b].displayData&&this.map.infographicData[b].labelArea&&(a=!0)}this._selectCountry(b)}.bind(this);this.map.demoMode&&this.map.enableHover[this._windowService.breakpoint()]?this.map.demoTimer=setInterval(a,2500):clearInterval(this.map.demoTimer)},e.$inject=["$scope","$timeout","dataService","windowService"];var f=function(b,c,d,e){e._getMap.then(function(b){e._$timeout(function(){e._init(b.geoData,b.countryData),e._drawDropdown(),e._drawMap(),e._drawLabel(),e._drawLegend(),e._resize(),e._demoMode(),this._selectCountry(this.map.defaultCountry),a("#"+e._$scope.issue.getId()+" .infographic__wrapper div select").customSelect({customClass:"worldmap__dropdown-select"})}.bind(e))}.bind(e))};return d}),c("lorax/directives/chart-accessible",[],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/chart-accessible.tpl.html"}},b=function(a){this._$scope=a,this._data=a.issue.getInfographic().getDataPoints().sections,a.accessible={data:this._data}};return b.$inject=["$scope"],a}),c("lorax/directives/chart-platform-neutrality",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(a,c,d,e){e._$timeout(function(){for(var a=e._$scope.issue.getInfographic().getDataPoints().percentOfUsers,c=e._$scope.issue.getId(),d=b.select("#"+c+" .infographic__wrapper div"),f=600,g=f,h=.4*f,i=72,j=80,k=200,l=d.append("svg").attr("class","platformneutrality__svg").attr("width",g).attr("height",h),m=b.scale.linear().domain([0,100]).range([0,-2*Math.PI]),n=0;n<a.length;n++){var o=b.svg.arc().innerRadius(i).outerRadius(j).startAngle(0).endAngle(m(a[n].value)),p=b.svg.arc().innerRadius(0).outerRadius(j).startAngle(0).endAngle(m(a[n].value)),q=b.svg.arc().innerRadius(i).outerRadius(j).startAngle(m(a[n].value)).endAngle(m(100));l.append("path").attr("class","platformneutrality__users").attr("d",o).attr("transform","translate("+(n*k+j)+",100)"),l.append("path").attr("class","platformneutrality__wedge").attr("d",p).attr("transform","translate("+(n*k+j)+",100)"),l.append("path").attr("class","platformneutrality__others").attr("d",q).attr("transform","translate("+(n*k+j)+",100)"),l.append("text").attr("class","platformneutrality__label").attr("text-anchor","middle").attr("x",n*k+j).attr("y",210).text(a[n].type.toUpperCase())}l.append("text").attr("class","platformneutrality__value").attr("x",j-30).attr("y",60).text(a[0].value+"%"),l.append("text").attr("class","platformneutrality__value").attr("x",k+j-45).attr("y",85).text(a[1].value+"%"),l.append("text").attr("class","platformneutrality__value").attr("x",2*k+j-55).attr("y",105).text(a[2].value+"%");var r=d.append("div").attr("class","platformneutrality__legend"),s=r.append("div").attr("class","platformneutrality__legendbox");s.append("div").text("Mobile Web"),s.append("div").attr("class","mobile-web");var t=r.append("div").attr("class","platformneutrality__legendbox");t.append("div").text("Native App"),t.append("div").attr("class","native-app")}.bind(e))};return c}),c("lorax/directives/chart-lobbying",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){var a=t.append("g");a.append("text").attr("class","linegraph__firstlast").attr("x",q.left).attr("y",s-s/4).text(function(){return n(j[0].data[0]).replace("G","M")}),a.append("text").attr("class","linegraph__firstlast").attr("x",q.left).attr("y",s-s/3-13).text(function(){return j[0].data[1]});var b=t.append("g").attr("class","linegraph__firstlast");b.append("text").attr("class","linegraph__firstlast").attr("x",r-2*q.right).attr("y",s/3+10).text(function(){return n(j[j.length-1].data[0]).replace("G","M")}),b.append("text").attr("class","linegraph__firstlast").attr("x",r-2*q.right).attr("y",s/4).text(function(){return j[j.length-1].data[1]})}function d(){var a=t.append("g").attr("class","linegraph__legend").attr("x",r-q.right).attr("y",q.top/3).attr("height",100).attr("width",300);a.selectAll("g").data(i.dataLabels).enter().append("g").attr("class","linegraph__legendLabel");var b=a.selectAll(".linegraph__legendLabel");b.selectAll("circle").data(i.dataLabels).enter().append("circle").attr("class",function(a,b){return"linegraph__point_"+b+"_circle"}).attr("cx",function(a,b){return r-q.right-80*b-5*q.right}).attr("cy",q.top/3).attr("r",3),b.selectAll("text").data(i.dataLabels).enter().append("text").attr("class","linegraph__legendtext").attr("x",function(a,b){return r-q.right-80*b-5*q.right+6}).attr("y",q.top/3+4).text(function(a){return a})}function e(){var a,c=b.scale.linear().range([q.left,r-q.right]).domain([b.min(j,function(a){return a.label}),b.max(j,function(a){return a.label})]);a=p?b.svg.axis().scale(c).orient("bottom").tickFormat(function(a,b){return b%2===0?a.toString():null}).tickValues(j.map(function(a,b){return b%2===0?a.label:null})).tickSize(0):b.svg.axis().scale(c).orient("bottom").tickFormat(function(a){return a.toString()}).tickValues(j.map(function(a){return a.label})).tickSize(0);for(var d=a.tickValues.length-1;d--;)null===a.tickValues[d]&&a.tickValues.splice(d,1),null===a.tickFormat[d]&&a.tickFormat.splice(d,1);return t.append("g").attr("class","linegraph__xaxis_year").attr("transform","translate(0,"+(s-q.bottom)+")").call(a),c}function g(){for(var a=e(),c=0;m>c;c++){var d=b.scale.linear().range([s-q.bottom,q.top]).domain([b.min(j,function(a){return.5*a.data[c]}),b.max(j,function(a){return 1.25*a.data[c]})]),f=b.svg.line().x(function(b){return a(b.label)}).y(function(a){return d(a.data[c])}),g=t.append("g");g.append("path").datum(j).attr("class","linegraph__line").attr("d",f),g.selectAll(".point__"+c).data(j).enter().append("g").attr("class",function(){return"linegraph__point_"+c}).append("circle").attr("class",function(){return"linegraph__point_"+c+"_circle"}).attr("cx",function(b){return a(b.label)}).attr("cy",function(a){return d(+a.data[c])}).attr("r",3)}}function h(){var a=b.scale.linear().range([q.left,r-q.right]).domain([b.min(j,function(a){return a.label}),b.max(j,function(a){return a.label})]),c=Math.floor(Math.abs(a(j[0].label)-a(j[1].label))),d=t.append("g").attr("class","linegraph__pattern"),e=j.map(function(a){return a.label});e.forEach(function(b){for(var e=q.top+15;e<s-q.bottom;e+=c){var f=a(b);d.append("line").attr("x1",f+2.5).attr("y1",e).attr("x2",f+2.5).attr("y2",e+5),d.append("line").attr("x1",f).attr("y1",e+2.5).attr("x2",f+5).attr("y2",e+2.5)}})}var i=f._$scope.issue.getInfographic().getDataPoints(),j=i.lineGraphData,k=f._$scope.issue.getId(),l=b.select("#"+k+" .infographic__wrapper div"),m=j[0].data.length,n=b.format(".3s"),o=a("#"+k+" .infographic__wrapper div").width(),p=420>o?!0:!1,q={top:20,right:20,bottom:50,left:10},r=o,s=.7*o,t=l.append("svg").attr("class","linegraph__svg").attr("width",r).attr("height",s);h(),d(),c(),g(),l.append("div").attr("class","linegraph__revolvers").html(i.revolverDescription)}.bind(f))};return c}),c("lorax/directives/chart-cyber-threats",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){b.select(".cyberthreat__descriptionbox").text(o[this.id].description),b.selectAll(".cyberthreat__label").style("border","none"),b.select(this).style("border","3px solid #fff")}function d(){var a=p.append("div").attr("class","cyberthreat__legend");a.append("div").text(g.vulnerabilities).style("border-left","15px solid rgba(0,0,0,0.7)"),a.append("div").text(g.malware).style("border-left","15px solid rgba(0,0,0,0.45)"),a.append("div").text(g.exploits).style("border-left","15px solid rgba(0,0,0,0.2)")}var e=f._$scope.issue.getInfographic().getDataPoints().cyberThreats,g=f._$scope.issue.getInfographic().getDataPoints().labels,h=f._$scope.issue.getId(),i=b.select("#"+h+" .infographic__wrapper div"),j=600,k=600,l=j/5.75,m=k/2.75,n=2*Math.PI,o={};a.each(e,function(a,b){var c="cyberthreat__name-"+b.name.toLowerCase().replace(/[^A-Z0-9]/gi,"_"),d=b.description;o[c]={description:d}});var p=i.append("div").attr("class","cyberthreat__background").style("width",j+"px").style("height",k+"px");d(),p.append("div").attr("class","cyberthreat__descriptionbox").style("left",j/2-(m-m/5)/2-l/2+"px").style("top",k/2-m/5+"px");var q=p.append("div").attr("class","cyberthreat__circlecontainer").style("left",j/2-(m-m/5)/2+"px").style("top",k/2-m/5+"px");q.selectAll("div").data(e).enter().append("div").attr("class","cyberthreat__label").attr("id",function(a){return"cyberthreat__name-"+a.name.toLowerCase().replace(/[^A-Z0-9]/gi,"_")}).style("left",function(a,b){return Math.cos(n*b/e.length)*m+"px"}).style("top",function(a,b){return Math.sin(n*b/e.length)*m+"px"}).style("width",l+"px").style("height",l+"px").style("border-radius",l+"px").style("background",function(a){return 0===a.category?"rgba(0,0,0,0.7)":1===a.category?"rgba(0,0,0,0.45)":2===a.category?"rgba(0,0,0,0.2)":void 0}).on("mouseover",c).append("div").text(function(a){return a.name}),b.select("#cyberthreat__name-spyware").style("border","3px solid #fff"),b.select(".cyberthreat__descriptionbox").text(o["cyberthreat__name-spyware"].description)}.bind(f))};return c}),c("lorax/directives/chart-data-portability",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/chart-data-portability.tpl.html"}},d=function(a,b){this._$scope=a,this._$timeout=b,this._data=a.issue.getInfographic().getDataPoints().dataStandards,this._localeData=a.issue.getInfographic().getDataPoints().labels,a.dataStandards={data:this._data,localeData:this._localeData}};d.$inject=["$scope","$timeout"];var e=function(a,c,d,e){e._$timeout(function(){b.selectAll(".data-portability__symbol").append("div").attr("class",function(a,b){var c=e._$scope.dataStandards.data[b].answer;return"Yes"===c?"data-portability__symbol-yes":"Partial"===c?"data-portability__symbol-partial":"No"===c?"data-portability__symbol-no":void 0})}.bind(e))};return c}),c("lorax/directives/chart-open-source",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/chart-open-source.tpl.html"}},d=function(a,b){this._$scope=a,this._$timeout=b,a.lineGraph={data:a.issue.getInfographic().getDataPoints(),dataLabels:a.issue.getInfographic().getDataPoints().dataLabels}};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){var a,c=b.scale.linear().range([n.left,o-n.right]).domain([b.min(h,function(a){return a.label}),b.max(h,function(a){return a.label})]);a=m?b.svg.axis().scale(c).orient("bottom").tickFormat(function(a,b){return b%2===0?a.toString():null}).tickValues(h.map(function(a,b){return b%2===0?a.label:null})).tickSize(0):b.svg.axis().scale(c).orient("bottom").tickFormat(function(a){return a.toString()}).tickValues(h.map(function(a){return a.label})).tickSize(0);for(var d=a.tickValues.length-1;d--;)null===a.tickValues[d]&&a.tickValues.splice(d,1),null===a.tickFormat[d]&&a.tickFormat.splice(d,1);return q.append("g").attr("class","linegraph__xaxis_year").attr("transform","translate(0,"+(p-n.bottom+10)+")").call(a),c}function d(){for(var a=c(),d=0;k>d;d++){var e=b.scale.linear().range([p-n.bottom,n.top]).domain([0,110]),f=b.svg.line().x(function(b){return a(b.label)}).y(function(a){return e(a.data[d])}),g=q.append("g").attr("class",function(){return 3>d?"opensource__dataset-os":"opensource__dataset-browser"});switch(g.append("path").datum(h).attr("class","linegraph__line opensource__line_"+d).attr("d",f),d){case 0:case 3:g.selectAll(".point__"+d).data(h).enter().append("g").attr("class","opensource__point_"+d+" opensource__point_circle").append("circle").attr("class","opensource__point_"+d+"_circle").attr("cx",function(b){return a(b.label)}).attr("cy",function(a){return e(+a.data[d])}).attr("r",3);break;case 1:case 4:g.selectAll(".point__"+d).data(h).enter().append("g").attr("class","opensource__point_"+d+" opensource__point_square").append("rect").attr("class","opensource__point_"+d+"_circle").attr("x",function(b){return a(b.label)-3}).attr("y",function(a){return e(+a.data[d])-3}).attr("width",6).attr("height",6);break;case 2:case 5:g.selectAll(".point__"+d).data(h).enter().append("g").attr("class","opensource__point_"+d+" opensource__point_triangle").append("polygon").attr("class","opensource__point_"+d+"_circle").attr("points",function(b){var c=a(b.label)+","+(e(+b.data[d])-4),f=a(b.label)+4+","+(e(+b.data[d])+4),g=a(b.label)-4+","+(e(+b.data[d])+4),h=[c,f,g];return h.join(" ")})}}}function e(){var a=b.scale.linear().range([n.left,o-n.right]).domain([b.min(h,function(a){return a.label}),b.max(h,function(a){return a.label})]),c=Math.floor(Math.abs(a(h[0].label)-a(h[1].label)))/2,d=q.append("g").attr("class","linegraph__pattern"),e=h.map(function(a){return a.label});e.forEach(function(b){for(var e=n.top+15;e<p-n.bottom;e+=c){var f=a(b);d.append("line").attr("x1",f+2.5).attr("y1",e).attr("x2",f+2.5).attr("y2",e+5),d.append("line").attr("x1",f).attr("y1",e+2.5).attr("x2",f+5).attr("y2",e+2.5)}})}var g=f._$scope.lineGraph.data,h=g.lineGraphData,i=f._$scope.issue.getId(),j=b.select("#"+i+" .infographic__wrapper div"),k=h[0].data.length,l=a("#"+i+" .infographic__wrapper div").width(),m=420>l?!0:!1,n={top:20,right:20,bottom:50,left:10},o=l/2.25,p=l/2,q=j.insert("svg",".opensource__legend-os").attr("class","opensource__svg").attr("width",o).attr("height",p);e(),d()}.bind(f))};return c}),c("lorax/directives/chart-surveillance",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){b.select(".surveillance__descriptionbox").text(m[this.id].description),b.selectAll(".surveillance__label").style("border","none"),b.select(this).style("border","3px solid #fff")}var d=f._$scope.issue.getInfographic().getDataPoints().surveillance,e=f._$scope.issue.getId(),g=b.select("#"+e+" .infographic__wrapper div"),h=600,i=600,j=h/5.5,k=i/3,l=2*Math.PI,m={};a.each(d,function(a,b){var c="surveillance__name-"+b.name.toLowerCase().replace(/[^A-Z0-9]/gi,"_"),d=b.description;m[c]={description:d}});var n=g.append("div").attr("class","surveillance__background").style("width",h+"px").style("height",i+"px");n.append("div").attr("class","surveillance__descriptionbox").style("left",h/2-(k-k/5)/2-j/2+"px").style("top",i/2-k/5+"px");var o=n.append("div").attr("class","surveillance__circlecontainer").style("left",h/2-(k-k/5)/2+"px").style("top",i/2-k/5+"px");o.selectAll("div").data(d).enter().append("div").attr("class","surveillance__label").attr("id",function(a){return"surveillance__name-"+a.name.toLowerCase().replace(/[^A-Z0-9]/gi,"_")}).style("left",function(a,b){return Math.cos(l*b/d.length)*k+"px"}).style("top",function(a,b){return Math.sin(l*b/d.length)*k+"px"}).on("mouseover",c).append("div").text(function(a){return a.name}),b.select("#surveillance__name-advertising").style("border","3px solid #fff"),b.select(".surveillance__descriptionbox").text(m["surveillance__name-advertising"].description)}.bind(f))};return c}),c("lorax/directives/chart-data-tracking",["jquery"],function(a){var b=function(){return{restrict:"A",replace:!0,scope:!0,controller:c,link:d,templateUrl:"/app/lorax/directives/chart-data-tracking.tpl.html"}},c=function(a,b){this._$scope=a,this._$timeout=b,this._data=a.issue.getInfographic().getDataPoints().tracking,this._localeData=a.issue.getInfographic().getDataPoints().labels,a.tracking={data:this._data,localeData:this._localeData}};c.$inject=["$scope","$timeout"];var d=function(b,c,d,e){var f=function(){var b=a(".data-tracking__tracker-bar"),c=200;b.each(function(b){var d=a(this),f=e._data[b].percent,g=document.createElement("div");g.style.height=f*c/100+"px",g.classList.add("data-tracking__tracker-bar-percent"),d.append(g)})};e._$timeout(f)};return b}),c("lorax/directives/chart-concentration-power",["jquery","d3"],function(a){var b=function(){return{restrict:"A",replace:!0,scope:!0,controller:c,link:d,templateUrl:"/app/lorax/directives/chart-concentration-power.tpl.html"}},c=function(a,b,c,d){this._$scope=a,this._$timeout=b,this._pubSubService=c,this._windowService=d,this._data=a.issue.getInfographic().getDataPoints().totalRevenue,a.revenue={data:this._data},this._stackMultipliers={small:.85,medium:1.65,large:1.65,xlarge:1.65}};c.$inject=["$scope","$timeout","pubSubService","windowService"];var d=function(b,c,d,e){var f=function(){var b=a(".concentration-power__stacks");b.html(""),b.each(function(b){for(var c=a(this),d=e._data[b].amount,f=Math.round(d/5)*e._stackMultipliers[e._windowService.breakpoint()],g=0;f>g;g++)c.append('<div class="concentration-power__stacks-item"></div>')})};e._$timeout(f),e._pubSubService.subscribe("windowService.breakpoint",f)};return b}),c("lorax/directives/chart-public-trust",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){var a=r.append("g").attr("class","linegraph__legend").attr("x",p-o.right).attr("y",o.top/3).attr("height",100).attr("width",300);a.selectAll("g").data(h.dataLabels).enter().append("g").attr("class","linegraph__legendLabel");var b=a.selectAll(".linegraph__legendLabel");b.selectAll("circle").data(h.dataLabels).enter().append("circle").attr("class",function(a,b){return"linegraph__point_"+b+"_circle"}).attr("cx",function(a,b){return p-o.right-80*b-5*o.right}).attr("cy",o.top/3).attr("r",3),b.selectAll("text").data(h.dataLabels).enter().append("text").attr("class","linegraph__legendtext").attr("x",function(a,b){return p-o.right-80*b-5*o.right+6}).attr("y",o.top/3+4).text(function(a){return a})}function d(){var a,c=b.scale.linear().range([o.left,p-o.right]).domain([b.min(i,function(a){return a.label}),b.max(i,function(a){return a.label})]);a=n?b.svg.axis().scale(c).orient("bottom").tickFormat(function(a,b){return b%2===0?a.toString():null}).tickValues(i.map(function(a,b){return b%2===0?a.label:null})).tickSize(0):b.svg.axis().scale(c).orient("bottom").tickFormat(function(a){return a.toString()}).tickValues(i.map(function(a){return a.label})).tickSize(0);for(var d=a.tickValues.length-1;d--;)null===a.tickValues[d]&&a.tickValues.splice(d,1),null===a.tickFormat[d]&&a.tickFormat.splice(d,1);return r.append("g").attr("class","linegraph__xaxis_year").attr("transform","translate(0,"+(q-o.bottom)+")").call(a),c}function e(){for(var a=d(),c=0;l>c;c++){var e=b.scale.linear().range([q-o.top,-o.bottom]).domain([0,100]),f=b.svg.line().x(function(b){return a(b.label)}).y(function(a){return e(a.data[c])}),g=r.append("g");g.append("path").datum(i).attr("class","linegraph__line").attr("d",f),g.selectAll(".point__"+c).data(i).enter().append("g").attr("class",function(){return"linegraph__point_"+c}).append("circle").attr("class",function(){return"linegraph__point_"+c+"_circle"}).attr("cx",function(b){return a(b.label)}).attr("cy",function(a){return e(+a.data[c])}).attr("r",3);var h=b.scale.ordinal().domain(i.map(function(a){return a.data[c].toString()})).rangePoints([o.left,p-o.right],0),j=b.svg.axis().scale(h).orient("bottom").tickSize(0),k=r.append("g").attr("class","linegraph__xaxis_info").attr("transform","translate(0,"+(q-30+17*c)+")").call(j);k.append("circle").attr("class","linegraph__point_"+c+"_circle").attr("cx",3).attr("cy",7.5).attr("r",3)}}function g(){var a=b.scale.linear().range([o.left,p-o.right]).domain([b.min(i,function(a){return a.label}),b.max(i,function(a){return a.label})]),c=Math.floor(Math.abs(a(i[0].label)-a(i[1].label))),d=r.append("g").attr("class","linegraph__pattern"),e=i.map(function(a){return a.label});e.forEach(function(b){for(var e=o.top+15;e<q-o.bottom;e+=c){var f=a(b);d.append("line").attr("x1",f+2.5).attr("y1",e).attr("x2",f+2.5).attr("y2",e+5),d.append("line").attr("x1",f).attr("y1",e+2.5).attr("x2",f+5).attr("y2",e+2.5)}})}var h=f._$scope.issue.getInfographic().getDataPoints(),i=h.lineGraphData,j=f._$scope.issue.getId(),k=b.select("#"+j+" .infographic__wrapper div"),l=i[0].data.length,m=a("#"+j+" .infographic__wrapper div").width(),n=420>m?!0:!1,o={top:20,right:20,bottom:50,left:20},p=m,q=.7*m,r=k.append("svg").attr("class","linegraph__svg").attr("width",p).attr("height",q);g(),c(),e()}.bind(f))};return c}),c("lorax/directives/chart-infrastructure",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){var a=r.append("g").attr("class","linegraph__legend").attr("x",p-o.right).attr("y",o.top/3).attr("height",100).attr("width",300);a.selectAll("g").data(h.dataLabels).enter().append("g").attr("class","linegraph__legendLabel");var b=a.selectAll(".linegraph__legendLabel");b.selectAll("circle").data(h.dataLabels).enter().append("circle").attr("class",function(a,b){return"linegraph__point_"+b+"_circle"}).attr("cx",function(a,b){return p-o.right-110*b-5*o.right}).attr("cy",o.top/3).attr("r",3),b.selectAll("text").data(h.dataLabels).enter().append("text").attr("class","linegraph__legendtext").attr("x",function(a,b){return p-o.right-110*b-5*o.right+6}).attr("y",o.top/3+4).text(function(a){return a})}function d(){var a=b.scale.linear().range([o.left,p-o.right]).domain([b.min(i,function(a){return a.label}),b.max(i,function(a){return a.label})]),c=b.svg.axis().scale(a).orient("bottom").tickFormat(function(a){return a.toString()}).tickValues(i.map(function(a){return a.label})).tickSize(0);return r.append("g").attr("class","linegraph__xaxis_year").attr("transform","translate(0,"+(q-o.bottom)+")").call(c),a}function e(){for(var a=d(),c=0;l>c;c++){var e=b.scale.linear().range([q-o.bottom,o.top]).domain([20,300]),f=b.svg.line().x(function(b){return a(b.label)}).y(function(a){return e(a.data[c])}),g=r.append("g");if(g.append("path").datum(i).attr("class","linegraph__line").attr("d",f),g.selectAll(".point__"+c).data(i).enter().append("g").attr("class",function(){return"linegraph__point_"+c}).append("circle").attr("class",function(){return"linegraph__point_"+c+"_circle"}).attr("cx",function(b){return a(b.label)}).attr("cy",function(a){return e(+a.data[c])}).attr("r",3),n){var h=b.scale.ordinal().domain(i.map(function(a,b){return b%3===0?a.data[c].toString():null})).rangePoints([o.left,p-o.right],0),j=h.domain().indexOf(null);-1!==j&&h.domain().splice(j,1);var k=b.svg.axis().scale(h).orient("bottom").tickSize(0),m=r.append("g").attr("class","linegraph__xaxis_info").attr("transform","translate(0,"+(q-30+17*c)+")").call(k)}else var h=b.scale.ordinal().domain(i.map(function(a){return a.data[c].toString()})).rangePoints([o.left,p-o.right],0),k=b.svg.axis().scale(h).orient("bottom").tickSize(0),m=r.append("g").attr("class","linegraph__xaxis_info").attr("transform","translate(0,"+(q-30+17*c)+")").call(k);m.append("circle").attr("class","linegraph__point_"+c+"_circle").attr("cx",3).attr("cy",7.5).attr("r",3)}}function g(){var a=b.scale.linear().range([o.left,p-o.right]).domain([b.min(i,function(a){return a.label}),b.max(i,function(a){return a.label})]),c=Math.floor(Math.abs(a(i[0].label)-a(i[1].label))),d=r.append("g").attr("class","linegraph__pattern"),e=i.map(function(a){return a.label});e.forEach(function(b){for(var e=o.top+15;e<q-o.bottom;e+=c){var f=a(b);d.append("line").attr("x1",f+2.5).attr("y1",e).attr("x2",f+2.5).attr("y2",e+5),d.append("line").attr("x1",f).attr("y1",e+2.5).attr("x2",f+5).attr("y2",e+2.5)}})}var h=f._$scope.issue.getInfographic().getDataPoints(),i=h.lineGraphData,j=f._$scope.issue.getId(),k=b.select("#"+j+" .infographic__wrapper div"),l=i[0].data.length,m=a("#"+j+" .infographic__wrapper div").width(),n=420>m?!0:!1,o={top:20,right:20,bottom:50,left:30},p=m,q=.7*m,r=k.append("svg").attr("class","linegraph__svg").attr("width",p).attr("height",q);g(),c(),e()}.bind(f))};return c}),c("lorax/directives/chart-identity-control",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}
},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function c(){for(var a=g.append("div").attr("class","identity__legend"),b=d.length-1;b>=0;b--)a.append("div").text(d[b].company).style("border-left","15px solid "+m(d[b].value))}var d=f._$scope.issue.getInfographic().getDataPoints().marketShare,e=f._$scope.issue.getId(),g=b.select("#"+e+" .infographic__wrapper div"),h=a("#"+e+" .infographic__wrapper div").width(),i=h,j=h,k=0,l=b.scale.ordinal().range([.16*i,.18*i,.2*i,.22*i,.24*i,.26*i,.3*i]),m=b.scale.ordinal().range(["rgba(0,0,0,0.8)","rgba(0,0,0,0.15)","rgba(0,0,0,0.7)","rgba(0,0,0,0.6)","rgba(0,0,0,0.5)","rgba(0,0,0,0.4)","rgba(255,255,255,0.5)"]);c();var n=g.append("svg").attr("class","identity__svg").attr("width",i).attr("height",j),o=n.append("g").attr("class","identity__piechart").attr("transform","translate("+.6*i+","+.3*j+")"),p=b.svg.arc().innerRadius(k).outerRadius(l),q=b.layout.pie().value(function(a){return a.value}).sort(null),r=o.selectAll(".arc").data(q(d)).enter().append("g").attr("class","arc");r.append("path").attr("d",b.svg.arc().innerRadius(k).outerRadius(function(a){return l(a.value)})).attr("fill",function(a){return m(a.value)}),r.append("text").attr("class","identity__label-text").attr("transform",function(a,b){var c=[2.4,2.6,2.8,3.1,3.3,3.7,4.55],d=p.centroid(a),e=[d[0]*c[b],d[1]*c[b]];return"translate("+e+")"}).text(function(a){return a.value+"%"})}.bind(f))};return c}),c("lorax/directives/chart-cloud-security",["jquery","d3"],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/chart-cloud-security.tpl.html"}},b=function(a,b){this._$scope=a,this._$timeout=b,this._data=a.issue.getInfographic().getDataPoints().newsSource,a.news={data:this._data}};return b.$inject=["$scope","$timeout"],a}),c("lorax/directives/chart-cyber-bullying",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e}},d=function(a,b){this._$scope=a,this._$timeout=b};d.$inject=["$scope","$timeout"];var e=function(c,d,e,f){f._$timeout(function(){function d(){var a=.4*p,d=.45*p,e=l[0].data.length,f={top:20,right:20,bottom:50,left:10},g=o.append("div").attr("class","cyberbullying__linechart");g.append("h3").attr("class","cyberbullying__title").text(c.issue.getInfographic().getDataPoints().cyberBullyingData.socialNetwork.title);var k=g.append("svg").attr("class","cyberbullying__line-svg").attr("width",a).attr("height",d);j(k,f,a,d),h(k,f,a,d);for(var m=i(k,f,a,d),n=0;e>n;n++){var q=b.scale.linear().range([d-f.bottom,f.top]).domain([80,100]),r=b.svg.line().x(function(a){return m(a.label)}).y(function(a){return q(a.data[n])}),s=k.append("g");s.append("path").datum(l).attr("class","linegraph__line").attr("d",r),s.selectAll(".point__"+n).data(l).enter().append("g").attr("class",function(){return"linegraph__point_"+n}).append("circle").attr("class",function(){return"linegraph__point_"+n+"_circle"}).attr("cx",function(a){return m(a.label)}).attr("cy",function(a){return q(+a.data[n])}).attr("r",3)}}function e(){var a=o.append("div").attr("class","cyberbullying__imagechart");a.append("h3").attr("class","cyberbullying__title").text(m.title),a.append("img").attr("src",m.imageUrl),a.append("p").text(m.copy)}function f(){var a=p,d=.6*p,e=0,f=b.scale.ordinal().range([.12*a,.14*a,.16*a,.18*a,.2*a,.22*a,.26*a]),h=o.append("div").attr("class","cyberbullying__piechart");h.append("h3").attr("class","cyberbullying__title").text(c.issue.getInfographic().getDataPoints().cyberBullyingData.onlineHarassment.title);var i=b.scale.ordinal().range(["rgba(0,0,0,0.15)","rgba(0,0,0,0.8)","rgba(0,0,0,0.7)","rgba(0,0,0,0.6)","rgba(0,0,0,0.5)","rgba(0,0,0,0.4)"]);g(h,i);var j=h.append("svg").attr("class","cyberbullying__pie-svg").attr("width",a).attr("height",d),l=j.append("g").attr("class","cyberbullying__piechart").attr("transform","translate("+.73*a+","+.4*d+")"),m=b.svg.arc().innerRadius(e).outerRadius(f),n=b.layout.pie().value(function(a){return a.value}).sort(null),q=l.selectAll(".arc").data(n(k)).enter().append("g").attr("class","arc");q.append("path").attr("d",b.svg.arc().innerRadius(e).outerRadius(function(a){return f(a.value)})).attr("fill",function(a){return i(a.value)}),q.append("text").attr("class","identity__label-text").attr("transform",function(a,b){var c=[1.15,1.2,1.3,1.5,1.8,2.2],d=m.centroid(a),e=[d[0]*c[b],d[1]*c[b]];return"translate("+e+")"}).text(function(a){return a.value+"%"})}function g(a,b){for(var c=a.append("div").attr("class","cyberbullying__legend"),d=k.length-1;d>=0;d--)c.append("div").text(k[d].name).style("border-left","15px solid "+b(k[d].value))}function h(a,b,c,d){var e=a.append("g");e.append("text").attr("class","linegraph__firstlast").attr("x",b.left).attr("y",d-d/2).text(function(){return l[0].data[0]+"%"});var f=a.append("g").attr("class","linegraph__firstlast");f.append("text").attr("class","linegraph__firstlast").attr("x",c-2*b.right).attr("y",d/2+5).text(function(){return l[l.length-1].data[0]+"%"})}function i(a,c,d,e){var f=b.scale.linear().range([c.left,d-c.right]).domain([b.min(l,function(a){return a.label}),b.max(l,function(a){return a.label})]),g=b.svg.axis().scale(f).orient("bottom").tickFormat(function(a){return a.toString()}).tickValues(l.map(function(a){return a.label})).tickSize(0);return a.append("g").attr("class","linegraph__xaxis_year").attr("transform","translate(0,"+(e-c.bottom)+")").call(g),f}function j(a,c,d,e){var f=b.scale.linear().range([c.left,d-c.right]).domain([b.min(l,function(a){return a.label}),b.max(l,function(a){return a.label})]),g=Math.floor(Math.abs(f(l[0].label)-f(l[1].label))),h=a.append("g").attr("class","linegraph__pattern"),i=l.map(function(a){return a.label});i.forEach(function(a){for(var b=c.top+15;b<e-c.bottom;b+=g){var d=f(a);h.append("line").attr("x1",d+2.5).attr("y1",b).attr("x2",d+2.5).attr("y2",b+5),h.append("line").attr("x1",d).attr("y1",b+2.5).attr("x2",d+5).attr("y2",b+2.5)}})}var k=c.issue.getInfographic().getDataPoints().cyberBullyingData.onlineHarassment.circleData,l=c.issue.getInfographic().getDataPoints().cyberBullyingData.socialNetwork.lineData,m=c.issue.getInfographic().getDataPoints().cyberBullyingData.cyberStalking,n=c.issue.getId(),o=b.select("#"+n+" .infographic__wrapper div"),p=a("#"+n+" .infographic__wrapper div").width();d(),e(),f()})};return c}),c("lorax/directives/chart-zero-rating",["jquery","d3"],function(a,b){var c=function(){return{restrict:"A",replace:!0,scope:!0,controller:d,link:e,templateUrl:"/app/lorax/directives/chart-zero-rating.tpl.html"}},d=function(a,b){this._$scope=a,this._$timeout=b,this._data=this._$scope.issue.getInfographic().getDataPoints().cycle,this._$scope.zeroRating={data:this._data}};d.$inject=["$scope","$timeout"];var e=function(a,c,d,e){e._$timeout(function(){var a=e._$scope.issue.getId(),c=b.select("#"+a+" .infographic__wrapper div"),d=120,f=500,g=500,h=c.insert("svg",":first-child").attr("class","zero-rating__svg").attr("width",f+d).attr("height",g+d);h.insert("circle").attr("class","zero-rating__circle-shape").attr("transform","translate("+d/2+","+d/2+")").attr("cx",f/2).attr("cy",g/2).attr("r",f/2),h.append("polygon").attr("class","zero-rating__triangle-shape").attr("transform","translate("+d/2+","+d/2+")").attr("points",function(){var a=[[f/2,0].join(","),[f/2+Math.cos(Math.PI/6)*f/2,g/2+Math.sin(Math.PI/6)*g/2].join(","),[f/2+-Math.cos(Math.PI/6)*f/2,g/2+Math.sin(Math.PI/6)*g/2].join(",")].join(" ");return a}),c.selectAll(".zero-rating__circle-outside").style("mask","url(#maskStripe)")}.bind(e))};return c}),c("lorax/directives/chart-content-creation",[],function(){var a=function(){return{restrict:"A",replace:!0,scope:!0,controller:b,templateUrl:"/app/lorax/directives/chart-content-creation.tpl.html"}},b=function(a){this._$scope=a,this._data=a.issue.getInfographic().getDataPoints().quote,a.contentCreation={data:this._data}};return b.$inject=["$scope"],a}),c("lorax/directives/experience",["jquery"],function(a){var b=function(){return{restrict:"A",replace:!0,controller:c,link:d,templateUrl:"/app/lorax/directives/experience.tpl.html"}},c=function(a,b,c,d,e){this._$scope=a,this._experienceService=b,this._routesService=c,this._dataService=d,this._windowService=e,this._$scope=a,this._$scope.experience={currentView:"ecosystem",isOpen:!1,isSmall:!0},this._dataService.getMain().then(function(a){this._$scope.experience.localeData=a.getMiscLocale()}.bind(this)),this._routesService.subscribe("change",this.onRouteChange.bind(this)),this._routesService.page&&this.onRouteChange(),this._windowService.subscribe("breakpoint",this.onBreakpointChange.bind(this))};c.$inject=["$scope","experienceService","routesService","dataService","windowService"],c.prototype.switchView=function(a){this._$scope.experience.isSmall="small"===this._windowService.breakpoint(),"ecosystem"===a&&this._$scope.experience.isSmall&&(a="vitals"),this._$scope.experience.isOpen="detail"!==a,this._$scope.experience.currentView=a,this._experienceService.switchView(a)},c.prototype.onRouteChange=function(){"detail"===this._routesService.page?this.switchView("detail"):"experience"===this._routesService.page&&(this._routesService.params.tag?this._experienceService.switchView("tag",this._routesService.params.tag):this.switchView(this._routesService.params.mode||"ecosystem"))},c.prototype.onBreakpointChange=function(a){this._$scope.experience.isSmall="small"===a};var d=function(b,c,d,e){e._experienceService.setContainer(a("#experience-canvas",c))};return b}),c("lorax/directives/detail",["jquery"],function(){var a=function(){return{restrict:"A",replace:!0,controller:b,link:c,templateUrl:"/app/lorax/directives/detail.tpl.html"}},b=function(a,b,c,d,e){this._$scope=a,this._$timeout=b,this._routesService=c,this._windowService=d,this._pubSubService=e,this._$scope.detail={isOpen:!1}};b.$inject=["$scope","$timeout","routesService","windowService","pubSubService"],b.prototype.init=function(){this._routesService.subscribe("change",this.onRouteChange.bind(this)),this._routesService.page&&this.onRouteChange()},b.prototype.onRouteChange=function(){"detail"===this._routesService.page?this.open():this.close()},b.prototype.open=function(){this._$scope.detail.isOpen||(this._windowService.setDetailMode(!0),this._$scope.detail.isOpen=!0);var a=this._routesService.params.topic,b=this._routesService.params.issue;this._pubSubService.publish("detail.open",[b,a]),this._pubSubService.publish("detail.scrollToIssue",[b,a])},b.prototype.close=function(){this._$scope.detail.isOpen&&(this._windowService.setDetailMode(!1),this._$scope.detail.isOpen=!1),this._pubSubService.publish("detail.close")};var c=function(a,b,c,d){d._$timeout(function(){d.init()},500)};return a}),c("lorax/directives/add-infographic-directive",[],function(){var a=function(){return{restrict:"A",scope:!0,controller:b,link:c}},b=function(a,b){this._$scope=a,this._$compile=b};b.$inject=["$scope","$compile"];var c=function(a,b,c,d){var e=c.directiveType;b.removeAttr("data-lorax-add-infographic-directive"),b.attr(e,""),d._$compile(b)(a)};return a}),c("modernizr",[],function(){return window.Modernizr.addTest("highres",function(){if(window.matchMedia){var a=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");if(a&&a.matches)return!0}}),window.Modernizr}),function(a){var b=a({});a.subscribe=function(){b.on.apply(b,arguments)},a.unsubscribe=function(){b.off.apply(b,arguments)},a.publish=function(){b.trigger.apply(b,arguments)}}(jQuery),c("pubsub",["jquery"],function(){}),c("lorax/services/window",["jquery","modernizr","pubsub"],function(a,b){var c=function(c){function d(){return u.breakpoint}function e(b){u.breakpoint=b,c.publish("windowService.breakpoint",[b]),a.publish("windowService.breakpoint",[b])}function f(b){u.dimensions=b,a.publish("windowService.resize",[b])}function g(){return u.dimensions}function h(){return u.scrollTop}function i(b){u.scrollTop=b,a.publish("windowService.scroll",[b])}function j(a,b){b!==!1&&(b=!0),c.publish("windowService.bgMode",[a,b])}function k(b){a.publish("windowService.topic",[b])}function l(a){c.publish("windowService.issue",[a])}function m(b,c){a.subscribe("windowService."+b,function(a,b){c(b)})}function n(b,c){a.unsubscribe("windowService."+b,c)}function o(b,c){a.publish("windowService."+b,c)}function p(a){return b.mq(a)}function q(){var a=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*a}function r(a){c.publish("windowService.detailMode",[a])}function s(b){c.publish("windowService.modalOpen",[b]),a.publish("windowService.onOpenModal",[b])}function t(a,b){c.publish("windowService.sidePanelOpen",[a,b])}var u={breakpoint:"small",dimensions:{}};return this.pubSubService=c,{setBreakpoint:e,breakpoint:d,setDimensions:f,dimensions:g,setScrollTop:i,scrollTop:h,setBgMode:j,setTopic:k,setIssue:l,subscribe:m,unsubscribe:n,publish:o,mq:p,getDeviceWindowHeight:q,setDetailMode:r,setModalOpen:s,setSidePanelOpen:t}};return c.$inject=["pubSubService"],c}),c("lorax/services/scroll",["angular","jquery"],function(a,b){var c=function(a,c,d){return this.$timeout=c,this.windowService=d,this.$q=a,this._elements={},this._scrollElems={all:b("body, html"),body:b("body")},this._scrollOffset=0,this.SCROLL_DEFAULTS={animate:!0,delay:0,easing:"swing",duration:1e3},this.stopEventPropagation=function(a){return a.preventDefault(),a.stopPropagation(!0),!1},{go:this.go.bind(this),setOffset:this.setOffset.bind(this)}};return c.$inject=["$q","$timeout","windowService","pubSubService"],c.prototype.setOffset=function(a){return"undefined"!=typeof a?void(this._scrollOffset=a):void(this._scrollOffset=0)},c.prototype.go=function(a,c){function d(){var c="mousewheel DOMMouseScroll touchmove";b(window).bind(c,i.stopEventPropagation.bind(i));var d=!1;if(null===f){var j="object"==typeof a?a:b("#"+a);j.length&&(f=j.offset().top)}i._scrollElems.all.animate({scrollTop:f+i._scrollOffset},h.duration,h.easing,function(){e.resolve(),d||(b(window).unbind(c),d=!0,g&&"function"==typeof h.callback&&h.callback("end"))})}var e=this.$q.defer();c.animate===!1&&(c.duration=0);var f,g,h=b.extend({},this.SCROLL_DEFAULTS,c),i=this;switch(this.setOffset(h.offset),a){case"top":f=0;break;case"bottom":f=this._scrollElems.body.height();break;default:h.callback&&h.callback("start"),f=null}return this.$timeout(d,h.delay),e.promise},c}),c("lorax/services/utils",[],function(){var a=function(){function a(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}return{getURLParameter:a}};return a}),c("lorax/services/pubsub",["jquery"],function(a){var b=function(){var b={};return{publish:function(c,d){b[c]&&a.each(b[c],function(){this.apply(null,d||[])})},subscribe:function(a,c){return b[a]||(b[a]=[]),b[a].push(c),[a,c]},unsubscribe:function(c){var d=c[0];b[d]&&a.each(b[d],function(a){this===c[1]&&b[d].splice(a,1)})}}};return b}),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:v+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function d(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:v+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function e(a){return a.charCodeAt(0)}function f(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function g(a){var b=-1,c=a.length,e=a[0],f=a[c/2|0],g=a[c-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=j();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=j();for(i.array=a,i.cache=h,i.push=d;++b<c;)i.push(a[b]);return i}function h(a){return"\\"+ab[a]}function i(){return r.pop()||[]}function j(){return s.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function m(a){a.length=0,r.length<x&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<x&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(c){function d(a){return a&&"object"==typeof a&&!ke(a)&&Rd.call(a,"__wrapped__")?a:new r(a)}function r(a,b){this.__chain__=!!b,this.__wrapped__=a}function s(a){function b(){if(d){var a=o(d);Sd.apply(a,arguments)}if(this instanceof b){var f=ab(c.prototype),g=c.apply(f,a||arguments);return Lb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return je(b,a),b}function x(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Lb(a);if(!g)return a;var h=Kd.call(a);if(!X[h]||!he.nodeClass&&l(a))return a;var j=fe[h];switch(h){case P:case Q:return new j(+a);case T:case W:return new j(a);case V:return f=j(a.source,D.exec(a)),f.lastIndex=a.lastIndex,f}var k=ke(a);if(b){var n=!d;d||(d=i()),e||(e=i());for(var p=d.length;p--;)if(d[p]==a)return e[p];f=k?j(a.length):{}}else f=k?o(a):ve({},a);return k&&(Rd.call(a,"index")&&(f.index=a.index),Rd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(k?ue:ye)(a,function(a,g){f[g]=x(a,b,c,d,e)}),n&&(m(d),m(e)),f):f}function ab(a){return Lb(a)?Yd(a):{}}function cb(a,b,c){if("function"!=typeof a)return ed;if("undefined"!=typeof b&&"prototype"in a){var d=a.__bindData__;if("undefined"==typeof d&&(he.funcNames&&(d=!a.name),d=d||!he.funcDecomp,!d)){var e=Pd.call(a);he.funcNames||(d=!E.test(e)),d||(d=I.test(e),je(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pc(a,b)}return a}function db(a){function b(){var a=i?g:this;if(e){var n=o(e);Sd.apply(n,arguments)}if((f||k)&&(n||(n=o(arguments)),f&&Sd.apply(n,f),k&&n.length<h))return d|=16,db([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=ab(c.prototype);var p=c.apply(a,n);return Lb(p)?p:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return je(b,a),b}function eb(c,d){var e=-1,f=pb(),h=c?c.length:0,i=h>=w&&f===a,j=[];if(i){var k=g(d);k?(f=b,d=k):i=!1}for(;++e<h;){var l=c[e];f(d,l)<0&&j.push(l)}return i&&n(d),j}function fb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(ke(h)||tb(h))){b||(h=fb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function hb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,j=typeof b;if(!(a!==a||a&&_[h]||b&&_[j]))return!1;if(null==a||null==b)return a===b;var k=Kd.call(a),n=Kd.call(b);if(k==N&&(k=U),n==N&&(n=U),k!=n)return!1;switch(k){case P:case Q:return+a==+b;case T:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case V:case W:return a==Dd(b)}var o=k==O;if(!o){var p=Rd.call(a,"__wrapped__"),q=Rd.call(b,"__wrapped__");if(p||q)return hb(p?a.__wrapped__:a,q?b.__wrapped__:b,c,d,e,f);if(k!=U||!he.nodeClass&&(l(a)||l(b)))return!1;var r=!he.argsObject&&tb(a)?Bd:a.constructor,s=!he.argsObject&&tb(b)?Bd:b.constructor;if(r!=s&&!(Kb(r)&&r instanceof r&&Kb(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=i()),f||(f=i());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),o){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=hb(a[w],x,c,d,e,f)););else if(!(g=hb(a[v],x,c,d,e,f)))break}}else xe(b,function(b,h,i){return Rd.call(i,h)?(v++,g=Rd.call(a,h)&&hb(a[h],b,c,d,e,f)):void 0}),g&&!d&&xe(a,function(a,b,c){return Rd.call(c,b)?g=--v>-1:void 0});return e.pop(),f.pop(),t&&(m(e),m(f)),g}function ib(a,b,c,d,e){(ke(b)?dc:ye)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=ke(b))||ze(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?ke(j)?j:[]:ze(j)?j:{}),d.push(b),e.push(j),l||ib(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function jb(a,b){return a+Od(ee()*(b-a+1))}function kb(c,d,e){var f=-1,h=pb(),j=c?c.length:0,k=[],l=!d&&j>=w&&h===a,o=e||l?i():k;if(l){var p=g(o);h=b,o=p}for(;++f<j;){var q=c[f],r=e?e(q,f,c):q;(d?!f||o[o.length-1]!==r:h(o,r)<0)&&((e||l)&&o.push(r),k.push(q))}return l?(m(o.array),n(o)):e&&m(o),k}function lb(a){return function(b,c,e){var f={};if(c=d.createCallback(c,e,3),ke(b))for(var g=-1,h=b.length;++g<h;){var i=b[g];a(f,i,c(i,g,b),b)}else ue(b,function(b,d,e){a(f,b,c(b,d,e),e)});return f}}function mb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Kb(a))throw new Ed;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=a&&a.__bindData__;if(l&&l!==!0)return l=o(l),l[2]&&(l[2]=o(l[2])),l[3]&&(l[3]=o(l[3])),g&&!(1&l[1])&&(l[4]=e),!g&&1&l[1]&&(b|=8),i&&!(4&l[1])&&(l[5]=f),j&&Sd.apply(l[2]||(l[2]=[]),c),k&&Wd.apply(l[3]||(l[3]=[]),d),l[1]|=b,mb.apply(null,l);var m=1==b||17===b?s:db;return m([a,b,c,d,e,f])}function nb(){$.shadowedProps=L,$.array=$.bottom=$.loop=$.top="",$.init="iterable",$.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)$[c]=a[c];var d=$.args;$.firstArg=/^[^,]+/.exec(d)[0];var e=yd("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+ie($)+"\n}");return e(cb,R,Gd,Rd,u,tb,ke,Qb,$.keys,Hd,_,ge,W,Id,Kd)}function ob(a){return qe[a]}function pb(){var b=(b=d.indexOf)===yc?a:b;return b}function qb(a){return"function"==typeof a&&Ld.test(a)}function rb(a){var b,c;return!a||Kd.call(a)!=U||(b=a.constructor,Kb(b)&&!(b instanceof b))||!he.argsClass&&tb(a)||!he.nodeClass&&l(a)?!1:he.ownLast?(xe(a,function(a,b,d){return c=Rd.call(d,b),!1}),c!==!1):(xe(a,function(a,b){c=b}),"undefined"==typeof c||Rd.call(a,c))}function sb(a){return re[a]}function tb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==N||!1}function ub(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),x(a,b,"function"==typeof c&&cb(c,d,1))}function vb(a,b,c){return x(a,!0,"function"==typeof b&&cb(b,c,1))}function wb(a,b){var c=ab(a);return b?ve(c,b):c}function xb(a,b,c){var e;return b=d.createCallback(b,c,3),ye(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function yb(a,b,c){var e;return b=d.createCallback(b,c,3),Ab(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function zb(a,b,c){var d=[];xe(a,function(a,b){d.push(b,a)});var e=d.length;for(b=cb(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Ab(a,b,c){var d=me(a),e=d.length;for(b=cb(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Bb(a){var b=[];return xe(a,function(a,c){Kb(a)&&b.push(c)}),b.sort()}function Cb(a,b){return a?Rd.call(a,b):!1}function Db(a){for(var b=-1,c=me(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Eb(a){return a===!0||a===!1||a&&"object"==typeof a&&Kd.call(a)==P||!1}function Fb(a){return a&&"object"==typeof a&&Kd.call(a)==Q||!1}function Gb(a){return a&&1===a.nodeType||!1}function Hb(a){var b=!0;if(!a)return b;var c=Kd.call(a),d=a.length;return c==O||c==W||(he.argsClass?c==N:tb(a))||c==U&&"number"==typeof d&&Kb(a.splice)?!d:(ye(a,function(){return b=!1}),b)}function Ib(a,b,c,d){return hb(a,b,"function"==typeof c&&cb(c,d,2))}function Jb(a){return $d(a)&&!_d(parseFloat(a))}function Kb(a){return"function"==typeof a}function Lb(a){return!!a&&!!_[typeof a]}function Mb(a){return Ob(a)&&a!=+a}function Nb(a){return null===a}function Ob(a){return"number"==typeof a||a&&"object"==typeof a&&Kd.call(a)==T||!1}function Pb(a){return a&&_[typeof a]&&Kd.call(a)==V||!1}function Qb(a){return"string"==typeof a||a&&"object"==typeof a&&Kd.call(a)==W||!1}function Rb(a){return"undefined"==typeof a}function Sb(a,b,c){var e={};return b=d.createCallback(b,c,3),ye(a,function(a,c,d){e[c]=b(a,c,d)}),e}function Tb(a){var b=arguments,c=2;if(!Lb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=cb(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=o(arguments,1,c),f=-1,g=i(),h=i();++f<c;)ib(a,e[f],d,g,h);return m(g),m(h),a}function Ub(a,b,c){var e={};if("function"!=typeof b){var f=[];xe(a,function(a,b){f.push(b)}),f=eb(f,fb(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else b=d.createCallback(b,c,3),xe(a,function(a,c,d){b(a,c,d)||(e[c]=a)});return e}function Vb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wb(a,b,c){var e={};if("function"!=typeof b)for(var f=-1,g=fb(arguments,!0,!1,1),h=Lb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else b=d.createCallback(b,c,3),xe(a,function(a,c,d){b(a,c,d)&&(e[c]=a)});return e}function Xb(a,b,c,e){var f=ke(a);if(null==c)if(f)c=[];else{var g=a&&a.constructor,h=g&&g.prototype;c=ab(h)}return b&&(b=d.createCallback(b,e,4),(f?ue:ye)(a,function(a,d,e){return b(c,a,d,e)})),c}function Yb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;)e[b]=a[c[b]];return e}function Zb(a){var b=arguments,c=-1,d=fb(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=ud(e);for(he.unindexedChars&&Qb(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $b(a,b,c){var d=-1,e=pb(),f=a?a.length:0,g=!1;return c=(0>c?be(0,f+c):c)||0,ke(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qb(a)?a.indexOf(b,c):e(a,b,c))>-1:ue(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function _b(a,b,c){var e=!0;if(b=d.createCallback(b,c,3),ke(a))for(var f=-1,g=a.length;++f<g&&(e=!!b(a[f],f,a)););else ue(a,function(a,c,d){return e=!!b(a,c,d)});return e}function ac(a,b,c){var e=[];if(b=d.createCallback(b,c,3),ke(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];b(h,f,a)&&e.push(h)}else ue(a,function(a,c,d){b(a,c,d)&&e.push(a)});return e}function bc(a,b,c){if(b=d.createCallback(b,c,3),!ke(a)){var e;return ue(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}for(var f=-1,g=a.length;++f<g;){var h=a[f];if(b(h,f,a))return h}}function cc(a,b,c){var e;return b=d.createCallback(b,c,3),ec(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}function dc(a,b,c){if(b&&"undefined"==typeof c&&ke(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ue(a,b,c);return a}function ec(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:cb(b,c,3),ke(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=me(a);e=f.length}else he.unindexedChars&&Qb(a)&&(d=a.split(""));ue(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fc(a,b){var c=o(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=ud("number"==typeof f?f:0);return dc(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gc(a,b,c){var e=-1,f=a?a.length:0,g=ud("number"==typeof f?f:0);if(b=d.createCallback(b,c,3),ke(a))for(;++e<f;)g[e]=b(a[e],e,a);else ue(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function hc(a,b,c){var f=-1/0,g=f;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&ke(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>g&&(g=j)}else b=null==b&&Qb(a)?e:d.createCallback(b,c,3),ue(a,function(a,c,d){var e=b(a,c,d);e>f&&(f=e,g=a)});return g}function ic(a,b,c){var f=1/0,g=f;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&ke(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];g>j&&(g=j)}else b=null==b&&Qb(a)?e:d.createCallback(b,c,3),ue(a,function(a,c,d){var e=b(a,c,d);f>e&&(f=e,g=a)});return g}function jc(a,b,c,e){var f=arguments.length<3;if(b=d.createCallback(b,e,4),ke(a)){var g=-1,h=a.length;for(f&&(c=a[++g]);++g<h;)c=b(c,a[g],g,a)}else ue(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)});return c}function kc(a,b,c,e){var f=arguments.length<3;return b=d.createCallback(b,e,4),ec(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)}),c}function lc(a,b,c){return b=d.createCallback(b,c,3),ac(a,function(a,c,d){return!b(a,c,d)})}function mc(a,b,c){if(a&&"number"!=typeof a.length?a=Yb(a):he.unindexedChars&&Qb(a)&&(a=a.split("")),null==b||c)return a?a[jb(0,a.length-1)]:q;var d=nc(a);return d.length=ce(be(0,b),d.length),d}function nc(a){var b=-1,c=a?a.length:0,d=ud("number"==typeof c?c:0);return dc(a,function(a){var c=jb(0,++b);d[b]=d[c],d[c]=a}),d}function oc(a){var b=a?a.length:0;return"number"==typeof b?b:me(a).length}function pc(a,b,c){var e;if(b=d.createCallback(b,c,3),ke(a))for(var f=-1,g=a.length;++f<g&&!(e=b(a[f],f,a)););else ue(a,function(a,c,d){return!(e=b(a,c,d))});return!!e}function qc(a,b,c){var e=-1,g=ke(b),h=a?a.length:0,k=ud("number"==typeof h?h:0);for(g||(b=d.createCallback(b,c,3)),dc(a,function(a,c,d){var f=k[++e]=j();g?f.criteria=gc(b,function(b){return a[b]}):(f.criteria=i())[0]=b(a,c,d),f.index=e,f.value=a}),h=k.length,k.sort(f);h--;){var l=k[h];k[h]=l.value,g||m(l.criteria),n(l)}return k}function rc(a){return a&&"number"==typeof a.length?he.unindexedChars&&Qb(a)?a.split(""):o(a):Yb(a)}function sc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tc(a){return eb(a,fb(arguments,!0,!0,1))}function uc(a,b,c){var e=-1,f=a?a.length:0;for(b=d.createCallback(b,c,3);++e<f;)if(b(a[e],e,a))return e;return-1}function vc(a,b,c){var e=a?a.length:0;for(b=d.createCallback(b,c,3);e--;)if(b(a[e],e,a))return e;return-1}function wc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=-1;for(b=d.createCallback(b,c,3);++g<f&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[0]:q;return o(a,0,ce(be(0,e),f))}function xc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gc(a,c,d)),fb(a,b)}function yc(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?be(0,e+d):d||0}else if(d){var f=Hc(b,c);return b[f]===c?f:-1}return a(b,c,d)}function zc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=d.createCallback(b,c,3);g--&&b(a[g],g,a);)e++}else e=null==b||c?1:b||e;return o(a,0,ce(be(0,f-e),f))}function Ac(){for(var c=[],d=-1,e=arguments.length,f=i(),h=pb(),j=h===a,k=i();++d<e;){var l=arguments[d];(ke(l)||tb(l))&&(c.push(l),f.push(j&&l.length>=w&&g(d?c[d]:k)))}var o=c[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(l=o[p],(s?b(s,l):h(k,l))<0){for(d=e,(s||k).push(l);--d;)if(s=f[d],(s?b(s,l):h(c[d],l))<0)continue a;r.push(l)}}for(;e--;)s=f[e],s&&n(s);return m(f),m(k),r}function Bc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=d.createCallback(b,c,3);g--&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[f-1]:q;return o(a,be(0,f-e))}function Cc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?be(0,d+c):ce(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Dc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vd.call(a,f--,1),e--);return a}function Ec(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=be(0,Md((b-a)/(c||1))),f=ud(e);++d<e;)f[d]=a,a+=c;return f}function Fc(a,b,c){var e=-1,f=a?a.length:0,g=[];for(b=d.createCallback(b,c,3);++e<f;){var h=a[e];b(h,e,a)&&(g.push(h),Vd.call(a,e--,1),f--)}return g}function Gc(a,b,c){if("number"!=typeof b&&null!=b){var e=0,f=-1,g=a?a.length:0;for(b=d.createCallback(b,c,3);++f<g&&b(a[f],f,a);)e++}else e=null==b||c?1:be(0,b);return o(a,e)}function Hc(a,b,c,e){var f=0,g=a?a.length:f;for(c=c?d.createCallback(c,e,1):ed,b=c(b);g>f;){var h=f+g>>>1;
c(a[h])<b?f=h+1:g=h}return f}function Ic(){return kb(fb(arguments,!0,!0))}function Jc(a,b,c,e){return"boolean"!=typeof b&&null!=b&&(e=c,c="function"!=typeof b&&e&&e[b]===a?null:b,b=!1),null!=c&&(c=d.createCallback(c,e,3)),kb(a,b,c)}function Kc(a){return eb(a,o(arguments,1))}function Lc(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(ke(c)||tb(c))var d=d?kb(eb(d,c).concat(eb(c,d))):c}return d||[]}function Mc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hc(De(a,"length")):0,d=ud(0>c?0:c);++b<c;)d[b]=De(a,b);return d}function Nc(a,b){var c=-1,d=a?a.length:0,e={};for(!b&&d&&!ke(a[0])&&(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Oc(a,b){if(!Kb(b))throw new Ed;return function(){return--a<1?b.apply(this,arguments):void 0}}function Pc(a,b){return arguments.length>2?mb(a,17,o(arguments,2),null,b):mb(a,1,null,null,b)}function Qc(a){for(var b=arguments.length>1?fb(arguments,!0,!1,1):Bb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=mb(a[e],1,null,null,a)}return a}function Rc(a,b){return arguments.length>2?mb(b,19,o(arguments,2),null,a):mb(b,3,null,null,a)}function Sc(){for(var a=arguments,b=a.length;b--;)if(!Kb(a[b]))throw new Ed;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tc(a,b){return b="number"==typeof b?b:+b||a.length,mb(a,4,null,null,null,b)}function Uc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Kb(a))throw new Ed;if(b=be(0,b)||0,c===!0){var n=!0;m=!1}else Lb(c)&&(n=c.leading,l="maxWait"in c&&(be(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fe()-g);if(0>=c){e&&Nd(e);var l=j;e=i=j=q,l&&(k=Fe(),f=a.apply(h,d),!i&&!e&&(d=h=null))}else i=Ud(o,c)},p=function(){i&&Nd(i),e=i=j=q,(m||l!==b)&&(k=Fe(),f=a.apply(h,d),!i&&!e&&(d=h=null))};return function(){if(d=arguments,g=Fe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{!e&&!n&&(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Nd(e)),k=g,f=a.apply(h,d)):e||(e=Ud(p,q))}return r&&i?i=Nd(i):!i&&b!==l&&(i=Ud(o,b)),c&&(r=!0,f=a.apply(h,d)),r&&!i&&!e&&(d=h=null),f}}function Vc(a){if(!Kb(a))throw new Ed;var b=o(arguments,1);return Ud(function(){a.apply(q,b)},1)}function Wc(a,b){if(!Kb(a))throw new Ed;var c=o(arguments,2);return Ud(function(){a.apply(q,c)},b)}function Xc(a,b){if(!Kb(a))throw new Ed;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):v+arguments[0];return Rd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yc(a){var b,c;if(!Kb(a))throw new Ed;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zc(a){return mb(a,16,o(arguments,1))}function $c(a){return mb(a,32,null,o(arguments,1))}function _c(a,b,c){var d=!0,e=!0;if(!Kb(a))throw new Ed;return c===!1?d=!1:Lb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),Y.leading=d,Y.maxWait=b,Y.trailing=e,Uc(a,b,Y)}function ad(a,b){return mb(b,16,[a])}function bd(a){return function(){return a}}function cd(a,b,c){var d=typeof a;if(null==a||"function"==d)return cb(a,b,c);if("object"!=d)return id(a);var e=me(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Lb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=hb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dd(a){return null==a?"":Dd(a).replace(te,ob)}function ed(a){return a}function fd(a,b,c){var e=!0,f=b&&Bb(b);b&&(c||f.length)||(null==c&&(c=b),g=r,b=a,a=d,f=Bb(b)),c===!1?e=!1:Lb(c)&&"chain"in c&&(e=c.chain);var g=a,h=Kb(g);dc(f,function(c){var d=a[c]=b[c];h&&(g.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,f=[c];Sd.apply(f,arguments);var h=d.apply(a,f);if(e||b){if(c===h&&Lb(h))return this;h=new g(h),h.__chain__=b}return h})})}function gd(){return c._=Jd,this}function hd(){}function id(a){return function(b){return b[a]}}function jd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):!e&&"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ee();return ce(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return jb(a,b)}function kd(a,b){if(a){var c=a[b];return Kb(c)?a[b]():c}}function ld(a,b,c){var e=d.templateSettings;a=Dd(a||""),c=we({},c,e);var f,g=we({},c.imports,e.imports),i=me(g),j=Yb(g),k=0,l=c.interpolate||H,m="__p += '",n=Cd((c.escape||H).source+"|"+l.source+"|"+(l===F?C:H).source+"|"+(c.evaluate||H).source+"|$","g");a.replace(n,function(b,c,d,e,g,i){return d||(d=e),m+=a.slice(k,i).replace(J,h),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),m+="';\n";var o=c.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(z,""):m).replace(A,"$1").replace(B,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+M++ +"]")+"\n*/";try{var s=yd(i,"return "+m+r).apply(q,j)}catch(t){throw t.source=m,t}return b?s(b):(s.source=m,s)}function md(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=ud(a);for(b=cb(b,c,1);++d<a;)e[d]=b(d);return e}function nd(a){return null==a?"":Dd(a).replace(se,sb)}function od(a){var b=++t;return Dd(null==a?"":a)+b}function pd(a){return a=new r(a),a.__chain__=!0,a}function qd(a,b){return b(a),a}function rd(){return this.__chain__=!0,this}function sd(){return Dd(this.__wrapped__)}function td(){return this.__wrapped__}c=c?gb.defaults(bb.Object(),c,gb.pick(bb,K)):bb;var ud=c.Array,vd=c.Boolean,wd=c.Date,xd=c.Error,yd=c.Function,zd=c.Math,Ad=c.Number,Bd=c.Object,Cd=c.RegExp,Dd=c.String,Ed=c.TypeError,Fd=[],Gd=xd.prototype,Hd=Bd.prototype,Id=Dd.prototype,Jd=c._,Kd=Hd.toString,Ld=Cd("^"+Dd(Kd).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Md=zd.ceil,Nd=c.clearTimeout,Od=zd.floor,Pd=yd.prototype.toString,Qd=qb(Qd=Bd.getPrototypeOf)&&Qd,Rd=Hd.hasOwnProperty,Sd=Fd.push,Td=Hd.propertyIsEnumerable,Ud=c.setTimeout,Vd=Fd.splice,Wd=Fd.unshift,Xd=function(){try{var a={},b=qb(b=Bd.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Yd=qb(Yd=Bd.create)&&Yd,Zd=qb(Zd=ud.isArray)&&Zd,$d=c.isFinite,_d=c.isNaN,ae=qb(ae=Bd.keys)&&ae,be=zd.max,ce=zd.min,de=c.parseInt,ee=zd.random,fe={};fe[O]=ud,fe[P]=vd,fe[Q]=wd,fe[S]=yd,fe[U]=Bd,fe[T]=Ad,fe[V]=Cd,fe[W]=Dd;var ge={};ge[O]=ge[Q]=ge[T]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ge[P]=ge[W]={constructor:!0,toString:!0,valueOf:!0},ge[R]=ge[S]=ge[V]={constructor:!0,toString:!0},ge[U]={constructor:!0},function(){for(var a=L.length;a--;){var b=L[a];for(var c in ge)Rd.call(ge,c)&&!Rd.call(ge[c],b)&&(ge[c][b]=!1)}}(),r.prototype=d.prototype;var he=d.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},d=[];a.prototype={valueOf:1,y:1};for(var e in new a)d.push(e);for(e in arguments);he.argsClass=Kd.call(arguments)==N,he.argsObject=arguments.constructor==Bd&&!(arguments instanceof ud),he.enumErrorProps=Td.call(Gd,"message")||Td.call(Gd,"name"),he.enumPrototypes=Td.call(a,"prototype"),he.funcDecomp=!qb(c.WinRTError)&&I.test(p),he.funcNames="string"==typeof yd.name,he.nonEnumArgs=0!=e,he.nonEnumShadows=!/valueOf/.test(d),he.ownLast="x"!=d[0],he.spliceObjects=(Fd.splice.call(b,0,1),!b[0]),he.unindexedChars="x"[0]+Bd("x")[0]!="xx";try{he.nodeClass=Kd.call(document)!=U||!!({toString:0}+"")}catch(f){he.nodeClass=!0}}(1),d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:d}};var ie=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",he.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):he.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),he.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),he.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(he.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),he.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",he.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||he.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yd||(ab=function(){function a(){}return function(b){if(Lb(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var je=Xd?function(a,b){Z.value=b,Xd(a,"__bindData__",Z)}:hd;he.argsClass||(tb=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rd.call(a,"callee")&&!Td.call(a,"callee")||!1});var ke=Zd||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==O||!1},le=nb({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),me=ae?function(a){return Lb(a)?he.enumPrototypes&&"function"==typeof a||he.nonEnumArgs&&a.length&&tb(a)?le(a):ae(a):[]}:le,ne={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:me,loop:"if (callback(iterable[index], index, collection) === false) return result"},oe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:me,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pe={top:"if (!objectTypes[typeof iterable]) return result;\n"+ne.top,array:!1},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re=Db(qe),se=Cd("("+me(re).join("|")+")","g"),te=Cd("["+me(qe).join("")+"]","g"),ue=nb(ne),ve=nb(oe,{top:oe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),we=nb(oe),xe=nb(ne,pe,{useHas:!1}),ye=nb(ne,pe);Kb(/x/)&&(Kb=function(a){return"function"==typeof a&&Kd.call(a)==S});var ze=Qd?function(a){if(!a||Kd.call(a)!=U||!he.argsClass&&tb(a))return!1;var b=a.valueOf,c=qb(b)&&(c=Qd(b))&&Qd(c);return c?a==c||Qd(a)==c:rb(a)}:rb,Ae=lb(function(a,b,c){Rd.call(a,c)?a[c]++:a[c]=1}),Be=lb(function(a,b,c){(Rd.call(a,c)?a[c]:a[c]=[]).push(b)}),Ce=lb(function(a,b,c){a[c]=b}),De=gc,Ee=ac,Fe=qb(Fe=wd.now)&&Fe||function(){return(new wd).getTime()},Ge=8==de(y+"08")?de:function(a,b){return de(Qb(a)?a.replace(G,""):a,b||0)};return d.after=Oc,d.assign=ve,d.at=Zb,d.bind=Pc,d.bindAll=Qc,d.bindKey=Rc,d.chain=pd,d.compact=sc,d.compose=Sc,d.constant=bd,d.countBy=Ae,d.create=wb,d.createCallback=cd,d.curry=Tc,d.debounce=Uc,d.defaults=we,d.defer=Vc,d.delay=Wc,d.difference=tc,d.filter=ac,d.flatten=xc,d.forEach=dc,d.forEachRight=ec,d.forIn=xe,d.forInRight=zb,d.forOwn=ye,d.forOwnRight=Ab,d.functions=Bb,d.groupBy=Be,d.indexBy=Ce,d.initial=zc,d.intersection=Ac,d.invert=Db,d.invoke=fc,d.keys=me,d.map=gc,d.mapValues=Sb,d.max=hc,d.memoize=Xc,d.merge=Tb,d.min=ic,d.omit=Ub,d.once=Yc,d.pairs=Vb,d.partial=Zc,d.partialRight=$c,d.pick=Wb,d.pluck=De,d.property=id,d.pull=Dc,d.range=Ec,d.reject=lc,d.remove=Fc,d.rest=Gc,d.shuffle=nc,d.sortBy=qc,d.tap=qd,d.throttle=_c,d.times=md,d.toArray=rc,d.transform=Xb,d.union=Ic,d.uniq=Jc,d.values=Yb,d.where=Ee,d.without=Kc,d.wrap=ad,d.xor=Lc,d.zip=Mc,d.zipObject=Nc,d.collect=gc,d.drop=Gc,d.each=dc,d.eachRight=ec,d.extend=ve,d.methods=Bb,d.object=Nc,d.select=ac,d.tail=Gc,d.unique=Jc,d.unzip=Mc,fd(d),d.clone=ub,d.cloneDeep=vb,d.contains=$b,d.escape=dd,d.every=_b,d.find=bc,d.findIndex=uc,d.findKey=xb,d.findLast=cc,d.findLastIndex=vc,d.findLastKey=yb,d.has=Cb,d.identity=ed,d.indexOf=yc,d.isArguments=tb,d.isArray=ke,d.isBoolean=Eb,d.isDate=Fb,d.isElement=Gb,d.isEmpty=Hb,d.isEqual=Ib,d.isFinite=Jb,d.isFunction=Kb,d.isNaN=Mb,d.isNull=Nb,d.isNumber=Ob,d.isObject=Lb,d.isPlainObject=ze,d.isRegExp=Pb,d.isString=Qb,d.isUndefined=Rb,d.lastIndexOf=Cc,d.mixin=fd,d.noConflict=gd,d.noop=hd,d.now=Fe,d.parseInt=Ge,d.random=jd,d.reduce=jc,d.reduceRight=kc,d.result=kd,d.runInContext=p,d.size=oc,d.some=pc,d.sortedIndex=Hc,d.template=ld,d.unescape=nd,d.uniqueId=od,d.all=_b,d.any=pc,d.detect=bc,d.findWhere=bc,d.foldl=jc,d.foldr=kc,d.include=$b,d.inject=jc,fd(function(){var a={};return ye(d,function(b,c){d.prototype[c]||(a[c]=b)}),a}(),!1),d.first=wc,d.last=Bc,d.sample=mc,d.take=wc,d.head=wc,ye(d,function(a,b){var c="sample"!==b;d.prototype[b]||(d.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new r(f,e):f})}),d.VERSION="2.4.1",d.prototype.chain=rd,d.prototype.toString=sd,d.prototype.value=td,d.prototype.valueOf=td,ue(["join","pop","shift"],function(a){var b=Fd[a];d.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new r(c,a):c}}),ue(["push","reverse","sort","unshift"],function(a){var b=Fd[a];d.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),ue(["concat","slice","splice"],function(a){var b=Fd[a];d.prototype[a]=function(){return new r(b.apply(this.__wrapped__,arguments),this.__chain__)}}),he.spliceObjects||ue(["pop","shift","splice"],function(a){var b=Fd[a],c="splice"==a;d.prototype[a]=function(){var a=this.__chain__,d=this.__wrapped__,e=b.apply(d,arguments);return 0===d.length&&delete d[0],a||c?new r(e,a):e}}),d}var q,r=[],s=[],t=0,u={},v=+new Date+"",w=75,x=40,y=" 	\f\n\r\u2028\u2029",z=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,D=/\w*$/,E=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,G=RegExp("^["+y+"]*0+(?=.$)"),H=/($^)/,I=/\bthis\b/,J=/['\n\r\t\u2028\u2029\\]/g,K=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],L=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],M=0,N="[object Arguments]",O="[object Array]",P="[object Boolean]",Q="[object Date]",R="[object Error]",S="[object Function]",T="[object Number]",U="[object Object]",V="[object RegExp]",W="[object String]",X={};X[S]=!1,X[N]=X[O]=X[P]=X[Q]=X[T]=X[U]=X[V]=X[W]=!0;var Y={leading:!1,maxWait:0,trailing:!1},Z={configurable:!1,enumerable:!1,value:null,writable:!1},$={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},_={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ab={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},bb=_[typeof window]&&window||this,cb=_[typeof exports]&&exports&&!exports.nodeType&&exports,db=_[typeof module]&&module&&!module.nodeType&&module,eb=db&&db.exports===cb&&cb,fb=_[typeof global]&&global;fb&&(fb.global===fb||fb.window===fb)&&(bb=fb);var gb=p();"function"==typeof c&&"object"==typeof c.amd&&c.amd?(bb._=gb,c("lodash",[],function(){return gb})):cb&&db?eb?(db.exports=gb)._=gb:cb._=gb:bb._=gb}.call(this),c("lorax/models/base",[],function(){var a=function(){};return a.prototype._localize=function(a,b,c,d){var e="";return e=a&&a[b]&&a[b][c]&&a[b][c][d]?a[b][c][d]:["WARN {unloc: ",b,":",c,":",d,"}"].join("")},a}),c("lorax/models/tag",["lorax/models/base"],function(a){var b=function(a,b){this._id=a,this._name=this._localize(b,"tags",a,"name"),this._issues=[]};return b.prototype=new a,b.prototype.getId=function(){return this._id},b.prototype.getURLId=function(){return this._id.replace(" ","-").toLowerCase()},b.prototype.getName=function(){return this._name},b.prototype.getIssues=function(){return this._issues},b.prototype.addIssue=function(a){this._issues.push(a)},b.prototype.getRelated=function(){return this.getIssues()},b}),c("lorax/models/infographic",["d3"],function(){var a=function(a,b,c){this._id=a,this._type=b,this._header=c.header,this._subheader=c.subheader,this._dataPoints=c.dataPoints,this._source=c.source};return a.prototype.getId=function(){return this._id},a.prototype.getType=function(){return this._type},a.prototype.getHeader=function(){return this._header},a.prototype.getSubheader=function(){return this._subheader},a.prototype.getDataPoints=function(){return this._dataPoints},a.prototype.getSourceName=function(){return this._source.name},a.prototype.getSourceLocation=function(){return this._source.src},a.prototype.drawInfographic=function(){switch(this._type){case"line-graph":this.drawLineGraph();break;case"bar-graph":this.drawBarGraph();break;case"map":this.drawMap();break;case"static-image":this.drawStaticImage()}},a}),c("lorax/models/issue",["lodash","lorax/models/tag","lorax/models/infographic"],function(a,b,c){var d=function(d,e,f,g,h,i,j){this._parent=d,this._id=e,this._name=h.name,this._status=f.status,this._title=h.title,this._narrative=h.narrative,this._mozActionCopy=h.mozActionCopy,this._yourActionCopy=h.yourActionCopy,this._mozActionLink=h.mozActionLink,this._yourActionLink=h.yourActionLink,this._infographicType=f.infographicType,this._infographicOverflow=f.infographicOverflow,this._infographicIsMap=f.infographicMap,this._shareUrl=h.shareUrl,this._tags=[],this._infographic=new c(this._id,this._infographicType,i),this._miscLocale=j.misc;for(var k in f.tags){var l=a.filter(g,function(a){return a.getId()===f.tags[k]});if(l.length>0)this._tags.push(l[0]),l[0].addIssue(this);else{var m=new b(f.tags[k],j);this._tags.push(m),m.addIssue(this),g.push(m)}}};return d.prototype.getParent=function(){return this._parent},d.prototype.getParentId=function(){return this._parent._id},d.prototype.getId=function(){return this._id},d.prototype.getName=function(){return this._name},d.prototype.getCssClass=function(){return this._name.toLowerCase().replace(/[\W_]+/g,"-")},d.prototype.getTitle=function(){return this._title},d.prototype.getNarrative=function(){return this._narrative},d.prototype.getMozActionCopy=function(){return this._mozActionCopy},d.prototype.getYourActionCopy=function(){return this._yourActionCopy},d.prototype.getMozActionLink=function(){return this._mozActionLink},d.prototype.getYourActionLink=function(){return this._yourActionLink},d.prototype.getInfographicType=function(){return this._infographicType},d.prototype.getInfographicOverflow=function(){return this._infographicOverflow},d.prototype.getInfographicIsMap=function(){return this._infographicIsMap},d.prototype.getInfographic=function(){return this._infographic},d.prototype.getTags=function(){return this._tags},d.prototype.getRelated=function(){return this._parent.getIssues()},d.prototype.getStatus=function(){return this._status},d.prototype.getStatusDescription=function(){var a="";switch(this._status){case 0:a="go";break;case 1:a="wait";break;case 2:a="stop"}return a},d.prototype.getUrl=function(){return"/detail/"+this.getParentId()+"/"+this.getId()},d.prototype.getShareUrl=function(){return this._shareUrl},d.prototype.getMiscLocale=function(){return this._miscLocale},d}),c("lorax/models/topic",["lorax/models/issue"],function(a){var b=function(b,c,d,e,f,g){this._id=b,this._name=e.name,this._tagline=e.tagline,this._issues=[];for(var h in c.issues)this._issues.push(new a(this,h,c.issues[h],d,e.issues[h],f[h],g))};return b.prototype.getId=function(){return this._id},b.prototype.getName=function(){return this._name},b.prototype.getTagline=function(){return this._tagline},b.prototype.getIssues=function(){return this._issues},b}),c("lorax/models/main",["lodash","lorax/models/topic"],function(a,b){var c=function(a,c,d){this._tags=[],this._topics=[],this._modals=c.modals,this._miscLocale=c.misc;for(var e in a.topics)this._topics.push(new b(e,a.topics[e],this._tags,c.topics[e],d,c))};return c.prototype.getTopics=function(){return this._topics},c.prototype.getIssues=function(){return a.reduce(this._topics,function(a,b){return a=a.concat(b.getIssues())},[])},c.prototype.getTopicById=function(b){return a.find(this.getTopics(),function(a){return a._id===b})},c.prototype.getIssueById=function(b){return a.find(this.getIssues(),function(a){return a._id===b})},c.prototype.getTagByURLId=function(b){return a.find(this.getTags(),function(a){return a.getURLId()===b})},c.prototype.getTags=function(){return this._tags},c.prototype.getModals=function(){return this._modals},c.prototype.getMiscLocale=function(){return this._miscLocale},c}),c("lorax/services/data",["angular","lorax/models/main"],function(a,b){var c=function(a,c){function d(){return["/data","base","main.json"].join("/")}function e(a){return["/data","i18n",a,"main.json"].join("/")}function f(a){return["/data","i18n",a,"infographics.json"].join("/")}function g(){return["/data","base","countries.topo.json"].join("/")}function h(a){return["/data","i18n",a,"country-data.json"].join("/")}function i(a){if(a=a||this._defaultLocale,this._mainData)this._mainDefer.resolve(this._mainData);else{if(this._requestingMain)return this._mainDefer.promise;this._requestingMain=!0,this._mainDefer=this._$q.defer();var c=this._$http.get(d()),g=this._$http.get(e(a)),h=this._$http.get(f(a));c.then(function(a){a.data&&g.then(function(c){c.data&&h.then(function(d){this._mainData=new b(a.data,c.data,d.data),this._mainDefer.resolve(this._mainData)}.bind(this))}.bind(this))}.bind(this))["catch"](function(a){this._mainDefer.reject(a)}.bind(this))}return this._mainDefer.promise}function j(a){if(a=a||this._defaultLocale,this._mapData)this._mapDefer.resolve(this._mapData);else{if(this._requestingMap)return this._mapDefer.promise;this._requestingMap=!0,this._mapDefer=this._$q.defer();var b=this._$http.get(g()),c=this._$http.get(h(a));b.then(function(a){a.data&&c.then(function(b){this._mapData={geoData:a.data,countryData:b.data},this._mapDefer.resolve(this._mapData)}.bind(this))}.bind(this))["catch"](function(a){this._mapDefer.reject(a)}.bind(this))}return this._mapDefer.promise}return this._defaultLocale="en-US",this._$http=a,this._$q=c,this._mainData,this._requestingMain,this._mainDefer,this._mapData,this._requestingMap,this._mapDefer,{getMain:i.bind(this),getMap:j.bind(this)}};return c.$inject=["$http","$q"],c});var d=function(){var a=Date.now(),b=a,c=0,d=1/0,e=0,f=0,g=1/0,h=0,i=0,j=0,k=document.createElement("div");k.id="stats",k.addEventListener("mousedown",function(a){a.preventDefault(),s(++j%2)},!1),k.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",k.appendChild(l);var m=document.createElement("div");m.id="fpsText",m.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="FPS",l.appendChild(m);var n=document.createElement("div");for(n.id="fpsGraph",n.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(n);74>n.children.length;){var o=document.createElement("span");o.style.cssText="width:1px;height:30px;float:left;background-color:#113",n.appendChild(o)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",k.appendChild(p);var q=document.createElement("div");q.id="msText",q.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",q.innerHTML="MS",p.appendChild(q);var r=document.createElement("div");for(r.id="msGraph",r.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(r);74>r.children.length;)o=document.createElement("span"),o.style.cssText="width:1px;height:30px;float:left;background-color:#131",r.appendChild(o);var s=function(a){switch(j=a){case 0:l.style.display="block",p.style.display="none";break;case 1:l.style.display="none",p.style.display="block"}};return{REVISION:12,domElement:k,setMode:s,begin:function(){a=Date.now()},end:function(){var j=Date.now();c=j-a,d=Math.min(d,c),e=Math.max(e,c),q.textContent=c+" MS ("+d+"-"+e+")";var k=Math.min(30,30-30*(c/200));return r.appendChild(r.firstChild).style.height=k+"px",i++,j>b+1e3&&(f=Math.round(1e3*i/(j-b)),g=Math.min(g,f),h=Math.max(h,f),m.textContent=f+" FPS ("+g+"-"+h+")",k=Math.min(30,30-30*(f/100)),n.appendChild(n.firstChild).style.height=k+"px",b=j,i=0),j},update:function(){a=this.end()}}};"object"==typeof module&&(module.exports=d),c("stats",function(a){return function(){var b;return b||a.Stats}}(this)),function(){var a=this,b=b||{};b.WEBGL_RENDERER=0,b.CANVAS_RENDERER=1,b.VERSION="v2.2.3",b.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},b.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},b._UID=0,"undefined"!=typeof Float32Array?(b.Float32Array=Float32Array,b.Uint16Array=Uint16Array,b.Uint32Array=Uint32Array,b.ArrayBuffer=ArrayBuffer):(b.Float32Array=Array,b.Uint16Array=Array),b.INTERACTION_FREQUENCY=30,b.AUTO_PREVENT_DEFAULT=!0,b.PI_2=2*Math.PI,b.RAD_TO_DEG=180/Math.PI,b.DEG_TO_RAD=Math.PI/180,b.RETINA_PREFIX="@2x",b.dontSayHello=!1,b.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},b.sayHello=function(a){if(!b.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var c=["%c %c %c Pixi.js "+b.VERSION+" - "+a+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,c)}else window.console&&void 0;b.dontSayHello=!0}},b.Point=function(a,b){this.x=a||0,this.y=b||0},b.Point.prototype.clone=function(){return new b.Point(this.x,this.y)},b.Point.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},b.Point.prototype.constructor=b.Point,b.Rectangle=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},b.Rectangle.prototype.clone=function(){return new b.Rectangle(this.x,this.y,this.width,this.height)},b.Rectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},b.Rectangle.prototype.constructor=b.Rectangle,b.EmptyRectangle=new b.Rectangle(0,0,0,0),b.Polygon=function(a){if(a instanceof Array||(a=Array.prototype.slice.call(arguments)),a[0]instanceof b.Point){for(var c=[],d=0,e=a.length;e>d;d++)c.push(a[d].x,a[d].y);a=c}this.closed=!0,this.points=a},b.Polygon.prototype.clone=function(){var a=this.points.slice();return new b.Polygon(a)},b.Polygon.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;d>e;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&(i-g)*(b-h)/(j-h)+g>a;k&&(c=!c)}return c},b.Polygon.prototype.constructor=b.Polygon,b.Circle=function(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0},b.Circle.prototype.clone=function(){return new b.Circle(this.x,this.y,this.radius)},b.Circle.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},b.Circle.prototype.getBounds=function(){return new b.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},b.Circle.prototype.constructor=b.Circle,b.Ellipse=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},b.Ellipse.prototype.clone=function(){return new b.Ellipse(this.x,this.y,this.width,this.height)},b.Ellipse.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},b.Ellipse.prototype.getBounds=function(){return new b.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},b.Ellipse.prototype.constructor=b.Ellipse,b.RoundedRectangle=function(a,b,c,d,e){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=e||20},b.RoundedRectangle.prototype.clone=function(){return new b.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},b.RoundedRectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},b.RoundedRectangle.prototype.constructor=b.RoundedRectangle,b.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},b.Matrix.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},b.Matrix.prototype.toArray=function(a){this.array||(this.array=new b.Float32Array(9));var c=this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},b.Matrix.prototype.apply=function(a,c){return c=c||new b.Point,c.x=this.a*a.x+this.c*a.y+this.tx,c.y=this.b*a.x+this.d*a.y+this.ty,c},b.Matrix.prototype.applyInverse=function(a,c){c=c||new b.Point;var d=1/(this.a*this.d+this.c*-this.b);return c.x=this.d*d*a.x+-this.c*d*a.y+(this.ty*this.c-this.tx*this.d)*d,c.y=this.a*d*a.y+-this.b*d*a.x+(-this.ty*this.a+this.tx*this.b)*d,c},b.Matrix.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},b.Matrix.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},b.Matrix.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},b.Matrix.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},b.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},b.identityMatrix=new b.Matrix,b.DisplayObject=function(){this.position=new b.Point,this.scale=new b.Point(1,1),this.pivot=new b.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new b.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new b.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1
},b.DisplayObject.prototype.constructor=b.DisplayObject,Object.defineProperty(b.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(a){this._interactive=a,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(b.DisplayObject.prototype,"worldVisible",{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}}),Object.defineProperty(b.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.isMask=!1),this._mask=a,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(b.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(a){if(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].passes,e=0;e<d.length;e++)b.push(d[e]);this._filterBlock={target:this,filterPasses:b}}this._filters=a}}),Object.defineProperty(b.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==a&&(a?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=a)}}),b.DisplayObject.prototype.updateTransform=function(){var a,c,d,e,f,g,h=this.parent.worldTransform,i=this.worldTransform;this.rotation%b.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),a=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y,f=this.position.x,g=this.position.y,(this.pivot.x||this.pivot.y)&&(f-=this.pivot.x*a+this.pivot.y*d,g-=this.pivot.x*c+this.pivot.y*e),i.a=a*h.a+c*h.c,i.b=a*h.b+c*h.d,i.c=d*h.a+e*h.c,i.d=d*h.b+e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty):(a=this.scale.x,e=this.scale.y,f=this.position.x-this.pivot.x*a,g=this.position.y-this.pivot.y*e,i.a=a*h.a,i.b=a*h.b,i.c=e*h.c,i.d=e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},b.DisplayObject.prototype.displayObjectUpdateTransform=b.DisplayObject.prototype.updateTransform,b.DisplayObject.prototype.getBounds=function(a){return a=a,b.EmptyRectangle},b.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(b.identityMatrix)},b.DisplayObject.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0)},b.DisplayObject.prototype.generateTexture=function(a,c,d){var e=this.getLocalBounds(),f=new b.RenderTexture(0|e.width,0|e.height,d,c,a);return b.DisplayObject._tempMatrix.tx=-e.x,b.DisplayObject._tempMatrix.ty=-e.y,f.render(this,b.DisplayObject._tempMatrix),f},b.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},b.DisplayObject.prototype.toGlobal=function(a){return this.displayObjectUpdateTransform(),this.worldTransform.apply(a)},b.DisplayObject.prototype.toLocal=function(a,b){return b&&(a=b.toGlobal(a)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(a)},b.DisplayObject.prototype._renderCachedSprite=function(a){this._cachedSprite.worldAlpha=this.worldAlpha,a.gl?b.Sprite.prototype._renderWebGL.call(this._cachedSprite,a):b.Sprite.prototype._renderCanvas.call(this._cachedSprite,a)},b.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|a.width,0|a.height);else{var c=new b.RenderTexture(0|a.width,0|a.height);this._cachedSprite=new b.Sprite(c),this._cachedSprite.worldTransform=this.worldTransform}var d=this._filters;this._filters=null,this._cachedSprite.filters=d,b.DisplayObject._tempMatrix.tx=-a.x,b.DisplayObject._tempMatrix.ty=-a.y,this._cachedSprite.texture.render(this,b.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._filters=d,this._cacheAsBitmap=!0},b.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},b.DisplayObject.prototype._renderWebGL=function(a){a=a},b.DisplayObject.prototype._renderCanvas=function(a){a=a},b.DisplayObject._tempMatrix=new b.Matrix,Object.defineProperty(b.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(a){this.position.x=a}}),Object.defineProperty(b.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(a){this.position.y=a}}),b.DisplayObjectContainer=function(){b.DisplayObject.call(this),this.children=[]},b.DisplayObjectContainer.prototype=Object.create(b.DisplayObject.prototype),b.DisplayObjectContainer.prototype.constructor=b.DisplayObjectContainer,Object.defineProperty(b.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1,this._width=a}}),Object.defineProperty(b.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1,this._height=a}}),b.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},b.DisplayObjectContainer.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.stage&&a.setStageReference(this.stage),a;throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},b.DisplayObjectContainer.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);if(0>c||0>d)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[c]=b,this.children[d]=a}},b.DisplayObjectContainer.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error("The supplied DisplayObject must be a child of the caller");return b},b.DisplayObjectContainer.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);this.children.splice(c,1),this.children.splice(b,0,a)},b.DisplayObjectContainer.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[a]},b.DisplayObjectContainer.prototype.removeChild=function(a){var b=this.children.indexOf(a);if(-1!==b)return this.removeChildAt(b)},b.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return this.stage&&b.removeStageReference(),b.parent=void 0,this.children.splice(a,1),b},b.DisplayObjectContainer.prototype.removeChildren=function(a,b){var c=a||0,d="number"==typeof b?b:this.children.length,e=d-c;if(e>0&&d>=e){for(var f=this.children.splice(c,e),g=0;g<f.length;g++){var h=f[g];this.stage&&h.removeStageReference(),h.parent=void 0}return f}if(0===e&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},b.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()},b.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=b.DisplayObjectContainer.prototype.updateTransform,b.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return b.EmptyRectangle;for(var a,c,d,e=1/0,f=1/0,g=-1/0,h=-1/0,i=!1,j=0,k=this.children.length;k>j;j++){var l=this.children[j];l.visible&&(i=!0,a=this.children[j].getBounds(),e=e<a.x?e:a.x,f=f<a.y?f:a.y,c=a.width+a.x,d=a.height+a.y,g=g>c?g:c,h=h>d?h:d)}if(!i)return b.EmptyRectangle;var m=this._bounds;return m.x=e,m.y=f,m.width=g-e,m.height=h-f,m},b.DisplayObjectContainer.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=b.identityMatrix;for(var c=0,d=this.children.length;d>c;c++)this.children[c].updateTransform();var e=this.getBounds();return this.worldTransform=a,e},b.DisplayObjectContainer.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d.setStageReference(a)}},b.DisplayObjectContainer.prototype.removeStageReference=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];c.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},b.DisplayObjectContainer.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);var b,c;if(this._mask||this._filters){for(this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),a.spriteBatch.start()}else for(b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},b.DisplayObjectContainer.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);this._mask&&a.maskManager.pushMask(this._mask,a);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d._renderCanvas(a)}this._mask&&a.maskManager.popMask(a)}},b.Sprite=function(a){b.DisplayObjectContainer.call(this),this.anchor=new b.Point,this.texture=a||b.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=b.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},b.Sprite.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Sprite.prototype.constructor=b.Sprite,Object.defineProperty(b.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(b.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),b.Sprite.prototype.setTexture=function(a){this.texture=a,this.cachedTint=16777215},b.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},b.Sprite.prototype.getBounds=function(a){var b=this.texture.frame.width,c=this.texture.frame.height,d=b*(1-this.anchor.x),e=b*-this.anchor.x,f=c*(1-this.anchor.y),g=c*-this.anchor.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=-1/0,p=-1/0,q=1/0,r=1/0;if(0===j&&0===k)0>i&&(i*=-1),0>l&&(l*=-1),q=i*e+m,o=i*d+m,r=l*g+n,p=l*f+n;else{var s=i*e+k*g+m,t=l*g+j*e+n,u=i*d+k*g+m,v=l*g+j*d+n,w=i*d+k*f+m,x=l*f+j*d+n,y=i*e+k*f+m,z=l*f+j*e+n;q=q>s?s:q,q=q>u?u:q,q=q>w?w:q,q=q>y?y:q,r=r>t?t:r,r=r>v?v:r,r=r>x?x:r,r=r>z?z:r,o=s>o?s:o,o=u>o?u:o,o=w>o?w:o,o=y>o?y:o,p=t>p?t:p,p=v>p?v:p,p=x>p?x:p,p=z>p?z:p}var A=this._bounds;return A.x=q,A.width=o-q,A.y=r,A.height=p-r,this._currentBounds=A,A},b.Sprite.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){var b,c;if(this._mask||this._filters){var d=a.spriteBatch;for(this._filters&&(d.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(d.stop(),a.maskManager.pushMask(this.mask,a),d.start()),d.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);d.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),d.start()}else for(a.spriteBatch.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},b.Sprite.prototype._renderCanvas=function(a){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,a.context.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a),this.texture.valid){var c=this.texture.baseTexture.resolution/a.resolution;a.context.globalAlpha=this.worldAlpha,a.smoothProperty&&a.scaleMode!==this.texture.baseTexture.scaleMode&&(a.scaleMode=this.texture.baseTexture.scaleMode,a.context[a.smoothProperty]=a.scaleMode===b.scaleModes.LINEAR);var d=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,e=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;a.roundPixels?(a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution|0,this.worldTransform.ty*a.resolution|0),d|=0,e|=0):a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution,this.worldTransform.ty*a.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=b.CanvasTinter.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,d/c,e/c,this.texture.crop.width/c,this.texture.crop.height/c)):a.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,d/c,e/c,this.texture.crop.width/c,this.texture.crop.height/c)}for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.Sprite.fromFrame=function(a){var c=b.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache'+this);return new b.Sprite(c)},b.Sprite.fromImage=function(a,c,d){var e=b.Texture.fromImage(a,c,d);return new b.Sprite(e)},b.SpriteBatch=function(a){b.DisplayObjectContainer.call(this),this.textureThing=a,this.ready=!1},b.SpriteBatch.prototype=Object.create(b.DisplayObjectContainer.prototype),b.SpriteBatch.prototype.constructor=b.SpriteBatch,b.SpriteBatch.prototype.initWebGL=function(a){this.fastSpriteBatch=new b.WebGLFastSpriteBatch(a),this.ready=!0},b.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},b.SpriteBatch.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(a.gl),a.spriteBatch.stop(),a.shaderManager.setShader(a.shaderManager.fastShader),this.fastSpriteBatch.begin(this,a),this.fastSpriteBatch.render(this),a.spriteBatch.start())},b.SpriteBatch.prototype._renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.children.length){var b=a.context;b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var c=this.worldTransform,d=!0,e=0;e<this.children.length;e++){var f=this.children[e];if(f.visible){var g=f.texture,h=g.frame;if(b.globalAlpha=this.worldAlpha*f.alpha,f.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),d=!1),b.drawImage(g.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width*f.scale.x+f.position.x+.5|0,f.anchor.y*-h.height*f.scale.y+f.position.y+.5|0,h.width*f.scale.x,h.height*f.scale.y);else{d||(d=!0),f.displayObjectUpdateTransform();var i=f.worldTransform;a.roundPixels?b.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):b.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),b.drawImage(g.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width+.5|0,f.anchor.y*-h.height+.5|0,h.width,h.height)}}}}},b.MovieClip=function(a){b.Sprite.call(this,a[0]),this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},b.MovieClip.prototype=Object.create(b.Sprite.prototype),b.MovieClip.prototype.constructor=b.MovieClip,Object.defineProperty(b.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),b.MovieClip.prototype.stop=function(){this.playing=!1},b.MovieClip.prototype.play=function(){this.playing=!0},b.MovieClip.prototype.gotoAndStop=function(a){this.playing=!1,this.currentFrame=a;var b=this.currentFrame+.5|0;this.setTexture(this.textures[b%this.textures.length])},b.MovieClip.prototype.gotoAndPlay=function(a){this.currentFrame=a,this.playing=!0},b.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var a=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||a<this.textures.length?this.setTexture(this.textures[a%this.textures.length]):a>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},b.MovieClip.fromFrames=function(a){for(var c=[],d=0;d<a.length;d++)c.push(new b.Texture.fromFrame(a[d]));return new b.MovieClip(c)},b.MovieClip.fromImages=function(a){for(var c=[],d=0;d<a.length;d++)c.push(new b.Texture.fromImage(a[d]));return new b.MovieClip(c)},b.FilterBlock=function(){this.visible=!0,this.renderable=!0},b.FilterBlock.prototype.constructor=b.FilterBlock,b.Text=function(a,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,b.Sprite.call(this,b.Texture.fromCanvas(this.canvas)),this.setText(a),this.setStyle(c)},b.Text.prototype=Object.create(b.Sprite.prototype),b.Text.prototype.constructor=b.Text,Object.defineProperty(b.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(b.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),b.Text.prototype.setStyle=function(a){a=a||{},a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,a.dropShadow=a.dropShadow||!1,a.dropShadowAngle=a.dropShadowAngle||Math.PI/6,a.dropShadowDistance=a.dropShadowDistance||4,a.dropShadowColor=a.dropShadowColor||"black",this.style=a,this.dirty=!0},b.Text.prototype.setText=function(a){this.text=a.toString()||" ",this.dirty=!0},b.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var a=this.text;this.style.wordWrap&&(a=this.wordWrap(this.text));for(var b=a.split(/(?:\r\n|\r|\n)/),c=[],d=0,e=this.determineFontProperties(this.style.font),f=0;f<b.length;f++){var g=this.context.measureText(b[f]).width;c[f]=g,d=Math.max(d,g)}var h=d+this.style.strokeThickness;this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution;var i=e.fontSize+this.style.strokeThickness,j=i*b.length;this.style.dropShadow&&(j+=this.style.dropShadowDistance),this.canvas.height=j*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var k,l;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var m=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,n=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.fill&&this.context.fillText(b[f],k+m,l+n)}for(this.context.fillStyle=this.style.fill,f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(b[f],k,l),this.style.fill&&this.context.fillText(b[f],k,l);this.updateTexture()},b.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},b.Text.prototype._renderWebGL=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),b.Sprite.prototype._renderWebGL.call(this,a)},b.Text.prototype._renderCanvas=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),b.Sprite.prototype._renderCanvas.call(this,a)},b.Text.prototype.determineFontProperties=function(a){var c=b.Text.fontPropertiesCache[a];if(!c){c={};var d=b.Text.fontPropertiesCanvas,e=b.Text.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,d.width=f,d.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|Mq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;g>i;i++){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(c.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}c.descent=i-g,c.descent+=6,c.fontSize=c.ascent+c.descent,b.Text.fontPropertiesCache[a]=c}return c},b.Text.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=0;d<c.length;d++){for(var e=this.style.wordWrapWidth,f=c[d].split(" "),g=0;g<f.length;g++){var h=this.context.measureText(f[g]).width,i=h+this.context.measureText(" ").width;0===g||i>e?(g>0&&(b+="\n"),b+=f[g],e=this.style.wordWrapWidth-h):(e-=i,b+=" "+f[g])}d<c.length-1&&(b+="\n")}return b},b.Text.prototype.getBounds=function(a){return this.dirty&&(this.updateText(),this.dirty=!1),b.Sprite.prototype.getBounds.call(this,a)},b.Text.prototype.destroy=function(a){this.context=null,this.canvas=null,this.texture.destroy(void 0===a?!0:a)},b.Text.fontPropertiesCache={},b.Text.fontPropertiesCanvas=document.createElement("canvas"),b.Text.fontPropertiesContext=b.Text.fontPropertiesCanvas.getContext("2d"),b.BitmapText=function(a,c){b.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(a),this.setStyle(c),this.updateText(),this.dirty=!1},b.BitmapText.prototype=Object.create(b.DisplayObjectContainer.prototype),b.BitmapText.prototype.constructor=b.BitmapText,b.BitmapText.prototype.setText=function(a){this.text=a||" ",this.dirty=!0},b.BitmapText.prototype.setStyle=function(a){a=a||{},a.align=a.align||"left",this.style=a;var c=a.font.split(" ");this.fontName=c[c.length-1],this.fontSize=c.length>=2?parseInt(c[c.length-2],10):b.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=a.tint},b.BitmapText.prototype.updateText=function(){for(var a=b.BitmapText.fonts[this.fontName],c=new b.Point,d=null,e=[],f=0,g=[],h=0,i=this.fontSize/a.size,j=0;j<this.text.length;j++){var k=this.text.charCodeAt(j);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(j)))g.push(c.x),f=Math.max(f,c.x),h++,c.x=0,c.y+=a.lineHeight,d=null;else{var l=a.chars[k];l&&(d&&l.kerning[d]&&(c.x+=l.kerning[d]),e.push({texture:l.texture,line:h,charCode:k,position:new b.Point(c.x+l.xOffset,c.y+l.yOffset)}),c.x+=l.xAdvance,d=k)}}g.push(c.x),f=Math.max(f,c.x);var m=[];for(j=0;h>=j;j++){var n=0;"right"===this.style.align?n=f-g[j]:"center"===this.style.align&&(n=(f-g[j])/2),m.push(n)}var o=this.children.length,p=e.length,q=this.tint||16777215;for(j=0;p>j;j++){var r=o>j?this.children[j]:this._pool.pop();r?r.setTexture(e[j].texture):r=new b.Sprite(e[j].texture),r.position.x=(e[j].position.x+m[e[j].line])*i,r.position.y=e[j].position.y*i,r.scale.x=r.scale.y=i,r.tint=q,r.parent||this.addChild(r)}for(;this.children.length>p;){var s=this.getChildAt(this.children.length-1);this._pool.push(s),this.removeChild(s)}this.textWidth=f*i,this.textHeight=(c.y+a.lineHeight)*i},b.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),b.DisplayObjectContainer.prototype.updateTransform.call(this)},b.BitmapText.fonts={},b.InteractionData=function(){this.global=new b.Point,this.target=null,this.originalEvent=null},b.InteractionData.prototype.getLocalPosition=function(a,c){var d=a.worldTransform,e=this.global,f=d.a,g=d.c,h=d.tx,i=d.b,j=d.d,k=d.ty,l=1/(f*j+g*-i);return c=c||new b.Point,c.x=j*l*e.x+-g*l*e.y+(k*g-h*j)*l,c.y=f*l*e.y+-i*l*e.x+(-k*f+h*i)*l,c},b.InteractionData.prototype.constructor=b.InteractionData,b.InteractionManager=function(a){this.stage=a,this.mouse=new b.InteractionData,this.touches={},this.tempPoint=new b.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new b.Point},b.InteractionManager.prototype.constructor=b.InteractionManager,b.InteractionManager.prototype.collectInteractiveSprite=function(a,b){for(var c=a.children,d=c.length,e=d-1;e>=0;e--){var f=c[e];f._interactive?(b.interactiveChildren=!0,this.interactiveItems.push(f),f.children.length>0&&this.collectInteractiveSprite(f,f)):(f.__iParent=null,f.children.length>0&&this.collectInteractiveSprite(f,b))}},b.InteractionManager.prototype.setTarget=function(a){this.target=a,this.resolution=a.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(a.view)},b.InteractionManager.prototype.setTargetDomElement=function(a){this.removeEvents(),window.navigator.msPointerEnabled&&(a.style["-ms-content-zooming"]="none",a.style["-ms-touch-action"]="none"),this.interactionDOMElement=a,a.addEventListener("mousemove",this.onMouseMove,!0),a.addEventListener("mousedown",this.onMouseDown,!0),a.addEventListener("mouseout",this.onMouseOut,!0),a.addEventListener("touchstart",this.onTouchStart,!0),a.addEventListener("touchend",this.onTouchEnd,!0),a.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},b.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},b.InteractionManager.prototype.update=function(){if(this.target){var a=Date.now(),c=a-this.last;if(c=c*b.INTERACTION_FREQUENCY/1e3,!(1>c)){this.last=a;var d=0;this.dirty&&this.rebuildInteractiveGraph();var e=this.interactiveItems.length,f="inherit",g=!1;for(d=0;e>d;d++){var h=this.interactiveItems[d];h.__hit=this.hitTest(h,this.mouse),this.mouse.target=h,h.__hit&&!g?(h.buttonMode&&(f=h.defaultCursor),h.interactiveChildren||(g=!0),h.__isOver||(h.mouseover&&h.mouseover(this.mouse),h.__isOver=!0)):h.__isOver&&(h.mouseout&&h.mouseout(this.mouse),h.__isOver=!1)}this.currentCursorStyle!==f&&(this.currentCursorStyle=f,this.interactionDOMElement.style.cursor=f)}}},b.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var a=this.interactiveItems.length,b=0;a>b;b++)this.interactiveItems[b].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},b.InteractionManager.prototype.onMouseMove=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(a.clientX-b.left)*(this.target.width/b.width)/this.resolution,this.mouse.global.y=(a.clientY-b.top)*(this.target.height/b.height)/this.resolution;for(var c=this.interactiveItems.length,d=0;c>d;d++){var e=this.interactiveItems[d];e.mousemove&&e.mousemove(this.mouse)}},b.InteractionManager.prototype.onMouseDown=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a,b.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var c=this.interactiveItems.length,d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"rightdown":"mousedown",g=e?"rightclick":"click",h=e?"__rightIsDown":"__mouseIsDown",i=e?"__isRightDown":"__isDown",j=0;c>j;j++){var k=this.interactiveItems[j];if((k[f]||k[g])&&(k[h]=!0,k.__hit=this.hitTest(k,this.mouse),k.__hit&&(k[f]&&k[f](this.mouse),k[i]=!0,!k.interactiveChildren)))break}},b.InteractionManager.prototype.onMouseOut=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var c=0;b>c;c++){var d=this.interactiveItems[c];d.__isOver&&(this.mouse.target=d,d.mouseout&&d.mouseout(this.mouse),d.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},b.InteractionManager.prototype.onMouseUp=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;for(var b=this.interactiveItems.length,c=!1,d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"rightup":"mouseup",g=e?"rightclick":"click",h=e?"rightupoutside":"mouseupoutside",i=e?"__isRightDown":"__isDown",j=0;b>j;j++){var k=this.interactiveItems[j];(k[g]||k[f]||k[h])&&(k.__hit=this.hitTest(k,this.mouse),k.__hit&&!c?(k[f]&&k[f](this.mouse),k[i]&&k[g]&&k[g](this.mouse),k.interactiveChildren||(c=!0)):k[i]&&k[h]&&k[h](this.mouse),k[i]=!1)}},b.InteractionManager.prototype.hitTest=function(a,c){var d=c.global;if(!a.worldVisible)return!1;a.worldTransform.applyInverse(d,this._tempPoint);var e,f=this._tempPoint.x,g=this._tempPoint.y;if(c.target=a,a.hitArea&&a.hitArea.contains)return a.hitArea.contains(f,g);if(a instanceof b.Sprite){var h,i=a.texture.frame.width,j=a.texture.frame.height,k=-i*a.anchor.x;if(f>k&&k+i>f&&(h=-j*a.anchor.y,g>h&&h+j>g))return!0}else if(a instanceof b.Graphics){var l=a.graphicsData;for(e=0;e<l.length;e++){var m=l[e];if(m.fill&&m.shape&&m.shape.contains(f,g))return!0}}var n=a.children.length;for(e=0;n>e;e++){var o=a.children[e],p=this.hitTest(o,c);if(p)return c.target=a,!0}return!1},b.InteractionManager.prototype.onTouchMove=function(a){this.dirty&&this.rebuildInteractiveGraph();var b,c=this.interactionDOMElement.getBoundingClientRect(),d=a.changedTouches,e=0;for(e=0;e<d.length;e++){var f=d[e];b=this.touches[f.identifier],b.originalEvent=a,b.global.x=(f.clientX-c.left)*(this.target.width/c.width)/this.resolution,b.global.y=(f.clientY-c.top)*(this.target.height/c.height)/this.resolution,navigator.isCocoonJS&&!c.left&&!c.top&&!a.target.style.width&&!a.target.style.height&&(b.global.x=f.clientX,b.global.y=f.clientY);for(var g=0;g<this.interactiveItems.length;g++){var h=this.interactiveItems[g];h.touchmove&&h.__touchData&&h.__touchData[f.identifier]&&h.touchmove(b)}}},b.InteractionManager.prototype.onTouchStart=function(a){this.dirty&&this.rebuildInteractiveGraph();
var c=this.interactionDOMElement.getBoundingClientRect();b.AUTO_PREVENT_DEFAULT&&a.preventDefault();for(var d=a.changedTouches,e=0;e<d.length;e++){var f=d[e],g=this.pool.pop();g||(g=new b.InteractionData),g.originalEvent=a,this.touches[f.identifier]=g,g.global.x=(f.clientX-c.left)*(this.target.width/c.width)/this.resolution,g.global.y=(f.clientY-c.top)*(this.target.height/c.height)/this.resolution,navigator.isCocoonJS&&!c.left&&!c.top&&!a.target.style.width&&!a.target.style.height&&(g.global.x=f.clientX,g.global.y=f.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];if((j.touchstart||j.tap)&&(j.__hit=this.hitTest(j,g),j.__hit&&(j.touchstart&&j.touchstart(g),j.__isDown=!0,j.__touchData=j.__touchData||{},j.__touchData[f.identifier]=g,!j.interactiveChildren)))break}}},b.InteractionManager.prototype.onTouchEnd=function(a){this.dirty&&this.rebuildInteractiveGraph();for(var b=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,d=0;d<c.length;d++){var e=c[d],f=this.touches[e.identifier],g=!1;f.global.x=(e.clientX-b.left)*(this.target.width/b.width)/this.resolution,f.global.y=(e.clientY-b.top)*(this.target.height/b.height)/this.resolution,navigator.isCocoonJS&&!b.left&&!b.top&&!a.target.style.width&&!a.target.style.height&&(f.global.x=e.clientX,f.global.y=e.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];j.__touchData&&j.__touchData[e.identifier]&&(j.__hit=this.hitTest(j,j.__touchData[e.identifier]),f.originalEvent=a,(j.touchend||j.tap)&&(j.__hit&&!g?(j.touchend&&j.touchend(f),j.__isDown&&j.tap&&j.tap(f),j.interactiveChildren||(g=!0)):j.__isDown&&j.touchendoutside&&j.touchendoutside(f),j.__isDown=!1),j.__touchData[e.identifier]=null)}this.pool.push(f),this.touches[e.identifier]=null}},b.Stage=function(a){b.DisplayObjectContainer.call(this),this.worldTransform=new b.Matrix,this.interactive=!0,this.interactionManager=new b.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new b.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(a)},b.Stage.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Stage.prototype.constructor=b.Stage,b.Stage.prototype.setInteractionDelegate=function(a){this.interactionManager.setTargetDomElement(a)},b.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},b.Stage.prototype.setBackgroundColor=function(a){this.backgroundColor=a||0,this.backgroundColorSplit=b.hex2rgb(this.backgroundColor);var c=this.backgroundColor.toString(16);c="000000".substr(0,6-c.length)+c,this.backgroundColorString="#"+c},b.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(a){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)}),a.requestAnimFrame=a.requestAnimationFrame}(this),b.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]},b.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(a){function b(){for(var d=arguments.length,f=new Array(d);d--;)f[d]=arguments[d];return f=e.concat(f),c.apply(this instanceof b?this:a,f)}var c=this,d=arguments.length-1,e=[];if(d>0)for(e.length=d;d--;)e[d]=arguments[d+1];if("function"!=typeof c)throw new TypeError;return b.prototype=function f(a){return a&&(f.prototype=a),this instanceof f?void 0:new f}(c.prototype),b}}()),b.AjaxRequest=function(){var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var b=0;b<a.length;b++)try{return new window.ActiveXObject(a[b])}catch(c){}},b.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var a=document.createElement("canvas");a.width=1,a.height=1;var b=a.getContext("2d");return b.fillStyle="#000",b.fillRect(0,0,1,1),b.globalCompositeOperation="multiply",b.fillStyle="#fff",b.fillRect(0,0,1,1),0===b.getImageData(0,0,1,1).data[0]},b.getNextPowerOfTwo=function(a){if(a>0&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b},b.isPowerOfTwo=function(a,b){return a>0&&0===(a&a-1)&&b>0&&0===(b&b-1)},b.EventTarget={call:function(a){a&&(a=a.prototype||a,b.EventTarget.mixin(a))},mixin:function(a){a.listeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?this._listeners[a].slice():[]},a.emit=a.dispatchEvent=function(a,c){if(this._listeners=this._listeners||{},"object"==typeof a&&(c=a,a=a.type),c&&c.__isEventObject===!0||(c=new b.Event(this,a,c)),this._listeners&&this._listeners[a]){var d,e=this._listeners[a].slice(0),f=e.length,g=e[0];for(d=0;f>d;g=e[++d])if(g.call(this,c),c.stoppedImmediate)return this;if(c.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,a,c),this},a.on=a.addEventListener=function(a,b){return this._listeners=this._listeners||{},(this._listeners[a]=this._listeners[a]||[]).push(b),this},a.once=function(a,b){function c(){b.apply(d.off(a,c),arguments)}this._listeners=this._listeners||{};var d=this;return c._originalHandler=b,this.on(a,c)},a.off=a.removeEventListener=function(a,b){if(this._listeners=this._listeners||{},!this._listeners[a])return this;for(var c=this._listeners[a],d=b?c.length:0;d-->0;)(c[d]===b||c[d]._originalHandler===b)&&c.splice(d,1);return 0===c.length&&delete this._listeners[a],this},a.removeAllListeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?(delete this._listeners[a],this):this}}},b.Event=function(a,b,c){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=a,this.type=b,this.data=c,this.content=c,this.timeStamp=Date.now()},b.Event.prototype.stopPropagation=function(){this.stopped=!0},b.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},b.autoDetectRenderer=function(a,c,d){a||(a=800),c||(c=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}();return e?new b.WebGLRenderer(a,c,d):new b.CanvasRenderer(a,c,d)},b.autoDetectRecommendedRenderer=function(a,c,d){a||(a=800),c||(c=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),f=/Android/i.test(navigator.userAgent);return e&&!f?new b.WebGLRenderer(a,c,d):new b.CanvasRenderer(a,c,d)},b.PolyK={},b.PolyK.Triangulate=function(a){var c=!0,d=a.length>>1;if(3>d)return[];for(var e=[],f=[],g=0;d>g;g++)f.push(g);g=0;for(var h=d;h>3;){var i=f[(g+0)%h],j=f[(g+1)%h],k=f[(g+2)%h],l=a[2*i],m=a[2*i+1],n=a[2*j],o=a[2*j+1],p=a[2*k],q=a[2*k+1],r=!1;if(b.PolyK._convex(l,m,n,o,p,q,c)){r=!0;for(var s=0;h>s;s++){var t=f[s];if(t!==i&&t!==j&&t!==k&&b.PolyK._PointInTriangle(a[2*t],a[2*t+1],l,m,n,o,p,q)){r=!1;break}}}if(r)e.push(i,j,k),f.splice((g+1)%h,1),h--,g=0;else if(g++>3*h){if(!c)return null;for(e=[],f=[],g=0;d>g;g++)f.push(g);g=0,h=d,c=!1}}return e.push(f[0],f[1],f[2]),e},b.PolyK._PointInTriangle=function(a,b,c,d,e,f,g,h){var i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v},b.PolyK._convex=function(a,b,c,d,e,f,g){return(b-d)*(e-c)+(c-a)*(f-d)>=0===g},b.initDefaultShaders=function(){},b.CompileVertexShader=function(a,c){return b._CompileShader(a,c,a.VERTEX_SHADER)},b.CompileFragmentShader=function(a,c){return b._CompileShader(a,c,a.FRAGMENT_SHADER)},b._CompileShader=function(a,b,c){var d=b.join("\n"),e=a.createShader(c);return a.shaderSource(e,d),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)?e:(window.console.log(a.getShaderInfoLog(e)),null)},b.compileProgram=function(a,c,d){var e=b.CompileFragmentShader(a,d),f=b.CompileVertexShader(a,c),g=a.createProgram();return a.attachShader(g,f),a.attachShader(g,e),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||window.console.log("Could not initialise shaders"),g},b.PixiShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},b.PixiShader.prototype.constructor=b.PixiShader,b.PixiShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc||b.PixiShader.defaultVertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.dimensions=a.getUniformLocation(c,"dimensions"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(c,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var d in this.uniforms)this.uniforms[d].uniformLocation=a.getUniformLocation(c,d);this.initUniforms(),this.program=c},b.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var a,b=this.gl;for(var c in this.uniforms){a=this.uniforms[c];var d=a.type;"sampler2D"===d?(a._init=!1,null!==a.value&&this.initSampler2D(a)):"mat2"===d||"mat3"===d||"mat4"===d?(a.glMatrix=!0,a.glValueLength=1,"mat2"===d?a.glFunc=b.uniformMatrix2fv:"mat3"===d?a.glFunc=b.uniformMatrix3fv:"mat4"===d&&(a.glFunc=b.uniformMatrix4fv)):(a.glFunc=b["uniform"+d],a.glValueLength="2f"===d||"2i"===d?2:"3f"===d||"3i"===d?3:"4f"===d||"4i"===d?4:1)}},b.PixiShader.prototype.initSampler2D=function(a){if(a.value&&a.value.baseTexture&&a.value.baseTexture.hasLoaded){var b=this.gl;if(b.activeTexture(b["TEXTURE"+this.textureCount]),b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]),a.textureData){var c=a.textureData,d=c.magFilter?c.magFilter:b.LINEAR,e=c.minFilter?c.minFilter:b.LINEAR,f=c.wrapS?c.wrapS:b.CLAMP_TO_EDGE,g=c.wrapT?c.wrapT:b.CLAMP_TO_EDGE,h=c.luminance?b.LUMINANCE:b.RGBA;if(c.repeat&&(f=b.REPEAT,g=b.REPEAT),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!!c.flipY),c.width){var i=c.width?c.width:512,j=c.height?c.height:2,k=c.border?c.border:0;b.texImage2D(b.TEXTURE_2D,0,h,i,j,k,h,b.UNSIGNED_BYTE,null)}else b.texImage2D(b.TEXTURE_2D,0,h,b.RGBA,b.UNSIGNED_BYTE,a.value.baseTexture.source);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,g)}b.uniform1i(a.uniformLocation,this.textureCount),a._init=!0,this.textureCount++}},b.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var a,c=this.gl;for(var d in this.uniforms)a=this.uniforms[d],1===a.glValueLength?a.glMatrix===!0?a.glFunc.call(c,a.uniformLocation,a.transpose,a.value):a.glFunc.call(c,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w):"sampler2D"===a.type&&(a._init?(c.activeTexture(c["TEXTURE"+this.textureCount]),a.value.baseTexture._dirty[c.id]?b.instances[c.id].updateTexture(a.value.baseTexture):c.bindTexture(c.TEXTURE_2D,a.value.baseTexture._glTextures[c.id]),c.uniform1i(a.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(a))},b.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],b.PixiFastShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},b.PixiFastShader.prototype.constructor=b.PixiFastShader,b.PixiFastShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.dimensions=a.getUniformLocation(c,"dimensions"),this.uMatrix=a.getUniformLocation(c,"uMatrix"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aPositionCoord=a.getAttribLocation(c,"aPositionCoord"),this.aScale=a.getAttribLocation(c,"aScale"),this.aRotation=a.getAttribLocation(c,"aRotation"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(c,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=c},b.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.StripShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},b.StripShader.prototype.constructor=b.StripShader,b.StripShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.colorAttribute=a.getAttribLocation(c,"aColor"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},b.PrimitiveShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},b.PrimitiveShader.prototype.constructor=b.PrimitiveShader,b.PrimitiveShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.tintColor=a.getUniformLocation(c,"tint"),this.flipY=a.getUniformLocation(c,"flipY"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.colorAttribute=a.getAttribLocation(c,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.ComplexPrimitiveShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},b.ComplexPrimitiveShader.prototype.constructor=b.ComplexPrimitiveShader,b.ComplexPrimitiveShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.tintColor=a.getUniformLocation(c,"tint"),this.color=a.getUniformLocation(c,"color"),this.flipY=a.getUniformLocation(c,"flipY"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},b.WebGLGraphics=function(){},b.WebGLGraphics.renderGraphics=function(a,c){var d,e=c.gl,f=c.projection,g=c.offset,h=c.shaderManager.primitiveShader;a.dirty&&b.WebGLGraphics.updateGraphics(a,e);for(var i=a._webGL[e.id],j=0;j<i.data.length;j++)1===i.data[j].mode?(d=i.data[j],c.stencilManager.pushStencil(a,d,c),e.drawElements(e.TRIANGLE_FAN,4,e.UNSIGNED_SHORT,2*(d.indices.length-4)),c.stencilManager.popStencil(a,d,c)):(d=i.data[j],c.shaderManager.setShader(h),h=c.shaderManager.primitiveShader,e.uniformMatrix3fv(h.translationMatrix,!1,a.worldTransform.toArray(!0)),e.uniform1f(h.flipY,1),e.uniform2f(h.projectionVector,f.x,-f.y),e.uniform2f(h.offsetVector,-g.x,-g.y),e.uniform3fv(h.tintColor,b.hex2rgb(a.tint)),e.uniform1f(h.alpha,a.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,d.buffer),e.vertexAttribPointer(h.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(h.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d.indexBuffer),e.drawElements(e.TRIANGLE_STRIP,d.indices.length,e.UNSIGNED_SHORT,0))},b.WebGLGraphics.updateGraphics=function(a,c){var d=a._webGL[c.id];d||(d=a._webGL[c.id]={lastIndex:0,data:[],gl:c}),a.dirty=!1;var e;if(a.clearDirty){for(a.clearDirty=!1,e=0;e<d.data.length;e++){var f=d.data[e];f.reset(),b.WebGLGraphics.graphicsDataPool.push(f)}d.data=[],d.lastIndex=0}var g;for(e=d.lastIndex;e<a.graphicsData.length;e++){var h=a.graphicsData[e];if(h.type===b.Graphics.POLY){if(h.points=h.shape.points.slice(),h.shape.closed&&(h.points[0]!==h.points[h.points.length-2]||h.points[1]!==h.points[h.points.length-1])&&h.points.push(h.points[0],h.points[1]),h.fill&&h.points.length>=6)if(h.points.length<12){g=b.WebGLGraphics.switchMode(d,0);var i=b.WebGLGraphics.buildPoly(h,g);i||(g=b.WebGLGraphics.switchMode(d,1),b.WebGLGraphics.buildComplexPoly(h,g))}else g=b.WebGLGraphics.switchMode(d,1),b.WebGLGraphics.buildComplexPoly(h,g);h.lineWidth>0&&(g=b.WebGLGraphics.switchMode(d,0),b.WebGLGraphics.buildLine(h,g))}else g=b.WebGLGraphics.switchMode(d,0),h.type===b.Graphics.RECT?b.WebGLGraphics.buildRectangle(h,g):h.type===b.Graphics.CIRC||h.type===b.Graphics.ELIP?b.WebGLGraphics.buildCircle(h,g):h.type===b.Graphics.RREC&&b.WebGLGraphics.buildRoundedRectangle(h,g);d.lastIndex++}for(e=0;e<d.data.length;e++)g=d.data[e],g.dirty&&g.upload()},b.WebGLGraphics.switchMode=function(a,c){var d;return a.data.length?(d=a.data[a.data.length-1],(d.mode!==c||1===c)&&(d=b.WebGLGraphics.graphicsDataPool.pop()||new b.WebGLGraphicsData(a.gl),d.mode=c,a.data.push(d))):(d=b.WebGLGraphics.graphicsDataPool.pop()||new b.WebGLGraphicsData(a.gl),d.mode=c,a.data.push(d)),d.dirty=!0,d},b.WebGLGraphics.buildRectangle=function(a,c){var d=a.shape,e=d.x,f=d.y,g=d.width,h=d.height;if(a.fill){var i=b.hex2rgb(a.fillColor),j=a.fillAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=c.points,o=c.indices,p=n.length/6;n.push(e,f),n.push(k,l,m,j),n.push(e+g,f),n.push(k,l,m,j),n.push(e,f+h),n.push(k,l,m,j),n.push(e+g,f+h),n.push(k,l,m,j),o.push(p,p,p+1,p+2,p+3,p+3)}if(a.lineWidth){var q=a.points;a.points=[e,f,e+g,f,e+g,f+h,e,f+h,e,f],b.WebGLGraphics.buildLine(a,c),a.points=q}},b.WebGLGraphics.buildRoundedRectangle=function(a,c){var d=a.shape,e=d.x,f=d.y,g=d.width,h=d.height,i=d.radius,j=[];if(j.push(e,f+i),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e,f+h-i,e,f+h,e+i,f+h)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+g-i,f+h,e+g,f+h,e+g,f+h-i)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+g,f+i,e+g,f,e+g-i,f)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+i,f,e,f,e,f+i)),a.fill){var k=b.hex2rgb(a.fillColor),l=a.fillAlpha,m=k[0]*l,n=k[1]*l,o=k[2]*l,p=c.points,q=c.indices,r=p.length/6,s=b.PolyK.Triangulate(j),t=0;for(t=0;t<s.length;t+=3)q.push(s[t]+r),q.push(s[t]+r),q.push(s[t+1]+r),q.push(s[t+2]+r),q.push(s[t+2]+r);for(t=0;t<j.length;t++)p.push(j[t],j[++t],m,n,o,l)}if(a.lineWidth){var u=a.points;a.points=j,b.WebGLGraphics.buildLine(a,c),a.points=u}},b.WebGLGraphics.quadraticBezierCurve=function(a,b,c,d,e,f){function g(a,b,c){var d=b-a;return a+d*c}for(var h,i,j,k,l,m,n=20,o=[],p=0,q=0;n>=q;q++)p=q/n,h=g(a,c,p),i=g(b,d,p),j=g(c,e,p),k=g(d,f,p),l=g(h,j,p),m=g(i,k,p),o.push(l,m);return o},b.WebGLGraphics.buildCircle=function(a,c){var d,e,f=a.shape,g=f.x,h=f.y;a.type===b.Graphics.CIRC?(d=f.radius,e=f.radius):(d=f.width,e=f.height);var i=40,j=2*Math.PI/i,k=0;if(a.fill){var l=b.hex2rgb(a.fillColor),m=a.fillAlpha,n=l[0]*m,o=l[1]*m,p=l[2]*m,q=c.points,r=c.indices,s=q.length/6;for(r.push(s),k=0;i+1>k;k++)q.push(g,h,n,o,p,m),q.push(g+Math.sin(j*k)*d,h+Math.cos(j*k)*e,n,o,p,m),r.push(s++,s++);r.push(s-1)}if(a.lineWidth){var t=a.points;for(a.points=[],k=0;i+1>k;k++)a.points.push(g+Math.sin(j*k)*d,h+Math.cos(j*k)*e);b.WebGLGraphics.buildLine(a,c),a.points=t}},b.WebGLGraphics.buildLine=function(a,c){var d=0,e=a.points;if(0!==e.length){if(a.lineWidth%2)for(d=0;d<e.length;d++)e[d]+=.5;var f=new b.Point(e[0],e[1]),g=new b.Point(e[e.length-2],e[e.length-1]);if(f.x===g.x&&f.y===g.y){e=e.slice(),e.pop(),e.pop(),g=new b.Point(e[e.length-2],e[e.length-1]);var h=g.x+.5*(f.x-g.x),i=g.y+.5*(f.y-g.y);e.unshift(h,i),e.push(h,i)}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=c.points,H=c.indices,I=e.length/2,J=e.length,K=G.length/6,L=a.lineWidth/2,M=b.hex2rgb(a.lineColor),N=a.lineAlpha,O=M[0]*N,P=M[1]*N,Q=M[2]*N;for(l=e[0],m=e[1],n=e[2],o=e[3],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(l-r,m-s,O,P,Q,N),G.push(l+r,m+s,O,P,Q,N),d=1;I-1>d;d++)l=e[2*(d-1)],m=e[2*(d-1)+1],n=e[2*d],o=e[2*d+1],p=e[2*(d+1)],q=e[2*(d+1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,t=-(o-q),u=n-p,F=Math.sqrt(t*t+u*u),t/=F,u/=F,t*=L,u*=L,x=-s+m-(-s+o),y=-r+n-(-r+l),z=(-r+l)*(-s+o)-(-r+n)*(-s+m),A=-u+q-(-u+o),B=-t+n-(-t+p),C=(-t+p)*(-u+o)-(-t+n)*(-u+q),D=x*B-A*y,Math.abs(D)<.1?(D+=10.1,G.push(n-r,o-s,O,P,Q,N),G.push(n+r,o+s,O,P,Q,N)):(j=(y*C-B*z)/D,k=(A*z-x*C)/D,E=(j-n)*(j-n)+(k-o)+(k-o),E>19600?(v=r-t,w=s-u,F=Math.sqrt(v*v+w*w),v/=F,w/=F,v*=L,w*=L,G.push(n-v,o-w),G.push(O,P,Q,N),G.push(n+v,o+w),G.push(O,P,Q,N),G.push(n-v,o-w),G.push(O,P,Q,N),J++):(G.push(j,k),G.push(O,P,Q,N),G.push(n-(j-n),o-(k-o)),G.push(O,P,Q,N)));for(l=e[2*(I-2)],m=e[2*(I-2)+1],n=e[2*(I-1)],o=e[2*(I-1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(n-r,o-s),G.push(O,P,Q,N),G.push(n+r,o+s),G.push(O,P,Q,N),H.push(K),d=0;J>d;d++)H.push(K++);H.push(K-1)}},b.WebGLGraphics.buildComplexPoly=function(a,c){var d=a.points.slice();if(!(d.length<6)){var e=c.indices;c.points=d,c.alpha=a.fillAlpha,c.color=b.hex2rgb(a.fillColor);for(var f,g,h=1/0,i=-1/0,j=1/0,k=-1/0,l=0;l<d.length;l+=2)f=d[l],g=d[l+1],h=h>f?f:h,i=f>i?f:i,j=j>g?g:j,k=g>k?g:k;d.push(h,j,i,j,i,k,h,k);var m=d.length/2;for(l=0;m>l;l++)e.push(l)}},b.WebGLGraphics.buildPoly=function(a,c){var d=a.points;if(!(d.length<6)){var e=c.points,f=c.indices,g=d.length/2,h=b.hex2rgb(a.fillColor),i=a.fillAlpha,j=h[0]*i,k=h[1]*i,l=h[2]*i,m=b.PolyK.Triangulate(d);if(!m)return!1;var n=e.length/6,o=0;for(o=0;o<m.length;o+=3)f.push(m[o]+n),f.push(m[o]+n),f.push(m[o+1]+n),f.push(m[o+2]+n),f.push(m[o+2]+n);for(o=0;g>o;o++)e.push(d[2*o],d[2*o+1],j,k,l,i);return!0}},b.WebGLGraphics.graphicsDataPool=[],b.WebGLGraphicsData=function(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},b.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},b.WebGLGraphicsData.prototype.upload=function(){var a=this.gl;this.glPoints=new b.Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndicies=new b.Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndicies,a.STATIC_DRAW),this.dirty=!1},b.glContexts=[],b.instances=[],b.WebGLRenderer=function(a,c,d){if(d)for(var e in b.defaultRenderOptions)"undefined"==typeof d[e]&&(d[e]=b.defaultRenderOptions[e]);else d=b.defaultRenderOptions;b.defaultRenderer||(b.sayHello("webGL"),b.defaultRenderer=this),this.type=b.WEBGL_RENDERER,this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.width=a||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:d.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:d.preserveDrawingBuffer},this.projection=new b.Point,this.offset=new b.Point(0,0),this.shaderManager=new b.WebGLShaderManager,this.spriteBatch=new b.WebGLSpriteBatch,this.maskManager=new b.WebGLMaskManager,this.filterManager=new b.WebGLFilterManager,this.stencilManager=new b.WebGLStencilManager,this.blendModeManager=new b.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},b.WebGLRenderer.prototype.constructor=b.WebGLRenderer,b.WebGLRenderer.prototype.initContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=a,!a)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=a.id=b.WebGLRenderer.glContextId++,b.glContexts[this.glContextId]=a,b.instances[this.glContextId]=this,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),this.shaderManager.setContext(a),this.spriteBatch.setContext(a),this.maskManager.setContext(a),this.filterManager.setContext(a),this.blendModeManager.setContext(a),this.stencilManager.setContext(a),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},b.WebGLRenderer.prototype.render=function(a){if(!this.contextLost){this.__stage!==a&&(a.interactive&&a.interactionManager.removeEvents(),this.__stage=a),a.updateTransform();var b=this.gl;a._interactive?a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)):a._interactiveEventsAdded&&(a._interactiveEventsAdded=!1,a.interactionManager.setTarget(this)),b.viewport(0,0,this.width,this.height),b.bindFramebuffer(b.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?b.clearColor(0,0,0,0):b.clearColor(a.backgroundColorSplit[0],a.backgroundColorSplit[1],a.backgroundColorSplit[2],1),b.clear(b.COLOR_BUFFER_BIT)),this.renderDisplayObject(a,this.projection)}},b.WebGLRenderer.prototype.renderDisplayObject=function(a,c,d){this.renderSession.blendModeManager.setBlendMode(b.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=d?-1:1,this.renderSession.projection=c,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,d),a._renderWebGL(this.renderSession),this.spriteBatch.end()},b.WebGLRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},b.WebGLRenderer.prototype.updateTexture=function(a){if(a.hasLoaded){var c=this.gl;return a._glTextures[c.id]||(a._glTextures[c.id]=c.createTexture()),c.bindTexture(c.TEXTURE_2D,a._glTextures[c.id]),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,a.scaleMode===b.scaleModes.LINEAR?c.LINEAR:c.NEAREST),a.mipmap&&b.isPowerOfTwo(a.width,a.height)?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,a.scaleMode===b.scaleModes.LINEAR?c.LINEAR_MIPMAP_LINEAR:c.NEAREST_MIPMAP_NEAREST),c.generateMipmap(c.TEXTURE_2D)):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,a.scaleMode===b.scaleModes.LINEAR?c.LINEAR:c.NEAREST),a._powerOf2?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)),a._dirty[c.id]=!1,a._glTextures[c.id]
}},b.WebGLRenderer.prototype.handleContextLost=function(a){a.preventDefault(),this.contextLost=!0},b.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var a in b.TextureCache){var c=b.TextureCache[a].baseTexture;c._glTextures=[]}this.contextLost=!1},b.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),b.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},b.WebGLRenderer.prototype.mapBlendModes=function(){var a=this.gl;b.blendModesWebGL||(b.blendModesWebGL=[],b.blendModesWebGL[b.blendModes.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],b.blendModesWebGL[b.blendModes.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SCREEN]=[a.SRC_ALPHA,a.ONE],b.blendModesWebGL[b.blendModes.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA])},b.WebGLRenderer.glContextId=0,b.WebGLBlendModeManager=function(){this.currentBlendMode=99999},b.WebGLBlendModeManager.prototype.constructor=b.WebGLBlendModeManager,b.WebGLBlendModeManager.prototype.setContext=function(a){this.gl=a},b.WebGLBlendModeManager.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var c=b.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(c[0],c[1]),!0},b.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},b.WebGLMaskManager=function(){},b.WebGLMaskManager.prototype.constructor=b.WebGLMaskManager,b.WebGLMaskManager.prototype.setContext=function(a){this.gl=a},b.WebGLMaskManager.prototype.pushMask=function(a,c){var d=c.gl;a.dirty&&b.WebGLGraphics.updateGraphics(a,d),a._webGL[d.id].data.length&&c.stencilManager.pushStencil(a,a._webGL[d.id].data[0],c)},b.WebGLMaskManager.prototype.popMask=function(a,b){var c=this.gl;b.stencilManager.popStencil(a,a._webGL[c.id].data[0],b)},b.WebGLMaskManager.prototype.destroy=function(){this.gl=null},b.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},b.WebGLStencilManager.prototype.setContext=function(a){this.gl=a},b.WebGLStencilManager.prototype.pushStencil=function(a,b,c){var d=this.gl;this.bindGraphics(a,b,c),0===this.stencilStack.length&&(d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(b);var e=this.count;d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),1===b.mode?(d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),this.reverse?d.stencilFunc(d.EQUAL,255-(e+1),255):d.stencilFunc(d.EQUAL,e+1,255),this.reverse=!this.reverse):(this.reverse?(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e+1,255):d.stencilFunc(d.EQUAL,255-(e+1),255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP),this.count++},b.WebGLStencilManager.prototype.bindGraphics=function(a,c,d){this._currentGraphics=a;var e,f=this.gl,g=d.projection,h=d.offset;1===c.mode?(e=d.shaderManager.complexPrimitiveShader,d.shaderManager.setShader(e),f.uniform1f(e.flipY,d.flipY),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,b.hex2rgb(a.tint)),f.uniform3fv(e.color,c.color),f.uniform1f(e.alpha,a.worldAlpha*c.alpha),f.bindBuffer(f.ARRAY_BUFFER,c.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,8,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.indexBuffer)):(e=d.shaderManager.primitiveShader,d.shaderManager.setShader(e),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform1f(e.flipY,d.flipY),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,b.hex2rgb(a.tint)),f.uniform1f(e.alpha,a.worldAlpha),f.bindBuffer(f.ARRAY_BUFFER,c.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,24,0),f.vertexAttribPointer(e.colorAttribute,4,f.FLOAT,!1,24,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.indexBuffer))},b.WebGLStencilManager.prototype.popStencil=function(a,b,c){var d=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)d.disable(d.STENCIL_TEST);else{var e=this.count;this.bindGraphics(a,b,c),d.colorMask(!1,!1,!1,!1),1===b.mode?(this.reverse=!this.reverse,this.reverse?(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)):(this.reverse?(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP)}},b.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},b.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.stack=[]},b.WebGLShaderManager.prototype.constructor=b.WebGLShaderManager,b.WebGLShaderManager.prototype.setContext=function(a){this.gl=a,this.primitiveShader=new b.PrimitiveShader(a),this.complexPrimitiveShader=new b.ComplexPrimitiveShader(a),this.defaultShader=new b.PixiShader(a),this.fastShader=new b.PixiFastShader(a),this.stripShader=new b.StripShader(a),this.setShader(this.defaultShader)},b.WebGLShaderManager.prototype.setAttribs=function(a){var b;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(b=0;b<a.length;b++){var c=a[b];this.tempAttribState[c]=!0}var d=this.gl;for(b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.tempAttribState[b]?d.enableVertexAttribArray(b):d.disableVertexAttribArray(b))},b.WebGLShaderManager.prototype.setShader=function(a){return this._currentId===a._UID?!1:(this._currentId=a._UID,this.currentShader=a,this.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)},b.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},b.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var a=4*this.size*4*this.vertSize,c=6*this.size;this.vertices=new b.ArrayBuffer(a),this.positions=new b.Float32Array(this.vertices),this.colors=new b.Uint32Array(this.vertices),this.indices=new b.Uint16Array(c),this.lastIndexCount=0;for(var d=0,e=0;c>d;d+=6,e+=4)this.indices[d+0]=e+0,this.indices[d+1]=e+1,this.indices[d+2]=e+2,this.indices[d+3]=e+0,this.indices[d+4]=e+2,this.indices[d+5]=e+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new b.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},b.WebGLSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW),this.currentBlendMode=99999;var c=new b.PixiShader(a);c.fragmentSrc=this.defaultShader.fragmentSrc,c.uniforms={},c.init(),this.defaultShader.shaders[a.id]=c},b.WebGLSpriteBatch.prototype.begin=function(a){this.renderSession=a,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},b.WebGLSpriteBatch.prototype.end=function(){this.flush()},b.WebGLSpriteBatch.prototype.render=function(a){var b=a.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture);var c=b._uvs;if(c){var d,e,f,g,h=a.anchor.x,i=a.anchor.y;if(b.trim){var j=b.trim;e=j.x-h*j.width,d=e+b.crop.width,g=j.y-i*j.height,f=g+b.crop.height}else d=b.frame.width*(1-h),e=b.frame.width*-h,f=b.frame.height*(1-i),g=b.frame.height*-i;var k=4*this.currentBatchSize*this.vertSize,l=b.baseTexture.resolution,m=a.worldTransform,n=m.a/l,o=m.b/l,p=m.c/l,q=m.d/l,r=m.tx,s=m.ty,t=this.colors,u=this.positions;this.renderSession.roundPixels?(u[k]=n*e+p*g+r|0,u[k+1]=q*g+o*e+s|0,u[k+5]=n*d+p*g+r|0,u[k+6]=q*g+o*d+s|0,u[k+10]=n*d+p*f+r|0,u[k+11]=q*f+o*d+s|0,u[k+15]=n*e+p*f+r|0,u[k+16]=q*f+o*e+s|0):(u[k]=n*e+p*g+r,u[k+1]=q*g+o*e+s,u[k+5]=n*d+p*g+r,u[k+6]=q*g+o*d+s,u[k+10]=n*d+p*f+r,u[k+11]=q*f+o*d+s,u[k+15]=n*e+p*f+r,u[k+16]=q*f+o*e+s),u[k+2]=c.x0,u[k+3]=c.y0,u[k+7]=c.x1,u[k+8]=c.y1,u[k+12]=c.x2,u[k+13]=c.y2,u[k+17]=c.x3,u[k+18]=c.y3;var v=a.tint;t[k+4]=t[k+9]=t[k+14]=t[k+19]=(v>>16)+(65280&v)+((255&v)<<16)+(255*a.worldAlpha<<24),this.sprites[this.currentBatchSize++]=a}},b.WebGLSpriteBatch.prototype.renderTilingSprite=function(a){var c=a.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=c.baseTexture),a._uvs||(a._uvs=new b.TextureUvs);var d=a._uvs;a.tilePosition.x%=c.baseTexture.width*a.tileScaleOffset.x,a.tilePosition.y%=c.baseTexture.height*a.tileScaleOffset.y;var e=a.tilePosition.x/(c.baseTexture.width*a.tileScaleOffset.x),f=a.tilePosition.y/(c.baseTexture.height*a.tileScaleOffset.y),g=a.width/c.baseTexture.width/(a.tileScale.x*a.tileScaleOffset.x),h=a.height/c.baseTexture.height/(a.tileScale.y*a.tileScaleOffset.y);d.x0=0-e,d.y0=0-f,d.x1=1*g-e,d.y1=0-f,d.x2=1*g-e,d.y2=1*h-f,d.x3=0-e,d.y3=1*h-f;var i=a.tint,j=(i>>16)+(65280&i)+((255&i)<<16)+(255*a.alpha<<24),k=this.positions,l=this.colors,m=a.width,n=a.height,o=a.anchor.x,p=a.anchor.y,q=m*(1-o),r=m*-o,s=n*(1-p),t=n*-p,u=4*this.currentBatchSize*this.vertSize,v=c.baseTexture.resolution,w=a.worldTransform,x=w.a/v,y=w.b/v,z=w.c/v,A=w.d/v,B=w.tx,C=w.ty;k[u++]=x*r+z*t+B,k[u++]=A*t+y*r+C,k[u++]=d.x0,k[u++]=d.y0,l[u++]=j,k[u++]=x*q+z*t+B,k[u++]=A*t+y*q+C,k[u++]=d.x1,k[u++]=d.y1,l[u++]=j,k[u++]=x*q+z*s+B,k[u++]=A*s+y*q+C,k[u++]=d.x2,k[u++]=d.y2,l[u++]=j,k[u++]=x*r+z*s+B,k[u++]=A*s+y*r+C,k[u++]=d.x3,k[u++]=d.y3,l[u++]=j,this.sprites[this.currentBatchSize++]=a},b.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a,c=this.gl;if(this.dirty){this.dirty=!1,c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.defaultShader.shaders[c.id];var d=4*this.vertSize;c.vertexAttribPointer(a.aVertexPosition,2,c.FLOAT,!1,d,0),c.vertexAttribPointer(a.aTextureCoord,2,c.FLOAT,!1,d,8),c.vertexAttribPointer(a.colorAttribute,4,c.UNSIGNED_BYTE,!0,d,16)}if(this.currentBatchSize>.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}for(var f,g,h,i,j=0,k=0,l=null,m=this.renderSession.blendModeManager.currentBlendMode,n=null,o=!1,p=!1,q=0,r=this.currentBatchSize;r>q;q++){if(i=this.sprites[q],f=i.texture.baseTexture,g=i.blendMode,h=i.shader||this.defaultShader,o=m!==g,p=n!==h,(l!==f||o||p)&&(this.renderBatch(l,j,k),k=q,j=0,l=f,o&&(m=g,this.renderSession.blendModeManager.setBlendMode(m)),p)){n=h,a=n.shaders[c.id],a||(a=new b.PixiShader(c),a.fragmentSrc=n.fragmentSrc,a.uniforms=n.uniforms,a.init(),n.shaders[c.id]=a),this.renderSession.shaderManager.setShader(a),a.dirty&&a.syncUniforms();var s=this.renderSession.projection;c.uniform2f(a.projectionVector,s.x,s.y);var t=this.renderSession.offset;c.uniform2f(a.offsetVector,t.x,t.y)}j++}this.renderBatch(l,j,k),this.currentBatchSize=0}},b.WebGLSpriteBatch.prototype.renderBatch=function(a,b,c){if(0!==b){var d=this.gl;a._dirty[d.id]?this.renderSession.renderer.updateTexture(a):d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]),d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,6*c*2),this.renderSession.drawCount++}},b.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},b.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},b.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},b.WebGLFastSpriteBatch=function(a){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var c=4*this.size*this.vertSize,d=6*this.maxSize;this.vertices=new b.Float32Array(c),this.indices=new b.Uint16Array(d),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var e=0,f=0;d>e;e+=6,f+=4)this.indices[e+0]=f+0,this.indices[e+1]=f+1,this.indices[e+2]=f+2,this.indices[e+3]=f+0,this.indices[e+4]=f+2,this.indices[e+5]=f+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(a)},b.WebGLFastSpriteBatch.prototype.constructor=b.WebGLFastSpriteBatch,b.WebGLFastSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW)},b.WebGLFastSpriteBatch.prototype.begin=function(a,b){this.renderSession=b,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=a.worldTransform.toArray(!0),this.start()},b.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},b.WebGLFastSpriteBatch.prototype.render=function(a){var b=a.children,c=b[0];if(c.texture._uvs){this.currentBaseTexture=c.texture.baseTexture,c.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(c.blendMode));for(var d=0,e=b.length;e>d;d++)this.renderSprite(b[d]);this.flush()}},b.WebGLFastSpriteBatch.prototype.renderSprite=function(a){if(a.visible&&(a.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=a.texture.baseTexture,a.texture._uvs))){var b,c,d,e,f,g,h,i,j=this.vertices;if(b=a.texture._uvs,c=a.texture.frame.width,d=a.texture.frame.height,a.texture.trim){var k=a.texture.trim;f=k.x-a.anchor.x*k.width,e=f+a.texture.crop.width,h=k.y-a.anchor.y*k.height,g=h+a.texture.crop.height}else e=a.texture.frame.width*(1-a.anchor.x),f=a.texture.frame.width*-a.anchor.x,g=a.texture.frame.height*(1-a.anchor.y),h=a.texture.frame.height*-a.anchor.y;i=4*this.currentBatchSize*this.vertSize,j[i++]=f,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x0,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x1,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x2,j[i++]=b.y2,j[i++]=a.alpha,j[i++]=f,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x3,j[i++]=b.y3,j[i++]=a.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},b.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a=this.gl;if(this.currentBaseTexture._glTextures[a.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,a),a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture._glTextures[a.id]),this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,b)}a.drawElements(a.TRIANGLES,6*this.currentBatchSize,a.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},b.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},b.WebGLFastSpriteBatch.prototype.start=function(){var a=this.gl;a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b=this.renderSession.projection;a.uniform2f(this.shader.projectionVector,b.x,b.y),a.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var c=4*this.vertSize;a.vertexAttribPointer(this.shader.aVertexPosition,2,a.FLOAT,!1,c,0),a.vertexAttribPointer(this.shader.aPositionCoord,2,a.FLOAT,!1,c,8),a.vertexAttribPointer(this.shader.aScale,2,a.FLOAT,!1,c,16),a.vertexAttribPointer(this.shader.aRotation,1,a.FLOAT,!1,c,24),a.vertexAttribPointer(this.shader.aTextureCoord,2,a.FLOAT,!1,c,28),a.vertexAttribPointer(this.shader.colorAttribute,1,a.FLOAT,!1,c,36)},b.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},b.WebGLFilterManager.prototype.constructor=b.WebGLFilterManager,b.WebGLFilterManager.prototype.setContext=function(a){this.gl=a,this.texturePool=[],this.initShaderBuffers()},b.WebGLFilterManager.prototype.begin=function(a,b){this.renderSession=a,this.defaultShader=a.shaderManager.defaultShader;var c=this.renderSession.projection;this.width=2*c.x,this.height=2*-c.y,this.buffer=b},b.WebGLFilterManager.prototype.pushFilter=function(a){var c=this.gl,d=this.renderSession.projection,e=this.renderSession.offset;a._filterArea=a.target.filterArea||a.target.getBounds(),this.filterStack.push(a);var f=a.filterPasses[0];this.offsetX+=a._filterArea.x,this.offsetY+=a._filterArea.y;var g=this.texturePool.pop();g?g.resize(this.width,this.height):g=new b.FilterTexture(this.gl,this.width,this.height),c.bindTexture(c.TEXTURE_2D,g.texture);var h=a._filterArea,i=f.padding;h.x-=i,h.y-=i,h.width+=2*i,h.height+=2*i,h.x<0&&(h.x=0),h.width>this.width&&(h.width=this.width),h.y<0&&(h.y=0),h.height>this.height&&(h.height=this.height),c.bindFramebuffer(c.FRAMEBUFFER,g.frameBuffer),c.viewport(0,0,h.width,h.height),d.x=h.width/2,d.y=-h.height/2,e.x=-h.x,e.y=-h.y,c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),a._glFilterTexture=g},b.WebGLFilterManager.prototype.popFilter=function(){var a=this.gl,c=this.filterStack.pop(),d=c._filterArea,e=c._glFilterTexture,f=this.renderSession.projection,g=this.renderSession.offset;if(c.filterPasses.length>1){a.viewport(0,0,d.width,d.height),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=d.height,this.vertexArray[2]=d.width,this.vertexArray[3]=d.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=d.width,this.vertexArray[7]=0,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=d.width/this.width,this.uvArray[5]=d.height/this.height,this.uvArray[6]=d.width/this.width,this.uvArray[7]=d.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);var h=e,i=this.texturePool.pop();i||(i=new b.FilterTexture(this.gl,this.width,this.height)),i.resize(this.width,this.height),a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.clear(a.COLOR_BUFFER_BIT),a.disable(a.BLEND);for(var j=0;j<c.filterPasses.length-1;j++){var k=c.filterPasses[j];a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,h.texture),this.applyFilterPass(k,d,d.width,d.height);var l=h;h=i,i=l}a.enable(a.BLEND),e=h,this.texturePool.push(i)}var m=c.filterPasses[c.filterPasses.length-1];this.offsetX-=d.x,this.offsetY-=d.y;var n=this.width,o=this.height,p=0,q=0,r=this.buffer;if(0===this.filterStack.length)a.colorMask(!0,!0,!0,!0);else{var s=this.filterStack[this.filterStack.length-1];d=s._filterArea,n=d.width,o=d.height,p=d.x,q=d.y,r=s._glFilterTexture.frameBuffer}f.x=n/2,f.y=-o/2,g.x=p,g.y=q,d=c._filterArea;var t=d.x-p,u=d.y-q;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=t,this.vertexArray[1]=u+d.height,this.vertexArray[2]=t+d.width,this.vertexArray[3]=u+d.height,this.vertexArray[4]=t,this.vertexArray[5]=u,this.vertexArray[6]=t+d.width,this.vertexArray[7]=u,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=d.width/this.width,this.uvArray[5]=d.height/this.height,this.uvArray[6]=d.width/this.width,this.uvArray[7]=d.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray),a.viewport(0,0,n,o),a.bindFramebuffer(a.FRAMEBUFFER,r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),this.applyFilterPass(m,d,n,o),this.texturePool.push(e),c._glFilterTexture=null},b.WebGLFilterManager.prototype.applyFilterPass=function(a,c,d,e){var f=this.gl,g=a.shaders[f.id];g||(g=new b.PixiShader(f),g.fragmentSrc=a.fragmentSrc,g.uniforms=a.uniforms,g.init(),a.shaders[f.id]=g),this.renderSession.shaderManager.setShader(g),f.uniform2f(g.projectionVector,d/2,-e/2),f.uniform2f(g.offsetVector,0,0),a.uniforms.dimensions&&(a.uniforms.dimensions.value[0]=this.width,a.uniforms.dimensions.value[1]=this.height,a.uniforms.dimensions.value[2]=this.vertexArray[0],a.uniforms.dimensions.value[3]=this.vertexArray[5]),g.syncUniforms(),f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer),f.vertexAttribPointer(g.aVertexPosition,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.uvBuffer),f.vertexAttribPointer(g.aTextureCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.colorBuffer),f.vertexAttribPointer(g.colorAttribute,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),this.renderSession.drawCount++},b.WebGLFilterManager.prototype.initShaderBuffers=function(){var a=this.gl;this.vertexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.colorBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.vertexArray=new b.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW),this.uvArray=new b.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW),this.colorArray=new b.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer),a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)},b.WebGLFilterManager.prototype.destroy=function(){var a=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var b=0;b<this.texturePool.length;b++)this.texturePool[b].destroy();this.texturePool=null,a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.uvBuffer),a.deleteBuffer(this.colorBuffer),a.deleteBuffer(this.indexBuffer)},b.FilterTexture=function(a,c,d,e){this.gl=a,this.frameBuffer=a.createFramebuffer(),this.texture=a.createTexture(),e=e||b.scaleModes.DEFAULT,a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e===b.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e===b.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0),this.renderBuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.renderBuffer),this.resize(c,d)},b.FilterTexture.prototype.constructor=b.FilterTexture,b.FilterTexture.prototype.clear=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},b.FilterTexture.prototype.resize=function(a,b){if(this.width!==a||this.height!==b){this.width=a,this.height=b;var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null),c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b)}},b.FilterTexture.prototype.destroy=function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer),a.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},b.CanvasBuffer=function(a,b){this.width=a,this.height=b,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b},b.CanvasBuffer.prototype.constructor=b.CanvasBuffer,b.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},b.CanvasBuffer.prototype.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b},b.CanvasMaskManager=function(){},b.CanvasMaskManager.prototype.constructor=b.CanvasMaskManager,b.CanvasMaskManager.prototype.pushMask=function(a,c){var d=c.context;d.save();var e=a.alpha,f=a.worldTransform,g=c.resolution;d.setTransform(f.a*g,f.b*g,f.c*g,f.d*g,f.tx*g,f.ty*g),b.CanvasGraphics.renderGraphicsMask(a,d),d.clip(),a.worldAlpha=e},b.CanvasMaskManager.prototype.popMask=function(a){a.context.restore()},b.CanvasTinter=function(){},b.CanvasTinter.getTintedTexture=function(a,c){var d=a.texture;c=b.CanvasTinter.roundColor(c);var e="#"+("00000"+(0|c).toString(16)).substr(-6);if(d.tintCache=d.tintCache||{},d.tintCache[e])return d.tintCache[e];var f=b.CanvasTinter.canvas||document.createElement("canvas");if(b.CanvasTinter.tintMethod(d,c,f),b.CanvasTinter.convertTintToImage){var g=new Image;g.src=f.toDataURL(),d.tintCache[e]=g}else d.tintCache[e]=f,b.CanvasTinter.canvas=null;return f},b.CanvasTinter.tintWithMultiply=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},b.CanvasTinter.tintWithOverlay=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},b.CanvasTinter.tintWithPerPixel=function(a,c,d){var e=d.getContext("2d"),f=a.crop;d.width=f.width,d.height=f.height,e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var g=b.hex2rgb(c),h=g[0],i=g[1],j=g[2],k=e.getImageData(0,0,f.width,f.height),l=k.data,m=0;m<l.length;m+=4)l[m+0]*=h,l[m+1]*=i,l[m+2]*=j;e.putImageData(k,0,0)},b.CanvasTinter.roundColor=function(a){var c=b.CanvasTinter.cacheStepsPerColorChannel,d=b.hex2rgb(a);return d[0]=Math.min(255,d[0]/c*c),d[1]=Math.min(255,d[1]/c*c),d[2]=Math.min(255,d[2]/c*c),b.rgb2hex(d)},b.CanvasTinter.cacheStepsPerColorChannel=8,b.CanvasTinter.convertTintToImage=!1,b.CanvasTinter.canUseMultiply=b.canUseNewCanvasBlendModes(),b.CanvasTinter.tintMethod=b.CanvasTinter.canUseMultiply?b.CanvasTinter.tintWithMultiply:b.CanvasTinter.tintWithPerPixel,b.CanvasRenderer=function(a,c,d){if(d)for(var e in b.defaultRenderOptions)"undefined"==typeof d[e]&&(d[e]=b.defaultRenderOptions[e]);else d=b.defaultRenderOptions;b.defaultRenderer||(b.sayHello("Canvas"),b.defaultRenderer=this),this.type=b.CANVAS_RENDERER,this.resolution=d.resolution,this.clearBeforeRender=d.clearBeforeRender,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.width=a||800,this.height=c||600,this.width*=this.resolution,this.height*=this.resolution,this.view=d.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new b.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(a,c),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},b.CanvasRenderer.prototype.constructor=b.CanvasRenderer,b.CanvasRenderer.prototype.render=function(a){a.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=b.blendModes.NORMAL,this.context.globalCompositeOperation=b.blendModesCanvas[b.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=a.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(a),a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)))},b.CanvasRenderer.prototype.destroy=function(a){"undefined"==typeof a&&(a=!0),a&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},b.CanvasRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},b.CanvasRenderer.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context,this.renderSession.resolution=this.resolution,a._renderCanvas(this.renderSession)
},b.CanvasRenderer.prototype.mapBlendModes=function(){b.blendModesCanvas||(b.blendModesCanvas=[],b.canUseNewCanvasBlendModes()?(b.blendModesCanvas[b.blendModes.NORMAL]="source-over",b.blendModesCanvas[b.blendModes.ADD]="lighter",b.blendModesCanvas[b.blendModes.MULTIPLY]="multiply",b.blendModesCanvas[b.blendModes.SCREEN]="screen",b.blendModesCanvas[b.blendModes.OVERLAY]="overlay",b.blendModesCanvas[b.blendModes.DARKEN]="darken",b.blendModesCanvas[b.blendModes.LIGHTEN]="lighten",b.blendModesCanvas[b.blendModes.COLOR_DODGE]="color-dodge",b.blendModesCanvas[b.blendModes.COLOR_BURN]="color-burn",b.blendModesCanvas[b.blendModes.HARD_LIGHT]="hard-light",b.blendModesCanvas[b.blendModes.SOFT_LIGHT]="soft-light",b.blendModesCanvas[b.blendModes.DIFFERENCE]="difference",b.blendModesCanvas[b.blendModes.EXCLUSION]="exclusion",b.blendModesCanvas[b.blendModes.HUE]="hue",b.blendModesCanvas[b.blendModes.SATURATION]="saturation",b.blendModesCanvas[b.blendModes.COLOR]="color",b.blendModesCanvas[b.blendModes.LUMINOSITY]="luminosity"):(b.blendModesCanvas[b.blendModes.NORMAL]="source-over",b.blendModesCanvas[b.blendModes.ADD]="lighter",b.blendModesCanvas[b.blendModes.MULTIPLY]="source-over",b.blendModesCanvas[b.blendModes.SCREEN]="source-over",b.blendModesCanvas[b.blendModes.OVERLAY]="source-over",b.blendModesCanvas[b.blendModes.DARKEN]="source-over",b.blendModesCanvas[b.blendModes.LIGHTEN]="source-over",b.blendModesCanvas[b.blendModes.COLOR_DODGE]="source-over",b.blendModesCanvas[b.blendModes.COLOR_BURN]="source-over",b.blendModesCanvas[b.blendModes.HARD_LIGHT]="source-over",b.blendModesCanvas[b.blendModes.SOFT_LIGHT]="source-over",b.blendModesCanvas[b.blendModes.DIFFERENCE]="source-over",b.blendModesCanvas[b.blendModes.EXCLUSION]="source-over",b.blendModesCanvas[b.blendModes.HUE]="source-over",b.blendModesCanvas[b.blendModes.SATURATION]="source-over",b.blendModesCanvas[b.blendModes.COLOR]="source-over",b.blendModesCanvas[b.blendModes.LUMINOSITY]="source-over"))},b.CanvasGraphics=function(){},b.CanvasGraphics.renderGraphics=function(a,c){var d=a.worldAlpha;a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1);for(var e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=f.shape,h=f._fillTint,i=f._lineTint;if(c.lineWidth=f.lineWidth,f.type===b.Graphics.POLY){c.beginPath();var j=g.points;c.moveTo(j[0],j[1]);for(var k=1;k<j.length/2;k++)c.lineTo(j[2*k],j[2*k+1]);g.closed&&c.lineTo(j[0],j[1]),j[0]===j[j.length-2]&&j[1]===j[j.length-1]&&c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}else if(f.type===b.Graphics.RECT)(f.fillColor||0===f.fillColor)&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fillRect(g.x,g.y,g.width,g.height)),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.strokeRect(g.x,g.y,g.width,g.height));else if(f.type===b.Graphics.CIRC)c.beginPath(),c.arc(g.x,g.y,g.radius,0,2*Math.PI),c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke());else if(f.type===b.Graphics.ELIP){var l=2*g.width,m=2*g.height,n=g.x-l/2,o=g.y-m/2;c.beginPath();var p=.5522848,q=l/2*p,r=m/2*p,s=n+l,t=o+m,u=n+l/2,v=o+m/2;c.moveTo(n,v),c.bezierCurveTo(n,v-r,u-q,o,u,o),c.bezierCurveTo(u+q,o,s,v-r,s,v),c.bezierCurveTo(s,v+r,u+q,t,u,t),c.bezierCurveTo(u-q,t,n,v+r,n,v),c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}else if(f.type===b.Graphics.RREC){var w=g.x,x=g.y,y=g.width,z=g.height,A=g.radius,B=Math.min(y,z)/2|0;A=A>B?B:A,c.beginPath(),c.moveTo(w,x+A),c.lineTo(w,x+z-A),c.quadraticCurveTo(w,x+z,w+A,x+z),c.lineTo(w+y-A,x+z),c.quadraticCurveTo(w+y,x+z,w+y,x+z-A),c.lineTo(w+y,x+A),c.quadraticCurveTo(w+y,x,w+y-A,x),c.lineTo(w+A,x),c.quadraticCurveTo(w,x,w,x+A),c.closePath(),(f.fillColor||0===f.fillColor)&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}}},b.CanvasGraphics.renderGraphicsMask=function(a,c){var d=a.graphicsData.length;if(0!==d){d>1&&(d=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var e=0;1>e;e++){var f=a.graphicsData[e],g=f.shape;if(f.type===b.Graphics.POLY){c.beginPath();var h=g.points;c.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)c.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&c.closePath()}else if(f.type===b.Graphics.RECT)c.beginPath(),c.rect(g.x,g.y,g.width,g.height),c.closePath();else if(f.type===b.Graphics.CIRC)c.beginPath(),c.arc(g.x,g.y,g.radius,0,2*Math.PI),c.closePath();else if(f.type===b.Graphics.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2;c.beginPath();var n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;c.moveTo(l,t),c.bezierCurveTo(l,t-p,s-o,m,s,m),c.bezierCurveTo(s+o,m,q,t-p,q,t),c.bezierCurveTo(q,t+p,s+o,r,s,r),c.bezierCurveTo(s-o,r,l,t+p,l,t),c.closePath()}else if(f.type===b.Graphics.RREC){var u=g.points,v=u[0],w=u[1],x=u[2],y=u[3],z=u[4],A=Math.min(x,y)/2|0;z=z>A?A:z,c.beginPath(),c.moveTo(v,w+z),c.lineTo(v,w+y-z),c.quadraticCurveTo(v,w+y,v+z,w+y),c.lineTo(v+x-z,w+y),c.quadraticCurveTo(v+x,w+y,v+x,w+y-z),c.lineTo(v+x,w+z),c.quadraticCurveTo(v+x,w,v+x-z,w),c.lineTo(v+z,w),c.quadraticCurveTo(v,w,v,w+z),c.closePath()}}}},b.CanvasGraphics.updateGraphicsTint=function(a){if(16777215!==a.tint)for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},b.Graphics=function(){b.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=b.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new b.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},b.Graphics.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Graphics.prototype.constructor=b.Graphics,Object.defineProperty(b.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap=a,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),b.Graphics.prototype.lineStyle=function(a,c,d){if(this.lineWidth=a||0,this.lineColor=c||0,this.lineAlpha=arguments.length<3?1:d,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new b.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},b.Graphics.prototype.moveTo=function(a,c){return this.drawShape(new b.Polygon([a,c])),this},b.Graphics.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},b.Graphics.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e,f,g=20,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var i=h[h.length-2],j=h[h.length-1],k=0,l=1;g>=l;l++)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=!0,this},b.Graphics.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var g,h,i,j,k,l=20,m=this.currentPath.shape.points,n=m[m.length-2],o=m[m.length-1],p=0,q=1;l>=q;q++)p=q/l,g=1-p,h=g*g,i=h*g,j=p*p,k=j*p,m.push(i*n+3*h*p*a+3*g*j*c+k*e,i*o+3*h*p*b+3*g*j*d+k*f);return this.dirty=!0,this},b.Graphics.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(1e-8>m||0===e)(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty=!0,this},b.Graphics.prototype.arc=function(a,b,c,d,e,f){var g,h=a+Math.cos(d)*c,i=b+Math.sin(d)*c;if(this.currentPath?(g=this.currentPath.shape.points,0===g.length?g.push(h,i):(g[g.length-2]!==h||g[g.length-1]!==i)&&g.push(h,i)):(this.moveTo(h,i),g=this.currentPath.shape.points),d===e)return this;!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI);var j=f?-1*(d-e):e-d,k=Math.abs(j)/(2*Math.PI)*40;if(0===j)return this;for(var l=j/(2*k),m=2*l,n=Math.cos(l),o=Math.sin(l),p=k-1,q=p%1/p,r=0;p>=r;r++){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);g.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty=!0,this},b.Graphics.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.Graphics.prototype.drawRect=function(a,c,d,e){return this.drawShape(new b.Rectangle(a,c,d,e)),this},b.Graphics.prototype.drawRoundedRect=function(a,c,d,e,f){return this.drawShape(new b.RoundedRectangle(a,c,d,e,f)),this},b.Graphics.prototype.drawCircle=function(a,c,d){return this.drawShape(new b.Circle(a,c,d)),this},b.Graphics.prototype.drawEllipse=function(a,c,d,e){return this.drawShape(new b.Ellipse(a,c,d,e)),this},b.Graphics.prototype.drawPolygon=function(a){return a instanceof Array||(a=Array.prototype.slice.call(arguments)),this.drawShape(new b.Polygon(a)),this},b.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},b.Graphics.prototype.generateTexture=function(a,c){a=a||1;var d=this.getBounds(),e=new b.CanvasBuffer(d.width*a,d.height*a),f=b.Texture.fromCanvas(e.canvas,c);return f.baseTexture.resolution=a,e.context.scale(a,a),e.context.translate(-d.x,-d.y),b.CanvasGraphics.renderGraphics(this,e.context),f},b.Graphics.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,b.Sprite.prototype._renderWebGL.call(this._cachedSprite,a),void 0;if(a.spriteBatch.stop(),a.blendModeManager.setBlendMode(this.blendMode),this._mask&&a.maskManager.pushMask(this._mask,a),this._filters&&a.filterManager.pushFilter(this._filterBlock),this.blendMode!==a.spriteBatch.currentBlendMode){a.spriteBatch.currentBlendMode=this.blendMode;var c=b.blendModesWebGL[a.spriteBatch.currentBlendMode];a.spriteBatch.gl.blendFunc(c[0],c[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),b.WebGLGraphics.renderGraphics(this,a),this.children.length){a.spriteBatch.start();for(var d=0,e=this.children.length;e>d;d++)this.children[d]._renderWebGL(a);a.spriteBatch.stop()}this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this.mask,a),a.drawCount++,a.spriteBatch.start()}},b.Graphics.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,b.Sprite.prototype._renderCanvas.call(this._cachedSprite,a),void 0;var c=a.context,d=this.worldTransform;this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,c.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a);var e=a.resolution;c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),b.CanvasGraphics.renderGraphics(this,c);for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.Graphics.prototype.getBounds=function(a){if(this.isMask)return b.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var c=this._localBounds,d=c.x,e=c.width+c.x,f=c.y,g=c.height+c.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=i*e+k*g+m,p=l*g+j*e+n,q=i*d+k*g+m,r=l*g+j*d+n,s=i*d+k*f+m,t=l*f+j*d+n,u=i*e+k*f+m,v=l*f+j*e+n,w=o,x=p,y=o,z=p;return y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,z=z>r?r:z,z=z>t?t:z,z=z>v?v:z,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w,x=r>x?r:x,x=t>x?t:x,x=v>x?v:x,this._bounds.x=y,this._bounds.width=w-y,this._bounds.y=z,this._bounds.height=x-z,this._bounds},b.Graphics.prototype.updateLocalBounds=function(){var a=1/0,c=-1/0,d=1/0,e=-1/0;if(this.graphicsData.length)for(var f,g,h,i,j,k,l=0;l<this.graphicsData.length;l++){var m=this.graphicsData[l],n=m.type,o=m.lineWidth;if(f=m.shape,n===b.Graphics.RECT||n===b.Graphics.RREC)h=f.x-o/2,i=f.y-o/2,j=f.width+o,k=f.height+o,a=a>h?h:a,c=h+j>c?h+j:c,d=d>i?i:d,e=i+k>e?i+k:e;else if(n===b.Graphics.CIRC)h=f.x,i=f.y,j=f.radius+o/2,k=f.radius+o/2,a=a>h-j?h-j:a,c=h+j>c?h+j:c,d=d>i-k?i-k:d,e=i+k>e?i+k:e;else if(n===b.Graphics.ELIP)h=f.x,i=f.y,j=f.width+o/2,k=f.height+o/2,a=a>h-j?h-j:a,c=h+j>c?h+j:c,d=d>i-k?i-k:d,e=i+k>e?i+k:e;else{g=f.points;for(var p=0;p<g.length;p+=2)h=g[p],i=g[p+1],a=a>h-o?h-o:a,c=h+o>c?h+o:c,d=d>i-o?i-o:d,e=i+o>e?i+o:e}}else a=0,c=0,d=0,e=0;var q=this.boundsPadding;this._localBounds.x=a-q,this._localBounds.width=c-a+2*q,this._localBounds.y=d-q,this._localBounds.height=e-d+2*q},b.Graphics.prototype._generateCachedSprite=function(){var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(a.width,a.height);else{var c=new b.CanvasBuffer(a.width,a.height),d=b.Texture.fromCanvas(c.canvas);this._cachedSprite=new b.Sprite(d),this._cachedSprite.buffer=c,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._cachedSprite.buffer.context.translate(-a.x,-a.y),this.worldAlpha=1,b.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},b.Graphics.prototype.updateCachedSpriteTexture=function(){var a=this._cachedSprite,b=a.texture,c=a.buffer.canvas;b.baseTexture.width=c.width,b.baseTexture.height=c.height,b.crop.width=b.frame.width=c.width,b.crop.height=b.frame.height=c.height,a._width=c.width,a._height=c.height,b.baseTexture.dirty()},b.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},b.Graphics.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var c=new b.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(c),c.type===b.Graphics.POLY&&(c.shape.closed=this.filling,this.currentPath=c),this.dirty=!0,c},b.GraphicsData=function(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.shape=g,this.type=g.type},b.Graphics.POLY=0,b.Graphics.RECT=1,b.Graphics.CIRC=2,b.Graphics.ELIP=3,b.Graphics.RREC=4,b.Polygon.prototype.type=b.Graphics.POLY,b.Rectangle.prototype.type=b.Graphics.RECT,b.Circle.prototype.type=b.Graphics.CIRC,b.Ellipse.prototype.type=b.Graphics.ELIP,b.RoundedRectangle.prototype.type=b.Graphics.RREC,b.Strip=function(a){b.DisplayObjectContainer.call(this),this.texture=a,this.uvs=new b.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new b.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new b.Float32Array([1,1,1,1]),this.indices=new b.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=b.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=b.Strip.DrawModes.TRIANGLE_STRIP},b.Strip.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Strip.prototype.constructor=b.Strip,b.Strip.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||(a.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(a),a.shaderManager.setShader(a.shaderManager.stripShader),this._renderStrip(a),a.spriteBatch.start())},b.Strip.prototype._initWebGL=function(a){var b=a.gl;this._vertexBuffer=b.createBuffer(),this._indexBuffer=b.createBuffer(),this._uvBuffer=b.createBuffer(),this._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._colorBuffer),b.bufferData(b.ARRAY_BUFFER,this.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)},b.Strip.prototype._renderStrip=function(a){var c=a.gl,d=a.projection,e=a.offset,f=a.shaderManager.stripShader,g=this.drawMode===b.Strip.DrawModes.TRIANGLE_STRIP?c.TRIANGLE_STRIP:c.TRIANGLES;a.blendModeManager.setBlendMode(this.blendMode),c.uniformMatrix3fv(f.translationMatrix,!1,this.worldTransform.toArray(!0)),c.uniform2f(f.projectionVector,d.x,-d.y),c.uniform2f(f.offsetVector,-e.x,-e.y),c.uniform1f(f.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,c.bindBuffer(c.ARRAY_BUFFER,this._vertexBuffer),c.bufferData(c.ARRAY_BUFFER,this.vertices,c.STATIC_DRAW),c.vertexAttribPointer(f.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this._uvBuffer),c.bufferData(c.ARRAY_BUFFER,this.uvs,c.STATIC_DRAW),c.vertexAttribPointer(f.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),this.texture.baseTexture._dirty[c.id]?a.renderer.updateTexture(this.texture.baseTexture):c.bindTexture(c.TEXTURE_2D,this.texture.baseTexture._glTextures[c.id]),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this._indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indices,c.STATIC_DRAW)):(c.bindBuffer(c.ARRAY_BUFFER,this._vertexBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices),c.vertexAttribPointer(f.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this._uvBuffer),c.vertexAttribPointer(f.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),this.texture.baseTexture._dirty[c.id]?a.renderer.updateTexture(this.texture.baseTexture):c.bindTexture(c.TEXTURE_2D,this.texture.baseTexture._glTextures[c.id]),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),c.drawElements(g,this.indices.length,c.UNSIGNED_SHORT,0)},b.Strip.prototype._renderCanvas=function(a){var c=a.context,d=this.worldTransform;a.roundPixels?c.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),this.drawMode===b.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(c):this._renderCanvasTriangles(c)},b.Strip.prototype._renderCanvasTriangleStrip=function(a){var b=this.vertices,c=this.uvs,d=b.length/2;this.count++;for(var e=0;d-2>e;e++){var f=2*e;this._renderCanvasDrawTriangle(a,b,c,f,f+2,f+4)}},b.Strip.prototype._renderCanvasTriangles=function(a){var b=this.vertices,c=this.uvs,d=this.indices,e=d.length;this.count++;for(var f=0;e>f;f+=3){var g=2*d[f],h=2*d[f+1],i=2*d[f+2];this._renderCanvasDrawTriangle(a,b,c,g,h,i)}},b.Strip.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g=this.texture.baseTexture.source,h=this.texture.width,i=this.texture.height,j=b[d],k=b[e],l=b[f],m=b[d+1],n=b[e+1],o=b[f+1],p=c[d]*h,q=c[e]*h,r=c[f]*h,s=c[d+1]*i,t=c[e+1]*i,u=c[f+1]*i;if(this.canvasPadding>0){var v=this.canvasPadding/this.worldTransform.a,w=this.canvasPadding/this.worldTransform.d,x=(j+k+l)/3,y=(m+n+o)/3,z=j-x,A=m-y,B=Math.sqrt(z*z+A*A);j=x+z/B*(B+v),m=y+A/B*(B+w),z=k-x,A=n-y,B=Math.sqrt(z*z+A*A),k=x+z/B*(B+v),n=y+A/B*(B+w),z=l-x,A=o-y,B=Math.sqrt(z*z+A*A),l=x+z/B*(B+v),o=y+A/B*(B+w)}a.save(),a.beginPath(),a.moveTo(j,m),a.lineTo(k,n),a.lineTo(l,o),a.closePath(),a.clip();var C=p*t+s*r+q*u-t*r-s*q-p*u,D=j*t+s*l+k*u-t*l-s*k-j*u,E=p*k+j*r+q*l-k*r-j*q-p*l,F=p*t*l+s*k*r+j*q*u-j*t*r-s*q*l-p*k*u,G=m*t+s*o+n*u-t*o-s*n-m*u,H=p*n+m*r+q*o-n*r-m*q-p*o,I=p*t*o+s*n*r+m*q*u-m*t*r-s*q*o-p*n*u;a.transform(D/C,G/C,E/C,H/C,F/C,I/C),a.drawImage(g,0,0),a.restore()},b.Strip.prototype.renderStripFlat=function(a){var b=this.context,c=a.vertices,d=c.length/2;this.count++,b.beginPath();for(var e=1;d-2>e;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},b.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},b.Strip.prototype.getBounds=function(a){for(var c=a||this.worldTransform,d=c.a,e=c.b,f=c.c,g=c.d,h=c.tx,i=c.ty,j=-1/0,k=-1/0,l=1/0,m=1/0,n=this.vertices,o=0,p=n.length;p>o;o+=2){var q=n[o],r=n[o+1],s=d*q+f*r+h,t=g*r+e*q+i;l=l>s?s:l,m=m>t?t:m,j=s>j?s:j,k=t>k?t:k}if(l===-1/0||1/0===k)return b.EmptyRectangle;var u=this._bounds;return u.x=l,u.width=j-l,u.y=m,u.height=k-m,this._currentBounds=u,u},b.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},b.Rope=function(a,c){b.Strip.call(this,a),this.points=c,this.vertices=new b.Float32Array(4*c.length),this.uvs=new b.Float32Array(4*c.length),this.colors=new b.Float32Array(2*c.length),this.indices=new b.Uint16Array(2*c.length),this.refresh()},b.Rope.prototype=Object.create(b.Strip.prototype),b.Rope.prototype.constructor=b.Rope,b.Rope.prototype.refresh=function(){var a=this.points;if(!(a.length<1)){var b=this.uvs,c=a[0],d=this.indices,e=this.colors;this.count-=.2,b[0]=0,b[1]=0,b[2]=0,b[3]=1,e[0]=1,e[1]=1,d[0]=0,d[1]=1;for(var f,g,h,i=a.length,j=1;i>j;j++)f=a[j],g=4*j,h=j/(i-1),j%2?(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1):(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1),g=2*j,e[g]=1,e[g+1]=1,g=2*j,d[g]=g,d[g+1]=g+1,c=f}},b.Rope.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){var c,d=a[0],e={x:0,y:0};this.count-=.2;for(var f,g,h,i,j,k=this.vertices,l=a.length,m=0;l>m;m++)f=a[m],g=4*m,c=m<a.length-1?a[m+1]:f,e.y=-(c.x-d.x),e.x=c.y-d.y,h=10*(1-m/(l-1)),h>1&&(h=1),i=Math.sqrt(e.x*e.x+e.y*e.y),j=this.texture.height/2,e.x/=i,e.y/=i,e.x*=j,e.y*=j,k[g]=f.x+e.x,k[g+1]=f.y+e.y,k[g+2]=f.x-e.x,k[g+3]=f.y-e.y,d=f;b.DisplayObjectContainer.prototype.updateTransform.call(this)}},b.Rope.prototype.setTexture=function(a){this.texture=a},b.TilingSprite=function(a,c,d){b.Sprite.call(this,a),this._width=c||100,this._height=d||100,this.tileScale=new b.Point(1,1),this.tileScaleOffset=new b.Point(1,1),this.tilePosition=new b.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=b.blendModes.NORMAL},b.TilingSprite.prototype=Object.create(b.Sprite.prototype),b.TilingSprite.prototype.constructor=b.TilingSprite,Object.defineProperty(b.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a}}),Object.defineProperty(b.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a}}),b.TilingSprite.prototype.setTexture=function(a){this.texture!==a&&(this.texture=a,this.refreshTexture=!0,this.cachedTint=16777215)},b.TilingSprite.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha){var b,c;for(this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(a.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):a.spriteBatch.renderTilingSprite(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop(),this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this._mask,a),a.spriteBatch.start()}},b.TilingSprite.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){var c=a.context;this._mask&&a.maskManager.pushMask(this._mask,c),c.globalAlpha=this.worldAlpha;var d,e,f=this.worldTransform,g=a.resolution;if(c.setTransform(f.a*g,f.b*g,f.c*g,f.d*g,f.tx*g,f.ty*g),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=c.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,c.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]);var h=this.tilePosition,i=this.tileScale;for(h.x%=this.tilingTexture.baseTexture.width,h.y%=this.tilingTexture.baseTexture.height,c.scale(i.x,i.y),c.translate(h.x+this.anchor.x*-this._width,h.y+this.anchor.y*-this._height),c.fillStyle=this.__tilePattern,c.fillRect(-h.x,-h.y,this._width/i.x,this._height/i.y),c.scale(1/i.x,1/i.y),c.translate(-h.x+this.anchor.x*this._width,-h.y+this.anchor.y*this._height),this._mask&&a.maskManager.popMask(a.context),d=0,e=this.children.length;e>d;d++)this.children[d]._renderCanvas(a)}},b.TilingSprite.prototype.getBounds=function(){var a=this._width,b=this._height,c=a*(1-this.anchor.x),d=a*-this.anchor.x,e=b*(1-this.anchor.y),f=b*-this.anchor.y,g=this.worldTransform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=h*d+j*f+l,o=k*f+i*d+m,p=h*c+j*f+l,q=k*f+i*c+m,r=h*c+j*e+l,s=k*e+i*c+m,t=h*d+j*e+l,u=k*e+i*d+m,v=-1/0,w=-1/0,x=1/0,y=1/0;x=x>n?n:x,x=x>p?p:x,x=x>r?r:x,x=x>t?t:x,y=y>o?o:y,y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,v=n>v?n:v,v=p>v?p:v,v=r>v?r:v,v=t>v?t:v,w=o>w?o:w,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w;var z=this._bounds;return z.x=x,z.width=v-x,z.y=y,z.height=w-y,this._currentBounds=z,z},b.TilingSprite.prototype.onTextureUpdate=function(){},b.TilingSprite.prototype.generateTilingTexture=function(a){if(this.texture.baseTexture.hasLoaded){var c,d,e=this.originalTexture||this.texture,f=e.frame,g=f.width!==e.baseTexture.width||f.height!==e.baseTexture.height,h=!1;if(a?(c=b.getNextPowerOfTwo(f.width),d=b.getNextPowerOfTwo(f.height),(f.width!==c||f.height!==d||e.baseTexture.width!==c||e.baseTexture.height||d)&&(h=!0)):g&&(c=f.width,d=f.height,h=!0),h){var i;this.tilingTexture&&this.tilingTexture.isTiling?(i=this.tilingTexture.canvasBuffer,i.resize(c,d),this.tilingTexture.baseTexture.width=c,this.tilingTexture.baseTexture.height=d,this.tilingTexture.needsUpdate=!0):(i=new b.CanvasBuffer(c,d),this.tilingTexture=b.Texture.fromCanvas(i.canvas),this.tilingTexture.canvasBuffer=i,this.tilingTexture.isTiling=!0),i.context.drawImage(e.baseTexture.source,e.crop.x,e.crop.y,e.crop.width,e.crop.height,0,0,c,d),this.tileScaleOffset.x=f.width/c,this.tileScaleOffset.y=f.height/d}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var d={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};d.BoneData=function(a,b){this.name=a,this.parent=b},d.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},d.SlotData=function(a,b){this.name=a,this.boneData=b},d.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},d.IkConstraintData=function(a){this.name=a,this.bones=[]},d.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},d.Bone=function(a,b,c){this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()},d.Bone.yDown=!1,d.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var a=this.parent;if(a)this.worldX=this.x*a.m00+this.y*a.m01+a.worldX,this.worldY=this.x*a.m10+this.y*a.m11+a.worldY,this.data.inheritScale?(this.worldScaleX=a.worldScaleX*this.scaleX,this.worldScaleY=a.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?a.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=a.worldFlipX!=this.flipX,this.worldFlipY=a.worldFlipY!=this.flipY;else{var b=this.skeleton.flipX,c=this.skeleton.flipY;this.worldX=b?-this.x:this.x,this.worldY=c!=d.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=b!=this.flipX,this.worldFlipY=c!=this.flipY}var e=this.worldRotation*d.degRad,f=Math.cos(e),g=Math.sin(e);this.worldFlipX?(this.m00=-f*this.worldScaleX,this.m01=g*this.worldScaleY):(this.m00=f*this.worldScaleX,this.m01=-g*this.worldScaleY),this.worldFlipY!=d.Bone.yDown?(this.m10=-g*this.worldScaleX,this.m11=-f*this.worldScaleY):(this.m10=g*this.worldScaleX,this.m11=f*this.worldScaleY)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.rotationIK=this.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.flipX=a.flipX,this.flipY=a.flipY},worldToLocal:function(a){var b=a[0]-this.worldX,c=a[1]-this.worldY,e=this.m00,f=this.m10,g=this.m01,h=this.m11;this.worldFlipX!=(this.worldFlipY!=d.Bone.yDown)&&(e=-e,h=-h);var i=1/(e*h-g*f);a[0]=b*e*i-c*g*i,a[1]=c*h*i-b*f*i},localToWorld:function(a){var b=a[0],c=a[1];a[0]=b*this.m00+c*this.m01+this.worldX,a[1]=b*this.m10+c*this.m11+this.worldY}},d.Slot=function(a,b){this.data=a,this.bone=b,this.setToSetupPose()},d.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(a){this.attachment=a,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(a){this._attachmentTime=this.bone.skeleton.time-a},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.bone.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},d.IkConstraint=function(a,b){this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.bones=[];for(var c=0,d=a.bones.length;d>c;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)},d.IkConstraint.prototype={apply:function(){var a=this.target,b=this.bones;switch(b.length){case 1:d.IkConstraint.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:d.IkConstraint.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix)}}},d.IkConstraint.apply1=function(a,b,c,e){var f=a.data.inheritRotation&&a.parent?a.parent.worldRotation:0,g=a.rotation,h=Math.atan2(c-a.worldY,b-a.worldX)*d.radDeg-f;a.rotationIK=g+(h-g)*e},d.IkConstraint.apply2=function(a,b,c,e,f,g){var h=b.rotation,i=a.rotation;if(!g)return b.rotationIK=h,void(a.rotationIK=i);var j,k,l=d.temp,m=a.parent;m?(l[0]=c,l[1]=e,m.worldToLocal(l),c=(l[0]-a.x)*m.worldScaleX,e=(l[1]-a.y)*m.worldScaleY):(c-=a.x,e-=a.y),b.parent==a?(j=b.x,k=b.y):(l[0]=b.x,l[1]=b.y,b.parent.localToWorld(l),a.worldToLocal(l),j=l[0],k=l[1]);var n=j*a.worldScaleX,o=k*a.worldScaleY,p=Math.atan2(o,n),q=Math.sqrt(n*n+o*o),r=b.data.length*b.worldScaleX,s=2*q*r;if(1e-4>s)return void(b.rotationIK=h+(Math.atan2(e,c)*d.radDeg-i-h)*g);
var t=(c*c+e*e-q*q-r*r)/s;-1>t?t=-1:t>1&&(t=1);var u=Math.acos(t)*f,v=q+r*t,w=r*Math.sin(u),x=Math.atan2(e*v-c*w,c*v+e*w),y=(x-p)*d.radDeg-i;y>180?y-=360:-180>y&&(y+=360),a.rotationIK=i+y*g,y=(u+p)*d.radDeg-h,y>180?y-=360:-180>y&&(y+=360),b.rotationIK=h+(y+a.worldRotation-b.parent.worldRotation)*g},d.Skin=function(a){this.name=a,this.attachments={}},d.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},d.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},d.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},d.Animation.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(!e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},d.Animation.binarySearch1=function(a,b){var c=0,d=a.length-2;if(!d)return 1;for(var e=d>>>1;;){if(a[e+1]<=b?c=e+1:d=e,c==d)return c+1;e=c+d>>>1}},d.Animation.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},d.Curves=function(){this.curves=[]},d.Curves.prototype={setLinear:function(a){this.curves[19*a]=0},setStepped:function(a){this.curves[19*a]=1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=b*i+m*j+o*h,r=c*i+n*j+p*h,s=m*k+o*l,t=n*k+p*l,u=o*l,v=p*l,w=19*a,x=this.curves;x[w++]=2;for(var y=q,z=r,A=w+19-1;A>w;w+=2)x[w]=y,x[w+1]=z,q+=s,r+=t,s+=u,t+=v,y+=q,z+=r},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=this.curves,d=19*a,e=c[d];if(0===e)return b;if(1==e)return 0;d++;for(var f=0,g=d,h=d+19-1;h>d;d+=2)if(f=c[d],f>=b){var i,j;return d==g?(i=0,j=0):(i=c[d-2],j=c[d-1]),j+(c[d+1]-j)*(b-i)/(f-i)}var k=c[d-1];return k+(1-k)*(b-f)/(1-f)}},d.RotateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=2*a},d.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-2]){for(var i=h.data.rotation+g[g.length-1]-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;return void(h.rotation+=i*f)}var j=d.Animation.binarySearch(g,c,2),k=g[j-1],l=g[j],m=1-(c-l)/(g[j-2]-l);m=this.curves.getCurvePercent(j/2-1,m);for(var i=g[j+1]-k;i>180;)i-=360;for(;-180>i;)i+=360;for(i=h.data.rotation+(k+i*m)-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;h.rotation+=i*f}}},d.TranslateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.x+=(h.data.x+g[g.length-2]-h.x)*f,void(h.y+=(h.data.y+g[g.length-1]-h.y)*f);var i=d.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.x+=(h.data.x+j+(g[i+1]-j)*m-h.x)*f,h.y+=(h.data.y+k+(g[i+2]-k)*m-h.y)*f}}},d.ScaleTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.scaleX+=(h.data.scaleX*g[g.length-2]-h.scaleX)*f,void(h.scaleY+=(h.data.scaleY*g[g.length-1]-h.scaleY)*f);var i=d.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.scaleX+=(h.data.scaleX*(j+(g[i+1]-j)*m)-h.scaleX)*f,h.scaleY+=(h.data.scaleY*(k+(g[i+2]-k)*m)-h.scaleY)*f}}},d.ColorTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=5*a},d.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h,i,j,k;if(c>=g[g.length-5]){var l=g.length-1;h=g[l-3],i=g[l-2],j=g[l-1],k=g[l]}else{var m=d.Animation.binarySearch(g,c,5),n=g[m-4],o=g[m-3],p=g[m-2],q=g[m-1],r=g[m],s=1-(c-r)/(g[m-5]-r);s=this.curves.getCurvePercent(m/5-1,s),h=n+(g[m+1]-n)*s,i=o+(g[m+2]-o)*s,j=p+(g[m+3]-p)*s,k=q+(g[m+4]-q)*s}var t=a.slots[this.slotIndex];1>f?(t.r+=(h-t.r)*f,t.g+=(i-t.g)*f,t.b+=(j-t.b)*f,t.a+=(k-t.a)*f):(t.r=h,t.g=i,t.b=j,t.a=k)}}},d.AttachmentTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},d.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var e=this.frames;if(c<e[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=c>=e[e.length-1]?e.length-1:d.Animation.binarySearch1(e,c)-1;if(!(e[f]<b)){var g=this.attachmentNames[f];a.slots[this.slotIndex].setAttachment(g?a.getAttachmentBySlotIndex(this.slotIndex,g):null)}}},d.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},d.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,e,f){if(e){var g=this.frames,h=g.length;if(b>c)this.apply(a,b,Number.MAX_VALUE,e,f),b=-1;else if(b>=g[h-1])return;if(!(c<g[0])){var i;if(b<g[0])i=0;else{i=d.Animation.binarySearch1(g,b);for(var j=g[i];i>0&&g[i-1]==j;)i--}for(var k=this.events;h>i&&c>=g[i];i++)e.push(k[i])}}}},d.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},d.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var e=this.frames;if(!(c<e[0])){var f;f=c>=e[e.length-1]?e.length-1:d.Animation.binarySearch1(e,c)-1;var g=a.drawOrder,h=a.slots,i=this.drawOrders[f];if(i)for(var j=0,k=i.length;k>j;j++)g[j]=a.slots[i[j]];else for(var j=0,k=h.length;k>j;j++)g[j]=h[j]}}},d.FfdTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=a,this.frameVertices=[],this.frameVertices.length=a},d.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},apply:function(a,b,c,e,f){var g=a.slots[this.slotIndex];if(g.attachment==this.attachment){var h=this.frames;if(!(c<h[0])){var i=this.frameVertices,j=i[0].length,k=g.attachmentVertices;if(k.length!=j&&(f=1),k.length=j,c>=h[h.length-1]){var l=i[h.length-1];if(1>f)for(var m=0;j>m;m++)k[m]+=(l[m]-k[m])*f;else for(var m=0;j>m;m++)k[m]=l[m]}else{var n=d.Animation.binarySearch1(h,c),o=h[n],p=1-(c-o)/(h[n-1]-o);p=this.curves.getCurvePercent(n-1,0>p?0:p>1?1:p);var q=i[n-1],r=i[n];if(1>f)for(var m=0;j>m;m++){var s=q[m];k[m]+=(s+(r[m]-s)*p-k[m])*f}else for(var m=0;j>m;m++){var s=q[m];k[m]=s+(r[m]-s)*p}}}}}},d.IkConstraintTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.ikConstraints[this.ikConstraintIndex];if(c>=g[g.length-3])return h.mix+=(g[g.length-2]-h.mix)*f,void(h.bendDirection=g[g.length-1]);var i=d.Animation.binarySearch(g,c,3),j=g[i+-2],k=g[i],l=1-(c-k)/(g[i+-3]-k);l=this.curves.getCurvePercent(i/3-1,l);var m=j+(g[i+1]-j)*l;h.mix+=(m-h.mix)*f,h.bendDirection=g[i+-1]}}},d.FlipXTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=2*a},d.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c?1:0},apply:function(a,b,c){var e=this.frames;if(c<e[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=(c>=e[e.length-2]?e.length:d.Animation.binarySearch(e,c,2))-2;e[f]<b||(a.bones[boneIndex].flipX=0!=e[f+1])}},d.FlipYTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=2*a},d.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c?1:0},apply:function(a,b,c){var e=this.frames;if(c<e[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=(c>=e[e.length-2]?e.length:d.Animation.binarySearch(e,c,2))-2;e[f]<b||(a.bones[boneIndex].flipY=0!=e[f+1])}},d.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},d.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},d.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var e=a.bones[b],f=e.parent?this.bones[a.bones.indexOf(e.parent)]:null;this.bones.push(new d.Bone(e,this,f))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var g=a.slots[b],h=this.bones[a.bones.indexOf(g.boneData)],i=new d.Slot(g,h);this.slots.push(i),this.drawOrder.push(i)}this.ikConstraints=[];for(var b=0,c=a.ikConstraints.length;c>b;b++)this.ikConstraints.push(new d.IkConstraint(a.ikConstraints[b],this));this.boneCache=[],this.updateCache()},d.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var a=this.ikConstraints,b=a.length,c=b+1,d=this.boneCache;d.length>c&&(d.length=c);for(var e=0,f=d.length;f>e;e++)d[e].length=0;for(;d.length<c;)d[d.length]=[];var g=d[0],h=this.bones;a:for(var e=0,f=h.length;f>e;e++){var i=h[e],j=i;do{for(var k=0;b>k;k++)for(var l=a[k],m=l.bones[0],n=l.bones[l.bones.length-1];;){if(j==n){d[k].push(i),d[k+1].push(i);continue a}if(n==m)break;n=n.parent}j=j.parent}while(j);g[g.length]=i}},updateWorldTransform:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++){var d=a[b];d.rotationIK=d.rotation}for(var b=0,e=this.boneCache.length-1;;){for(var f=this.boneCache[b],g=0,h=f.length;h>g;g++)f[g].updateWorldTransform();if(b==e)break;this.ikConstraints[b].apply(),b++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose();for(var d=this.ikConstraints,b=0,c=d.length;c>b;b++){var e=d[b];e.bendDirection=e.data.bendDirection,e.mix=e.data.mix}},setSlotsToSetupPose:function(){for(var a=this.slots,b=this.drawOrder,c=0,d=a.length;d>c;c++)b[c]=a[c],a[c].setToSetupPose(c)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){if(a)if(this.skin)a._attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c],f=e.data.attachmentName;if(f){var g=a.getAttachment(c,f);g&&e.setAttachment(g)}}this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.length;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachmentBySlotIndex(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},update:function(a){this.time+=a}},d.EventData=function(a){this.name=a},d.EventData.prototype={intValue:0,floatValue:0,stringValue:null},d.Event=function(a){this.data=a},d.Event.prototype={intValue:0,floatValue:0,stringValue:null},d.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},d.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},d.RegionAttachment.prototype={type:d.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,e=-this.height/2*this.scaleY+this.regionOffsetY*b,f=c+this.regionWidth*a,g=e+this.regionHeight*b,h=this.rotation*d.degRad,i=Math.cos(h),j=Math.sin(h),k=c*i+this.x,l=c*j,m=e*i+this.y,n=e*j,o=f*i+this.x,p=f*j,q=g*i+this.y,r=g*j,s=this.offset;s[0]=k-n,s[1]=m+l,s[2]=k-r,s[3]=q+l,s[4]=o-r,s[5]=q+p,s[6]=o-n,s[7]=m+p},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},d.MeshAttachment=function(a){this.name=a},d.MeshAttachment.prototype={type:d.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c=this.regionUVs.length;if(this.uvs&&this.uvs.length==c||(this.uvs=new d.Float32Array(c)),this.regionRotate)for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e+1]*a,this.uvs[e+1]=this.regionV+b-this.regionUVs[e]*b;else for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e]*a,this.uvs[e+1]=this.regionV+this.regionUVs[e+1]*b},computeWorldVertices:function(a,b,c,d){var e=c.bone;a+=e.worldX,b+=e.worldY;var f=e.m00,g=e.m01,h=e.m10,i=e.m11,j=this.vertices,k=j.length;c.attachmentVertices.length==k&&(j=c.attachmentVertices);for(var l=0;k>l;l+=2){var m=j[l],n=j[l+1];d[l]=m*f+n*g+a,d[l+1]=m*h+n*i+b}}},d.SkinnedMeshAttachment=function(a){this.name=a},d.SkinnedMeshAttachment.prototype={type:d.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c=this.regionUVs.length;if(this.uvs&&this.uvs.length==c||(this.uvs=new d.Float32Array(c)),this.regionRotate)for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e+1]*a,this.uvs[e+1]=this.regionV+b-this.regionUVs[e]*b;else for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e]*a,this.uvs[e+1]=this.regionV+this.regionUVs[e+1]*b},computeWorldVertices:function(a,b,c,d){var e,f,g,h,i,j,k,l=c.bone.skeleton.bones,m=this.weights,n=this.bones,o=0,p=0,q=0,r=0,s=n.length;if(c.attachmentVertices.length)for(var t=c.attachmentVertices;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3,r+=2)h=l[n[p]],i=m[q]+t[r],j=m[q+1]+t[r+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}else for(;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3)h=l[n[p]],i=m[q],j=m[q+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}}},d.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},d.BoundingBoxAttachment.prototype={type:d.AttachmentType.boundingbox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},d.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},d.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=a.name+":"+b.name;return this.animationToMixTime.hasOwnProperty(c)?this.animationToMixTime[c]:this.defaultMix}},d.TrackEntry=function(){},d.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},d.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},d.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){if(c.time+=a*c.timeScale,c.previous){var d=a*c.previous.timeScale;c.previous.time+=d,c.mixTime+=d}var e=c.next;e?(e.time=c.lastTime-e.delay,e.time>=0&&this.setCurrent(b,e)):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.lastTime,f=c.endTime,g=c.loop;!g&&d>f&&(d=f);var h=c.previous;if(h){var i=h.time;!h.loop&&i>h.endTime&&(i=h.endTime),h.animation.apply(a,i,i,h.loop,null);var j=c.mixTime/c.mixDuration*c.mix;j>=1&&(j=1,c.previous=null),c.animation.mix(a,c.lastTime,d,g,this.events,j)}else 1==c.mix?c.animation.apply(a,c.lastTime,d,g,this.events):c.animation.mix(a,c.lastTime,d,g,this.events,c.mix);for(var k=0,l=this.events.length;l>k;k++){var m=this.events[k];c.onEvent&&c.onEvent(b,m),this.onEvent&&this.onEvent(b,m)}if(g?e%f>d%f:f>e&&d>=f){var n=Math.floor(d/f);c.onComplete&&c.onComplete(b,n),this.onComplete&&this.onComplete(b,n)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(b.onEnd&&b.onEnd(a),this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);if(c){var d=c.previous;c.previous=null,c.onEnd&&c.onEnd(a),this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=d&&c.mixTime/c.mixDuration<.5?d:c)}this.tracks[a]=b,b.onStart&&b.onStart(a),this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var e=new d.TrackEntry;return e.animation=b,e.loop=c,e.endTime=b.duration,this.setCurrent(a,e),e},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,e){var f=new d.TrackEntry;f.animation=b,f.loop=c,f.endTime=b.duration;var g=this._expandToIndex(a);if(g){for(;g.next;)g=g.next;g.next=f}else this.tracks[a]=f;return 0>=e&&(g?e+=g.endTime-this.data.getMix(g.animation,b):e=0),f.delay=e,f},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},d.SkeletonJson=function(a){this.attachmentLoader=a},d.SkeletonJson.prototype={scale:1,readSkeletonData:function(a,b){var c=new d.SkeletonData;c.name=b;var e=a.skeleton;e&&(c.hash=e.hash,c.version=e.spine,c.width=e.width||0,c.height=e.height||0);for(var f=a.bones,g=0,h=f.length;h>g;g++){var i=f[g],j=null;if(i.parent&&(j=c.findBone(i.parent),!j))throw"Parent bone not found: "+i.parent;var k=new d.BoneData(i.name,j);k.length=(i.length||0)*this.scale,k.x=(i.x||0)*this.scale,k.y=(i.y||0)*this.scale,k.rotation=i.rotation||0,k.scaleX=i.hasOwnProperty("scaleX")?i.scaleX:1,k.scaleY=i.hasOwnProperty("scaleY")?i.scaleY:1,k.inheritScale=i.hasOwnProperty("inheritScale")?i.inheritScale:!0,k.inheritRotation=i.hasOwnProperty("inheritRotation")?i.inheritRotation:!0,c.bones.push(k)}var l=a.ik;if(l)for(var g=0,h=l.length;h>g;g++){for(var m=l[g],n=new d.IkConstraintData(m.name),f=m.bones,o=0,p=f.length;p>o;o++){var q=c.findBone(f[o]);if(!q)throw"IK bone not found: "+f[o];n.bones.push(q)}if(n.target=c.findBone(m.target),!n.target)throw"Target bone not found: "+m.target;n.bendDirection=!m.hasOwnProperty("bendPositive")||m.bendPositive?1:-1,n.mix=m.hasOwnProperty("mix")?m.mix:1,c.ikConstraints.push(n)}for(var r=a.slots,g=0,h=r.length;h>g;g++){var s=r[g],k=c.findBone(s.bone);if(!k)throw"Slot bone not found: "+s.bone;var t=new d.SlotData(s.name,k),u=s.color;u&&(t.r=this.toColor(u,0),t.g=this.toColor(u,1),t.b=this.toColor(u,2),t.a=this.toColor(u,3)),t.attachmentName=s.attachment,t.additiveBlending=s.additive&&"true"==s.additive,c.slots.push(t)}var v=a.skins;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new d.Skin(w);for(var z in x)if(x.hasOwnProperty(z)){var A=c.findSlotIndex(z),B=x[z];for(var C in B)if(B.hasOwnProperty(C)){var D=this.readAttachment(y,C,B[C]);D&&y.addAttachment(A,C,D)}}c.skins.push(y),"default"==y.name&&(c.defaultSkin=y)}var E=a.events;for(var F in E)if(E.hasOwnProperty(F)){var G=E[F],H=new d.EventData(F);H.intValue=G["int"]||0,H.floatValue=G["float"]||0,H.stringValue=G.string||null,c.events.push(H)}var I=a.animations;for(var J in I)I.hasOwnProperty(J)&&this.readAnimation(J,I[J],c);return c},readAttachment:function(a,b,c){b=c.name||b;var e=d.AttachmentType[c.type||"region"],f=c.path||b,g=this.scale;if(e==d.AttachmentType.region){var h=this.attachmentLoader.newRegionAttachment(a,b,f);if(!h)return null;h.path=f,h.x=(c.x||0)*g,h.y=(c.y||0)*g,h.scaleX=c.hasOwnProperty("scaleX")?c.scaleX:1,h.scaleY=c.hasOwnProperty("scaleY")?c.scaleY:1,h.rotation=c.rotation||0,h.width=(c.width||0)*g,h.height=(c.height||0)*g;var i=c.color;return i&&(h.r=this.toColor(i,0),h.g=this.toColor(i,1),h.b=this.toColor(i,2),h.a=this.toColor(i,3)),h.updateOffset(),h}if(e==d.AttachmentType.mesh){var j=this.attachmentLoader.newMeshAttachment(a,b,f);return j?(j.path=f,j.vertices=this.getFloatArray(c,"vertices",g),j.triangles=this.getIntArray(c,"triangles"),j.regionUVs=this.getFloatArray(c,"uvs",1),j.updateUVs(),i=c.color,i&&(j.r=this.toColor(i,0),j.g=this.toColor(i,1),j.b=this.toColor(i,2),j.a=this.toColor(i,3)),j.hullLength=2*(c.hull||0),c.edges&&(j.edges=this.getIntArray(c,"edges")),j.width=(c.width||0)*g,j.height=(c.height||0)*g,j):null}if(e==d.AttachmentType.skinnedmesh){var j=this.attachmentLoader.newSkinnedMeshAttachment(a,b,f);if(!j)return null;j.path=f;for(var k=this.getFloatArray(c,"uvs",1),l=this.getFloatArray(c,"vertices",1),m=[],n=[],o=0,p=l.length;p>o;){var q=0|l[o++];n[n.length]=q;for(var r=o+4*q;r>o;)n[n.length]=l[o],m[m.length]=l[o+1]*g,m[m.length]=l[o+2]*g,m[m.length]=l[o+3],o+=4}return j.bones=n,j.weights=m,j.triangles=this.getIntArray(c,"triangles"),j.regionUVs=k,j.updateUVs(),i=c.color,i&&(j.r=this.toColor(i,0),j.g=this.toColor(i,1),j.b=this.toColor(i,2),j.a=this.toColor(i,3)),j.hullLength=2*(c.hull||0),c.edges&&(j.edges=this.getIntArray(c,"edges")),j.width=(c.width||0)*g,j.height=(c.height||0)*g,j}if(e==d.AttachmentType.boundingbox){for(var s=this.attachmentLoader.newBoundingBoxAttachment(a,b),l=c.vertices,o=0,p=l.length;p>o;o++)s.vertices.push(l[o]*g);return s}throw"Unknown attachment type: "+e},readAnimation:function(a,b,c){var e=[],f=0,g=b.slots;for(var h in g)if(g.hasOwnProperty(h)){var i=g[h],j=c.findSlotIndex(h);for(var k in i)if(i.hasOwnProperty(k)){var l=i[k];if("color"==k){var m=new d.ColorTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],r=q.color,s=this.toColor(r,0),t=this.toColor(r,1),u=this.toColor(r,2),v=this.toColor(r,3);m.setFrame(n,q.time,s,t,u,v),this.readCurve(m,n,q),n++}e.push(m),f=Math.max(f,m.frames[5*m.getFrameCount()-5])}else{if("attachment"!=k)throw"Invalid timeline type for a slot: "+k+" ("+h+")";var m=new d.AttachmentTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n++,q.time,q.name)}e.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}}}var w=b.bones;for(var x in w)if(w.hasOwnProperty(x)){var y=c.findBoneIndex(x);if(-1==y)throw"Bone not found: "+x;var z=w[x];for(var k in z)if(z.hasOwnProperty(k)){var l=z[k];if("rotate"==k){var m=new d.RotateTimeline(l.length);m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n,q.time,q.angle),this.readCurve(m,n,q),n++}e.push(m),f=Math.max(f,m.frames[2*m.getFrameCount()-2])}else if("translate"==k||"scale"==k){var m,A=1;"scale"==k?m=new d.ScaleTimeline(l.length):(m=new d.TranslateTimeline(l.length),A=this.scale),m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],B=(q.x||0)*A,C=(q.y||0)*A;m.setFrame(n,q.time,B,C),this.readCurve(m,n,q),n++}e.push(m),f=Math.max(f,m.frames[3*m.getFrameCount()-3])}else{if("flipX"!=k&&"flipY"!=k)throw"Invalid timeline type for a bone: "+k+" ("+x+")";var B="flipX"==k,m=B?new d.FlipXTimeline(l.length):new d.FlipYTimeline(l.length);m.boneIndex=y;for(var D=B?"x":"y",n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n,q.time,q[D]||!1),n++}e.push(m),f=Math.max(f,m.frames[2*m.getFrameCount()-2])}}}var E=b.ik;for(var F in E)if(E.hasOwnProperty(F)){var G=c.findIkConstraint(F),l=E[F],m=new d.IkConstraintTimeline(l.length);m.ikConstraintIndex=c.ikConstraints.indexOf(G);for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],H=q.hasOwnProperty("mix")?q.mix:1,I=!q.hasOwnProperty("bendPositive")||q.bendPositive?1:-1;m.setFrame(n,q.time,H,I),this.readCurve(m,n,q),n++}e.push(m),f=Math.max(f,m.frames[3*m.frameCount-3])}var J=b.ffd;for(var K in J){var L=c.findSkin(K),i=J[K];for(h in i){var j=c.findSlotIndex(h),M=i[h];for(var N in M){var l=M[N],m=new d.FfdTimeline(l.length),O=L.getAttachment(j,N);if(!O)throw"FFD attachment not found: "+N;m.slotIndex=j,m.attachment=O;var P,Q=O.type==d.AttachmentType.mesh;P=Q?O.vertices.length:O.weights.length/3*2;for(var n=0,o=0,p=l.length;p>o;o++){var R,q=l[o];if(q.vertices){var S=q.vertices,R=[];R.length=P;var T=q.offset||0,U=S.length;if(1==this.scale)for(var V=0;U>V;V++)R[V+T]=S[V];else for(var V=0;U>V;V++)R[V+T]=S[V]*this.scale;if(Q)for(var W=O.vertices,V=0,U=R.length;U>V;V++)R[V]+=W[V]}else Q?R=O.vertices:(R=[],R.length=P);m.setFrame(n,q.time,R),this.readCurve(m,n,q),n++}e[e.length]=m,f=Math.max(f,m.frames[m.frameCount-1])}}}var X=b.drawOrder;if(X||(X=b.draworder),X){for(var m=new d.DrawOrderTimeline(X.length),Y=c.slots.length,n=0,o=0,p=X.length;p>o;o++){var Z=X[o],$=null;if(Z.offsets){$=[],$.length=Y;for(var V=Y-1;V>=0;V--)$[V]=-1;var _=Z.offsets,ab=[];ab.length=Y-_.length;for(var bb=0,cb=0,V=0,U=_.length;U>V;V++){var db=_[V],j=c.findSlotIndex(db.slot);if(-1==j)throw"Slot not found: "+db.slot;for(;bb!=j;)ab[cb++]=bb++;$[bb+db.offset]=bb++}for(;Y>bb;)ab[cb++]=bb++;for(var V=Y-1;V>=0;V--)-1==$[V]&&($[V]=ab[--cb])}m.setFrame(n++,Z.time,$)}e.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}var eb=b.events;if(eb){for(var m=new d.EventTimeline(eb.length),n=0,o=0,p=eb.length;p>o;o++){var fb=eb[o],gb=c.findEvent(fb.name);if(!gb)throw"Event not found: "+fb.name;var hb=new d.Event(gb);hb.intValue=fb.hasOwnProperty("int")?fb["int"]:gb.intValue,hb.floatValue=fb.hasOwnProperty("float")?fb["float"]:gb.floatValue,hb.stringValue=fb.hasOwnProperty("string")?fb.string:gb.stringValue,m.setFrame(n++,fb.time,hb)}e.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}c.animations.push(new d.Animation(a,e,f))},readCurve:function(a,b,c){var d=c.curve;d?"stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]):a.curves.setLinear(b)},toColor:function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},getFloatArray:function(a,b,c){var e=a[b],f=new d.Float32Array(e.length),g=0,h=e.length;if(1==c)for(;h>g;g++)f[g]=e[g];else for(;h>g;g++)f[g]=e[g]*c;return f},getIntArray:function(a,b){for(var c=a[b],e=new d.Uint16Array(c.length),f=0,g=c.length;g>f;f++)e[f]=0|c[f];return e}},d.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new d.AtlasReader(a),e=[];e.length=4;for(var f=null;;){var g=c.readLine();if(null===g)break;if(g=c.trim(g),g.length)if(f){var h=new d.AtlasRegion;h.name=g,h.page=f,h.rotate="true"==c.readValue(),c.readTuple(e);var i=parseInt(e[0]),j=parseInt(e[1]);c.readTuple(e);var k=parseInt(e[0]),l=parseInt(e[1]);h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),4==c.readTuple(e)&&(h.splits=[parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],4==c.readTuple(e)&&(h.pads=[parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],c.readTuple(e))),h.originalWidth=parseInt(e[0]),h.originalHeight=parseInt(e[1]),c.readTuple(e),h.offsetX=parseInt(e[0]),h.offsetY=parseInt(e[1]),h.index=parseInt(c.readValue()),this.regions.push(h)}else{f=new d.AtlasPage,f.name=g,2==c.readTuple(e)&&(f.width=parseInt(e[0]),f.height=parseInt(e[1]),c.readTuple(e)),f.format=d.Atlas.Format[e[0]],c.readTuple(e),f.minFilter=d.Atlas.TextureFilter[e[0]],f.magFilter=d.Atlas.TextureFilter[e[1]];var m=c.readValue();f.uWrap=d.Atlas.TextureWrap.clampToEdge,f.vWrap=d.Atlas.TextureWrap.clampToEdge,"x"==m?f.uWrap=d.Atlas.TextureWrap.repeat:"y"==m?f.vWrap=d.Atlas.TextureWrap.repeat:"xy"==m&&(f.uWrap=f.vWrap=d.Atlas.TextureWrap.repeat),b.load(f,g,this),this.pages.push(f)
}else f=null}},d.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},d.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},d.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},d.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},d.AtlasPage=function(){},d.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},d.AtlasRegion=function(){},d.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},d.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},d.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f)break;a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},d.AtlasAttachmentLoader=function(a){this.atlas=a},d.AtlasAttachmentLoader.prototype={newRegionAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (region attachment: "+b+")";var f=new d.RegionAttachment(b);return f.rendererObject=e,f.setUVs(e.u,e.v,e.u2,e.v2,e.rotate),f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newMeshAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (mesh attachment: "+b+")";var f=new d.MeshAttachment(b);return f.rendererObject=e,f.regionU=e.u,f.regionV=e.v,f.regionU2=e.u2,f.regionV2=e.v2,f.regionRotate=e.rotate,f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newSkinnedMeshAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (skinned mesh attachment: "+b+")";var f=new d.SkinnedMeshAttachment(b);return f.rendererObject=e,f.regionU=e.u,f.regionV=e.v,f.regionU2=e.u2,f.regionV2=e.v2,f.regionRotate=e.rotate,f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newBoundingBoxAttachment:function(a,b){return new d.BoundingBoxAttachment(b)}},d.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},d.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,e=c.length,f=a.x,g=a.y,h=this.boundingBoxes,i=this.polygonPool,j=this.polygons;h.length=0;for(var k=0,l=j.length;l>k;k++)i.push(j[k]);j.length=0;for(var k=0;e>k;k++){var m=c[k],n=m.attachment;if(n.type==d.AttachmentType.boundingbox){h.push(n);var o,p=i.length;p>0?(o=i[p-1],i.splice(p-1,1)):o=[],j.push(o),o.length=n.vertices.length,n.computeWorldVertices(f,g,m.bone,o)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return this.boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},polygonIntersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},d.Bone.yDown=!0,b.AnimCache={},b.SpineTextureLoader=function(a,c){b.EventTarget.call(this),this.basePath=a,this.crossorigin=c,this.loadingCount=0},b.SpineTextureLoader.prototype=b.SpineTextureLoader,b.SpineTextureLoader.prototype.load=function(a,c){if(a.rendererObject=b.BaseTexture.fromImage(this.basePath+"/"+c,this.crossorigin),!a.rendererObject.hasLoaded){var d=this;++d.loadingCount,a.rendererObject.addEventListener("loaded",function(){--d.loadingCount,d.dispatchEvent({type:"loadedBaseTexture",content:d})})}},b.SpineTextureLoader.prototype.unload=function(a){a.destroy(!0)},b.Spine=function(a){if(b.DisplayObjectContainer.call(this),this.spineData=b.AnimCache[a],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+a);this.skeleton=new d.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new d.AnimationStateData(this.spineData),this.state=new d.AnimationState(this.stateData),this.slotContainers=[];for(var c=0,e=this.skeleton.drawOrder.length;e>c;c++){var f=this.skeleton.drawOrder[c],g=f.attachment,h=new b.DisplayObjectContainer;if(this.slotContainers.push(h),this.addChild(h),g instanceof d.RegionAttachment){var i=g.rendererObject.name,j=this.createSprite(f,g);f.currentSprite=j,f.currentSpriteName=i,h.addChild(j)}else{if(!(g instanceof d.MeshAttachment))continue;var k=this.createMesh(f,g);f.currentMesh=k,f.currentMeshName=g.name,h.addChild(k)}}this.autoUpdate=!0},b.Spine.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Spine.prototype.constructor=b.Spine,Object.defineProperty(b.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===b.Spine.prototype.autoUpdateTransform},set:function(a){this.updateTransform=a?b.Spine.prototype.autoUpdateTransform:b.DisplayObjectContainer.prototype.updateTransform}}),b.Spine.prototype.update=function(a){this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var c=this.skeleton.drawOrder,e=0,f=c.length;f>e;e++){var g=c[e],h=g.attachment,i=this.slotContainers[e];if(h){var j=h.type;if(j===d.AttachmentType.region){if(h.rendererObject&&(!g.currentSpriteName||g.currentSpriteName!==h.name)){var k=h.rendererObject.name;if(void 0!==g.currentSprite&&(g.currentSprite.visible=!1),g.sprites=g.sprites||{},void 0!==g.sprites[k])g.sprites[k].visible=!0;else{var l=this.createSprite(g,h);i.addChild(l)}g.currentSprite=g.sprites[k],g.currentSpriteName=k}var m=g.bone;i.position.x=m.worldX+h.x*m.m00+h.y*m.m01,i.position.y=m.worldY+h.x*m.m10+h.y*m.m11,i.scale.x=m.worldScaleX,i.scale.y=m.worldScaleY,i.rotation=-(g.bone.worldRotation*d.degRad),g.currentSprite.tint=b.rgb2hex([g.r,g.g,g.b])}else{if(j!==d.AttachmentType.skinnedmesh){i.visible=!1;continue}if(!g.currentMeshName||g.currentMeshName!==h.name){var n=h.name;if(void 0!==g.currentMesh&&(g.currentMesh.visible=!1),g.meshes=g.meshes||{},void 0!==g.meshes[n])g.meshes[n].visible=!0;else{var o=this.createMesh(g,h);i.addChild(o)}g.currentMesh=g.meshes[n],g.currentMeshName=n}h.computeWorldVertices(g.bone.skeleton.x,g.bone.skeleton.y,g,g.currentMesh.vertices)}i.visible=!0,i.alpha=g.a}else i.visible=!1}},b.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(a),b.DisplayObjectContainer.prototype.updateTransform.call(this)},b.Spine.prototype.createSprite=function(a,c){var e=c.rendererObject,f=e.page.rendererObject,g=new b.Rectangle(e.x,e.y,e.rotate?e.height:e.width,e.rotate?e.width:e.height),h=new b.Texture(f,g),i=new b.Sprite(h),j=e.rotate?.5*Math.PI:0;return i.scale.set(e.width/e.originalWidth,e.height/e.originalHeight),i.rotation=j-c.rotation*d.degRad,i.anchor.x=i.anchor.y=.5,a.sprites=a.sprites||{},a.sprites[e.name]=i,i},b.Spine.prototype.createMesh=function(a,c){var d=c.rendererObject,e=d.page.rendererObject,f=new b.Texture(e),g=new b.Strip(f);return g.drawMode=b.Strip.DrawModes.TRIANGLES,g.canvasPadding=1.5,g.vertices=new b.Float32Array(c.uvs.length),g.uvs=c.uvs,g.indices=c.triangles,a.meshes=a.meshes||{},a.meshes[c.name]=g,g},b.BaseTextureCache={},b.BaseTextureCacheIdGenerator=0,b.BaseTexture=function(a,c){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=c||b.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=a,this._UID=b._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],a){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var d=this;this.source.onload=function(){d.hasLoaded=!0,d.width=d.source.naturalWidth||d.source.width,d.height=d.source.naturalHeight||d.source.height,d.dirty(),d.dispatchEvent({type:"loaded",content:d})},this.source.onerror=function(){d.dispatchEvent({type:"error",content:d})}}this.imageUrl=null,this._powerOf2=!1}},b.BaseTexture.prototype.constructor=b.BaseTexture,b.EventTarget.mixin(b.BaseTexture.prototype),b.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete b.BaseTextureCache[this.imageUrl],delete b.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete b.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},b.BaseTexture.prototype.updateSourceImage=function(a){this.hasLoaded=!1,this.source.src=null,this.source.src=a},b.BaseTexture.prototype.dirty=function(){for(var a=0;a<this._glTextures.length;a++)this._dirty[a]=!0},b.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var a=this._glTextures.length-1;a>=0;a--){var c=this._glTextures[a],d=b.glContexts[a];d&&c&&d.deleteTexture(c)}this._glTextures.length=0,this.dirty()},b.BaseTexture.fromImage=function(a,c,d){var e=b.BaseTextureCache[a];if(void 0===c&&-1===a.indexOf("data:")&&(c=!0),!e){var f=new Image;c&&(f.crossOrigin=""),f.src=a,e=new b.BaseTexture(f,d),e.imageUrl=a,b.BaseTextureCache[a]=e,-1!==a.indexOf(b.RETINA_PREFIX+".")&&(e.resolution=2)}return e},b.BaseTexture.fromCanvas=function(a,c){a._pixiId||(a._pixiId="canvas_"+b.TextureCacheIdGenerator++);var d=b.BaseTextureCache[a._pixiId];return d||(d=new b.BaseTexture(a,c),b.BaseTextureCache[a._pixiId]=d),d},b.TextureCache={},b.FrameCache={},b.TextureCacheIdGenerator=0,b.Texture=function(a,c,d,e){this.noFrame=!1,c||(this.noFrame=!0,c=new b.Rectangle(0,0,1,1)),a instanceof b.Texture&&(a=a.baseTexture),this.baseTexture=a,this.frame=c,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=d||new b.Rectangle(0,0,1,1),a.hasLoaded?(this.noFrame&&(c=new b.Rectangle(0,0,a.width,a.height)),this.setFrame(c)):a.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},b.Texture.prototype.constructor=b.Texture,b.EventTarget.mixin(b.Texture.prototype),b.Texture.prototype.onBaseTextureLoaded=function(){var a=this.baseTexture;a.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new b.Rectangle(0,0,a.width,a.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},b.Texture.prototype.destroy=function(a){a&&this.baseTexture.destroy(),this.valid=!1},b.Texture.prototype.setFrame=function(a){if(this.noFrame=!1,this.frame=a,this.width=a.width,this.height=a.height,this.crop.x=a.x,this.crop.y=a.y,this.crop.width=a.width,this.crop.height=a.height,!this.trim&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},b.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new b.TextureUvs);var a=this.crop,c=this.baseTexture.width,d=this.baseTexture.height;this._uvs.x0=a.x/c,this._uvs.y0=a.y/d,this._uvs.x1=(a.x+a.width)/c,this._uvs.y1=a.y/d,this._uvs.x2=(a.x+a.width)/c,this._uvs.y2=(a.y+a.height)/d,this._uvs.x3=a.x/c,this._uvs.y3=(a.y+a.height)/d},b.Texture.fromImage=function(a,c,d){var e=b.TextureCache[a];return e||(e=new b.Texture(b.BaseTexture.fromImage(a,c,d)),b.TextureCache[a]=e),e},b.Texture.fromFrame=function(a){var c=b.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache ');return c},b.Texture.fromCanvas=function(a,c){var d=b.BaseTexture.fromCanvas(a,c);return new b.Texture(d)},b.Texture.addTextureToCache=function(a,c){b.TextureCache[c]=a},b.Texture.removeTextureFromCache=function(a){var c=b.TextureCache[a];return delete b.TextureCache[a],delete b.BaseTextureCache[a],c},b.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},b.Texture.emptyTexture=new b.Texture(new b.BaseTexture),b.RenderTexture=function(a,c,d,e,f){if(this.width=a||100,this.height=c||100,this.resolution=f||1,this.frame=new b.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new b.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new b.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=e||b.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,b.Texture.call(this,this.baseTexture,new b.Rectangle(0,0,this.width,this.height)),this.renderer=d||b.defaultRenderer,this.renderer.type===b.WEBGL_RENDERER){var g=this.renderer.gl;this.baseTexture._dirty[g.id]=!1,this.textureBuffer=new b.FilterTexture(g,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[g.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new b.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new b.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},b.RenderTexture.prototype=Object.create(b.Texture.prototype),b.RenderTexture.prototype.constructor=b.RenderTexture,b.RenderTexture.prototype.resize=function(a,c,d){(a!==this.width||c!==this.height)&&(this.valid=a>0&&c>0,this.width=this.frame.width=this.crop.width=a,this.height=this.frame.height=this.crop.height=c,d&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===b.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},b.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===b.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},b.RenderTexture.prototype.renderWebGL=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),d.translate(0,2*this.projection.y),b&&d.append(b),d.scale(1,-1),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();var h=this.renderer.gl;h.viewport(0,0,this.width*this.resolution,this.height*this.resolution),h.bindFramebuffer(h.FRAMEBUFFER,this.textureBuffer.frameBuffer),c&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(a,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},b.RenderTexture.prototype.renderCanvas=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),b&&d.append(b),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();c&&this.textureBuffer.clear();var h=this.textureBuffer.context,i=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(a,h),this.renderer.resolution=i}},b.RenderTexture.prototype.getImage=function(){var a=new Image;return a.src=this.getBase64(),a},b.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},b.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===b.WEBGL_RENDERER){var a=this.renderer.gl,c=this.textureBuffer.width,d=this.textureBuffer.height,e=new Uint8Array(4*c*d);a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,e),a.bindFramebuffer(a.FRAMEBUFFER,null);var f=new b.CanvasBuffer(c,d),g=f.context.getImageData(0,0,c,d);return g.data.set(e),f.context.putImageData(g,0,0),f.canvas}return this.textureBuffer.canvas},b.RenderTexture.tempMatrix=new b.Matrix,b.VideoTexture=function(a,c){if(!a)throw new Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),b.BaseTexture.call(this,a,c),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),a.complete||(this._onCanPlay=this.onCanPlay.bind(this),a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this.onPlayStart.bind(this)),a.addEventListener("pause",this.onPlayStop.bind(this)))},b.VideoTexture.prototype=Object.create(b.BaseTexture.prototype),b.VideoTexture.constructor=b.VideoTexture,b.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},b.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},b.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},b.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},b.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(b.BaseTextureCache[this.source._pixiId]=null,delete b.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),b.BaseTexture.prototype.destroy.call(this)},b.VideoTexture.baseTextureFromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+b.TextureCacheIdGenerator++);var d=b.BaseTextureCache[a._pixiId];return d||(d=new b.VideoTexture(a,c),b.BaseTextureCache[a._pixiId]=d),d},b.VideoTexture.textureFromVideo=function(a,c){var d=b.VideoTexture.baseTextureFromVideo(a,c);return new b.Texture(d)},b.VideoTexture.fromUrl=function(a,c){var d=document.createElement("video");return d.src=a,d.autoPlay=!0,d.play(),b.VideoTexture.textureFromVideo(d,c)},b.AssetLoader=function(a,c){this.assetURLs=a,this.crossorigin=c,this.loadersByType={jpg:b.ImageLoader,jpeg:b.ImageLoader,png:b.ImageLoader,gif:b.ImageLoader,webp:b.ImageLoader,json:b.JsonLoader,atlas:b.AtlasLoader,anim:b.SpineLoader,xml:b.BitmapFontLoader,fnt:b.BitmapFontLoader}},b.EventTarget.mixin(b.AssetLoader.prototype),b.AssetLoader.prototype.constructor=b.AssetLoader,b.AssetLoader.prototype._getDataType=function(a){var b="data:",c=a.slice(0,b.length).toLowerCase();if(c===b){var d=a.slice(b.length),e=d.indexOf(",");if(-1===e)return null;var f=d.slice(0,e).split(";")[0];return f&&"text/plain"!==f.toLowerCase()?f.split("/").pop().toLowerCase():"txt"}return null},b.AssetLoader.prototype.load=function(){function a(a){b.onAssetLoaded(a.data.content)}var b=this;this.loadCount=this.assetURLs.length;for(var c=0;c<this.assetURLs.length;c++){var d=this.assetURLs[c],e=this._getDataType(d);e||(e=d.split("?").shift().split(".").pop().toLowerCase());var f=this.loadersByType[e];if(!f)throw new Error(e+" is an unsupported file type");var g=new f(d,this.crossorigin);g.on("loaded",a),g.load()}},b.AssetLoader.prototype.onAssetLoaded=function(a){this.loadCount--,this.emit("onProgress",{content:this,loader:a}),this.onProgress&&this.onProgress(a),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},b.JsonLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.loaded=!1},b.JsonLoader.prototype.constructor=b.JsonLoader,b.EventTarget.mixin(b.JsonLoader.prototype),b.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},b.JsonLoader.prototype.onReadyStateChanged=function(){4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http"))&&this.onJSONLoaded()},b.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var a=this.baseUrl+this.json.meta.image,c=new b.ImageLoader(a,this.crossorigin),e=this.json.frames;this.texture=c.texture.baseTexture,c.addEventListener("loaded",this.onLoaded.bind(this));for(var f in e){var g=e[f].frame;if(g){var h=new b.Rectangle(g.x,g.y,g.w,g.h),i=h.clone(),j=null;if(e[f].trimmed){var k=e[f].sourceSize,l=e[f].spriteSourceSize;j=new b.Rectangle(l.x,l.y,k.w,k.h)}b.TextureCache[f]=new b.Texture(this.texture,h,i,j)}}c.load()}else if(this.json.bones)if(b.AnimCache[this.url])this.onLoaded();else{var m=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",n=new b.JsonLoader(m,this.crossorigin),o=this;n.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var a=new b.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),c=new d.Atlas(this.ajaxRequest.responseText,a),e=new d.AtlasAttachmentLoader(c),f=new d.SkeletonJson(e),g=f.readSkeletonData(o.json);b.AnimCache[o.url]=g,o.spine=g,o.spineAtlas=c,o.spineAtlasLoader=n,a.loadingCount>0?a.addEventListener("loadedBaseTexture",function(a){a.content.content.loadingCount<=0&&o.onLoaded()}):o.onLoaded()},n.load()}else this.onLoaded()},b.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},b.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},b.AtlasLoader=function(a,b){this.url=a,this.baseUrl=a.replace(/[^\/]*$/,""),this.crossorigin=b,this.loaded=!1},b.AtlasLoader.constructor=b.AtlasLoader,b.EventTarget.mixin(b.AtlasLoader.prototype),b.AtlasLoader.prototype.load=function(){this.ajaxRequest=new b.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},b.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var a=this.ajaxRequest.responseText.split(/\r?\n/),c=-3,d=0,e=null,f=!1,g=0,h=0,i=this.onLoaded.bind(this);for(g=0;g<a.length;g++)if(a[g]=a[g].replace(/^\s+|\s+$/g,""),""===a[g]&&(f=g+1),a[g].length>0){if(f===g)this.atlas.meta.image.push(a[g]),d=this.atlas.meta.image.length-1,this.atlas.frames.push({}),c=-3;else if(c>0)if(c%7===1)null!=e&&(this.atlas.frames[d][e.name]=e),e={name:a[g],frame:{}};else{var j=a[g].split(" ");if(c%7===3)e.frame.x=Number(j[1].replace(",","")),e.frame.y=Number(j[2]);else if(c%7===4)e.frame.w=Number(j[1].replace(",","")),e.frame.h=Number(j[2]);else if(c%7===5){var k={x:0,y:0,w:Number(j[1].replace(",","")),h:Number(j[2])};k.w>e.frame.w||k.h>e.frame.h?(e.trimmed=!0,e.realSize=k):e.trimmed=!1}}c++}if(null!=e&&(this.atlas.frames[d][e.name]=e),this.atlas.meta.image.length>0){for(this.images=[],h=0;h<this.atlas.meta.image.length;h++){var l=this.baseUrl+this.atlas.meta.image[h],m=this.atlas.frames[h];this.images.push(new b.ImageLoader(l,this.crossorigin));for(g in m){var n=m[g].frame;n&&(b.TextureCache[g]=new b.Texture(this.images[h].texture.baseTexture,{x:n.x,y:n.y,width:n.w,height:n.h}),m[g].trimmed&&(b.TextureCache[g].realSize=m[g].realSize,b.TextureCache[g].trim.x=0,b.TextureCache[g].trim.y=0))}}for(this.currentImageId=0,h=0;h<this.images.length;h++)this.images[h].on("loaded",i);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},b.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},b.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},b.SpriteSheetLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},b.SpriteSheetLoader.prototype.constructor=b.SpriteSheetLoader,b.EventTarget.mixin(b.SpriteSheetLoader.prototype),b.SpriteSheetLoader.prototype.load=function(){var a=this,c=new b.JsonLoader(this.url,this.crossorigin);c.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),c.load()},b.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.ImageLoader=function(a,c){this.texture=b.Texture.fromImage(a,c),this.frames=[]},b.ImageLoader.prototype.constructor=b.ImageLoader,b.EventTarget.mixin(b.ImageLoader.prototype),b.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},b.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.ImageLoader.prototype.loadFramedSpriteSheet=function(a,c,d){this.frames=[];for(var e=Math.floor(this.texture.width/a),f=Math.floor(this.texture.height/c),g=0,h=0;f>h;h++)for(var i=0;e>i;i++,g++){var j=new b.Texture(this.texture.baseTexture,{x:i*a,y:h*c,width:a,height:c});this.frames.push(j),d&&(b.TextureCache[d+"-"+g]=j)}this.load()},b.BitmapFontLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null},b.BitmapFontLoader.prototype.constructor=b.BitmapFontLoader,b.EventTarget.mixin(b.BitmapFontLoader.prototype),b.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new b.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},b.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var a=this.ajaxRequest.responseXML;if(!a||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var c=new DOMParser;a=c.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var d=document.createElement("div");d.innerHTML=this.ajaxRequest.responseText,a=d}var e=this.baseUrl+a.getElementsByTagName("page")[0].getAttribute("file"),f=new b.ImageLoader(e,this.crossorigin);this.texture=f.texture.baseTexture;var g={},h=a.getElementsByTagName("info")[0],i=a.getElementsByTagName("common")[0];g.font=h.getAttribute("face"),g.size=parseInt(h.getAttribute("size"),10),g.lineHeight=parseInt(i.getAttribute("lineHeight"),10),g.chars={};for(var j=a.getElementsByTagName("char"),k=0;k<j.length;k++){var l=parseInt(j[k].getAttribute("id"),10),m=new b.Rectangle(parseInt(j[k].getAttribute("x"),10),parseInt(j[k].getAttribute("y"),10),parseInt(j[k].getAttribute("width"),10),parseInt(j[k].getAttribute("height"),10));g.chars[l]={xOffset:parseInt(j[k].getAttribute("xoffset"),10),yOffset:parseInt(j[k].getAttribute("yoffset"),10),xAdvance:parseInt(j[k].getAttribute("xadvance"),10),kerning:{},texture:b.TextureCache[l]=new b.Texture(this.texture,m)}}var n=a.getElementsByTagName("kerning");for(k=0;k<n.length;k++){var o=parseInt(n[k].getAttribute("first"),10),p=parseInt(n[k].getAttribute("second"),10),q=parseInt(n[k].getAttribute("amount"),10);g.chars[p].kerning[o]=q}b.BitmapText.fonts[g.font]=g,f.addEventListener("loaded",this.onLoaded.bind(this)),f.load()}},b.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.SpineLoader=function(a,b){this.url=a,this.crossorigin=b,this.loaded=!1},b.SpineLoader.prototype.constructor=b.SpineLoader,b.EventTarget.mixin(b.SpineLoader.prototype),b.SpineLoader.prototype.load=function(){var a=this,c=new b.JsonLoader(this.url,this.crossorigin);c.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),c.load()},b.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},b.AbstractFilter=function(a,b){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=b||{},this.fragmentSrc=a||[]},b.AbstractFilter.prototype.constructor=b.AbstractFilter,b.AbstractFilter.prototype.syncUniforms=function(){for(var a=0,b=this.shaders.length;b>a;a++)this.shaders[a].dirty=!0},b.AlphaMaskFilter=function(a){b.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:a},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mask.value.x=a.width,this.uniforms.mask.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]
},b.AlphaMaskFilter.prototype=Object.create(b.AbstractFilter.prototype),b.AlphaMaskFilter.prototype.constructor=b.AlphaMaskFilter,b.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(b.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}}),b.ColorMatrixFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},b.ColorMatrixFilter.prototype=Object.create(b.AbstractFilter.prototype),b.ColorMatrixFilter.prototype.constructor=b.ColorMatrixFilter,Object.defineProperty(b.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=a}}),b.GrayFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},b.GrayFilter.prototype=Object.create(b.AbstractFilter.prototype),b.GrayFilter.prototype.constructor=b.GrayFilter,Object.defineProperty(b.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),b.DisplacementFilter=function(a){b.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:a},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=a.width,this.uniforms.mapDimensions.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},b.DisplacementFilter.prototype=Object.create(b.AbstractFilter.prototype),b.DisplacementFilter.prototype.constructor=b.DisplacementFilter,b.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(b.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(a){this.uniforms.displacementMap.value=a}}),Object.defineProperty(b.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}}),Object.defineProperty(b.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}),b.PixelateFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new b.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},b.PixelateFilter.prototype=Object.create(b.AbstractFilter.prototype),b.PixelateFilter.prototype.constructor=b.PixelateFilter,Object.defineProperty(b.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.dirty=!0,this.uniforms.pixelSize.value=a}}),b.BlurXFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},b.BlurXFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurXFilter.prototype.constructor=b.BlurXFilter,Object.defineProperty(b.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.dirty=!0,this.uniforms.blur.value=1/7e3*a}}),b.BlurYFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},b.BlurYFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurYFilter.prototype.constructor=b.BlurYFilter,Object.defineProperty(b.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.BlurFilter=function(){this.blurXFilter=new b.BlurXFilter,this.blurYFilter=new b.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},b.BlurFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurFilter.prototype.constructor=b.BlurFilter,Object.defineProperty(b.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}}),Object.defineProperty(b.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}}),Object.defineProperty(b.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}),b.InvertFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},b.InvertFilter.prototype=Object.create(b.AbstractFilter.prototype),b.InvertFilter.prototype.constructor=b.InvertFilter,Object.defineProperty(b.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}),b.SepiaFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},b.SepiaFilter.prototype=Object.create(b.AbstractFilter.prototype),b.SepiaFilter.prototype.constructor=b.SepiaFilter,Object.defineProperty(b.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}),b.TwistFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},b.TwistFilter.prototype=Object.create(b.AbstractFilter.prototype),b.TwistFilter.prototype.constructor=b.TwistFilter,Object.defineProperty(b.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.dirty=!0,this.uniforms.offset.value=a}}),Object.defineProperty(b.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(a){this.dirty=!0,this.uniforms.radius.value=a}}),Object.defineProperty(b.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.ColorStepFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},b.ColorStepFilter.prototype=Object.create(b.AbstractFilter.prototype),b.ColorStepFilter.prototype.constructor=b.ColorStepFilter,Object.defineProperty(b.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}),b.DotScreenFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},b.DotScreenFilter.prototype=Object.create(b.AbstractFilter.prototype),b.DotScreenFilter.prototype.constructor=b.DotScreenFilter,Object.defineProperty(b.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.dirty=!0,this.uniforms.scale.value=a}}),Object.defineProperty(b.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.CrossHatchFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},b.CrossHatchFilter.prototype=Object.create(b.AbstractFilter.prototype),b.CrossHatchFilter.prototype.constructor=b.CrossHatchFilter,Object.defineProperty(b.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.RGBSplitFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},b.RGBSplitFilter.prototype=Object.create(b.AbstractFilter.prototype),b.RGBSplitFilter.prototype.constructor=b.RGBSplitFilter,Object.defineProperty(b.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}}),Object.defineProperty(b.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}}),Object.defineProperty(b.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(a){this.uniforms.blue.value=a}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.PIXI=b):"undefined"!=typeof c&&c.amd?c("pixi",b):a.PIXI=b}.call(this),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function d(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function e(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&!!this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,c){return d(a,"add"),this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return d(a,"addOnce"),this._registerListener(a,!0,b,c)},remove:function(a,b){d(a,"remove");var c=this._indexOfListener(a,b);return-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var f=e;f.Signal=e,"function"==typeof c&&c.amd?c("signals",[],function(){return f}):"undefined"!=typeof module&&module.exports?module.exports=f:a.signals=f}(this);var e="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(e._gsQueue||(e._gsQueue=[])).push(function(){e._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals,h=g.isSelector,i=g.isArray,j=e.prototype=c.to({},.1,{}),k=[];e.version="1.14.2",j.constructor=e,j.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.lagSmoothing=c.lagSmoothing,e.ticker=c.ticker,e.render=c.render,j.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},j.updateTo=function(a,b){var d,e=this.ratio,f=this.vars.immediateRender||a.immediateRender;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted||f)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var g=this._time;this.render(0,!0,!1),this._initted=!1,this.render(g,!0,!1)}else if(this._time>0||f){this._initted=!1,this._init();for(var h,i=1/(1-e),j=this._firstPT;j;)h=j.s+j.c,j.c*=i,j.s=h-j.c,j=j._next}return this},j.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,h,i,j,l,m,n,o=this._dirty?this.totalDuration():this._totalDuration,p=this._time,q=this._totalTime,r=this._cycle,s=this._duration,t=this._rawPrevTime;if(a>=o?(this._totalTime=o,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=s,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===s&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>t||t===f)&&t!==a&&(c=!0,t>f&&(e="onReverseComplete")),this._rawPrevTime=n=!b||a||t===a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==q||0===s&&t>0&&t!==f)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===s&&(this._initted||!this.vars.lazy||c)&&(t>=0&&(c=!0),this._rawPrevTime=n=!b||a||t===a?a:f)),this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(i=s+this._repeatDelay,this._cycle=this._totalTime/i>>0,0!==this._cycle&&this._cycle===this._totalTime/i&&this._cycle--,this._time=this._totalTime-this._cycle*i,this._yoyo&&0!==(1&this._cycle)&&(this._time=s-this._time),this._time>s?this._time=s:this._time<0&&(this._time=0)),this._easeType?(j=this._time/s,l=this._easeType,m=this._easePower,(1===l||3===l&&j>=.5)&&(j=1-j),3===l&&(j*=2),1===m?j*=j:2===m?j*=j*j:3===m?j*=j*j*j:4===m&&(j*=j*j*j*j),this.ratio=1===l?1-j:2===l?j:this._time/s<.5?j/2:1-j/2):this.ratio=this._ease.getRatio(this._time/s)),p===this._time&&!c&&r===this._cycle)return void(q!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=q,this._rawPrevTime=t,this._cycle=r,g.lazyTweens.push(this),this._lazy=[a,b],void 0;this._time&&!d?this.ratio=this._ease.getRatio(this._time/s):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&a>=0&&(this._active=!0),0===q&&(2===this._initted&&a>0&&this._init(),this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===s)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||k))),h=this._firstPT;h;)h.f?h.t[h.p](h.c*this.ratio+h.s):h.t[h.p]=h.c*this.ratio+h.s,h=h._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==q||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)),this._cycle!==r&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||k)),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||k),0===s&&this._rawPrevTime===f&&n!==f&&(this._rawPrevTime=0))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,g,j,l,m){g=g||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),j.apply(m||this,l||k)};for(i(a)||("string"==typeof a&&(a=c.selector(a)||a),h(a)&&(a=d(a))),a=a||[],0>g&&(a=d(a),a.reverse(),g*=-1),n=a.length-1,p=0;n>=p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n&&j&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=g}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var l=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(l(f,b)),e=d.length),f=f._next;return d},m=e.getAllTweens=function(b){return l(a._rootTimeline,b).concat(l(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=m(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g._reversed?0:g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,j,k,l,m,n=g.tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),h(a)&&(a=d(a)),i(a))for(l=a.length;--l>-1;)e.killChildTweensOf(a[l],b);else{f=[];for(k in n)for(j=n[k].target.parentNode;j;)j===a&&(f=f.concat(n[k].tweens)),j=j.parentNode;for(m=f.length,l=0;m>l;l++)b&&f[l].totalTime(f[l].totalDuration()),f[l]._enabled(!1,!1)}}};var n=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=m(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){n(!0,a,b,c)},e.resumeAll=function(a,b,c){n(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},j.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},j.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},j.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},j.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},j.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},j.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},j.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},j.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),e._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],i(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));i(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},f=1e-10,g=c._internals,h=g.isSelector,i=g.isArray,j=g.lazyTweens,k=g.lazyRender,l=[],m=e._gsDefine.globals,n=function(a){var b,c={};for(b in a)c[b]=a[b];return c},o=function(a,b,c,d){var e=a._timeline._totalTime;(b||!this._forcingPlayhead)&&(a._timeline.pause(a._startTime),b&&b.apply(d||a._timeline,c||l),this._forcingPlayhead&&a._timeline.seek(e))},p=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},q=d.prototype=new b;return d.version="1.14.2",q.constructor=d,q.kill()._gc=q._forcingPlayhead=!1,q.to=function(a,b,d,e){var f=d.repeat&&m.TweenMax||c;return b?this.add(new f(a,b,d),e):this.set(a,d,e)},q.from=function(a,b,d,e){return this.add((d.repeat&&m.TweenMax||c).from(a,b,d),e)},q.fromTo=function(a,b,d,e,f){var g=e.repeat&&m.TweenMax||c;return b?this.add(g.fromTo(a,b,d,e),f):this.set(a,e,f)},q.staggerTo=function(a,b,e,f,g,i,j,k){var l,m=new d({onComplete:i,onCompleteParams:j,onCompleteScope:k,smoothChildTiming:this.smoothChildTiming});for("string"==typeof a&&(a=c.selector(a)||a),a=a||[],h(a)&&(a=p(a)),f=f||0,0>f&&(a=p(a),a.reverse(),f*=-1),l=0;l<a.length;l++)e.startAt&&(e.startAt=n(e.startAt)),m.to(a[l],b,n(e),l*f);return this.add(m,g)},q.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},q.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},q.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},q.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,(!b||!(e instanceof c&&e.target===e.vars.onComplete))&&g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},q.add=function(e,f,g,h){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&i(e)){for(g=g||"normal",h=h||0,j=f,k=e.length,l=0;k>l;l++)i(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===g?j=m._startTime+m.totalDuration()/m._timeScale:"start"===g&&(m._startTime-=m.delay())),j+=h;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";
e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._timeline;)o&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,!1),n=n._timeline;return this},q.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&i(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},q._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},q.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},q.insert=q.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},q.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},q.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},q.addPause=function(a,b,c,d){return this.call(o,["{self}",b,c,d],this,a)},q.removeLabel=function(a){return delete this._labels[a],this},q.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},q._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&i(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},q.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},q.stop=function(){return this.paused(!0)},q.gotoAndPlay=function(a,b){return this.play(a,b)},q.gotoAndStop=function(a,b){return this.pause(a,b)},q.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,e,g,h,i,m=this._dirty?this.totalDuration():this._totalDuration,n=this._time,o=this._startTime,p=this._timeScale,q=this._paused;if(a>=m?(this._totalTime=this._time=m,this._reversed||this._hasPausedChild()||(e=!0,h="onComplete",0===this._duration&&(0===a||this._rawPrevTime<0||this._rawPrevTime===f)&&this._rawPrevTime!==a&&this._first&&(i=!0,this._rawPrevTime>f&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:f,a=m+1e-4):1e-7>a?(this._totalTime=this._time=0,(0!==n||0===this._duration&&this._rawPrevTime!==f&&(this._rawPrevTime>0||0>a&&this._rawPrevTime>=0))&&(h="onReverseComplete",e=this._reversed),0>a?(this._active=!1,this._rawPrevTime>=0&&this._first&&(i=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:f,a=0,this._initted||(i=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==n&&this._first||c||i){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==n&&a>0&&(this._active=!0),0===n&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l)),this._time>=n)for(d=this._first;d&&(g=d._next,!this._paused||q);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||q);)(d._active||d._startTime<=n&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||(j.length&&k(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l))),h&&!this._gc&&(o===this._startTime||p!==this._timeScale)&&(0===this._time||m>=this.totalDuration())&&(e&&(j.length&&k(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||l))}},q._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},q.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},q.getTweensOf=function(a,b){var d,e,f=this._gc,g=[],h=0;for(f&&this._enabled(!0,!0),d=c.getTweensOf(a),e=d.length;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(g[h++]=d[e]);return f&&this._enabled(!1,!0),g},q.recent=function(){return this._recent},q._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},q.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},q._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},q.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},q.invalidate=function(){for(var b=this._first;b;)b.invalidate(),b=b._next;return a.prototype.invalidate.call(this)},q._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},q.totalTime=function(){this._forcingPlayhead=!0;var b=a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,b},q.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},q.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},q.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},q.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),e._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=b._internals,h=g.lazyTweens,i=g.lazyRender,j=new c(null,null,1,0),k=d.prototype=new a;return k.constructor=d,k.kill()._gc=!1,d.version="1.14.2",k.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},k.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},k.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},k.tweenTo=function(a,c){c=c||{};var d,e,g,h={ease:j,overwrite:c.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(e in c)h[e]=c[e];return h.time=this._parseTimeOrLabel(a),d=Math.abs(Number(h.time)-this._time)/this._timeScale||.001,g=new b(this,d,h),h.onStart=function(){g.target.paused(!0),g.vars.time!==g.target.time()&&d===g.duration()&&g.duration(Math.abs(g.vars.time-g.target.time())/g.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||g,c.onStartParams||f)},g},k.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},k.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,j,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._duration,p=this._time,q=this._totalTime,r=this._startTime,s=this._timeScale,t=this._rawPrevTime,u=this._paused,v=this._cycle;if(a>=n?(this._locked||(this._totalTime=n,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,k="onComplete",0===this._duration&&(0===a||0>t||t===e)&&t!==a&&this._first&&(l=!0,t>e&&(k="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=o,a=o+1e-4)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===o&&t!==e&&(t>0||0>a&&t>=0)&&!this._locked)&&(k="onReverseComplete",g=this._reversed),0>a?(this._active=!1,t>=0&&this._first&&(l=!0),this._rawPrevTime=a):(this._rawPrevTime=o||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(l=!0))):(0===o&&0>t&&(l=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(m=o+this._repeatDelay,this._cycle=this._totalTime/m>>0,0!==this._cycle&&this._cycle===this._totalTime/m&&this._cycle--,this._time=this._totalTime-this._cycle*m,this._yoyo&&0!==(1&this._cycle)&&(this._time=o-this._time),this._time>o?(this._time=o,a=o+1e-4):this._time<0?this._time=a=0:a=this._time))),this._cycle!==v&&!this._locked){var w=this._yoyo&&0!==(1&v),x=w===(this._yoyo&&0!==(1&this._cycle)),y=this._totalTime,z=this._cycle,A=this._rawPrevTime,B=this._time;if(this._totalTime=v*o,this._cycle<v?w=!w:this._totalTime+=o,this._time=p,this._rawPrevTime=0===o?t-1e-4:t,this._cycle=v,this._locked=!0,p=w?0:o,this.render(p,b,0===o),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),x&&(p=w?o+1e-4:-1e-4,this.render(p,!0,!1)),this._locked=!1,this._paused&&!u)return;this._time=B,this._totalTime=y,this._cycle=z,this._rawPrevTime=A}if(!(this._time!==p&&this._first||c||l))return void(q!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==q&&a>0&&(this._active=!0),0===q&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=p)for(d=this._first;d&&(j=d._next,!this._paused||u);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=j;else for(d=this._last;d&&(j=d._prev,!this._paused||u);)(d._active||d._startTime<=p&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=j;this._onUpdate&&(b||(h.length&&i(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f))),k&&(this._locked||!this._gc&&(r===this._startTime||s!==this._timeScale)&&(0===this._time||n>=this.totalDuration())&&(g&&(h.length&&i(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[k]&&this.vars[k].apply(this.vars[k+"Scope"]||this,this.vars[k+"Params"]||f)))},k.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},k.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},k.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},k.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},k.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},k.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},k.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},k.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},k.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},k.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},k.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},k.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],f={},g=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},h=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",i=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},j=function(a,e,f,g,h){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,h?(t=b[j],u=c[j],v=(u+t)*e*.25/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*e*.5,p=l+(m-l)*e*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,n.b=0!==j?y:y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=i(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=i(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},k=function(a,d,e,f){var h,i,j,k,l,m,n=[];if(f)for(a=[f].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=f[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new g(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new g(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new g(a[i][d],0,0,a[i+1][d]),n},l=function(a,e,g,i,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":h,null==e&&(e=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],f[o]=-1!==l.indexOf(","+o+","),v[o]=k(a,o,f[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!i){for(n=w.length;--n>-1;)if(f[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q],d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=g?4:1;--n>-1;)o=w[n],p=v[o],j(p,e,g,i,f[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},m=function(a,b,c){b=b||"soft";var d,e,f,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],f=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new g(d,e,f,h):new g(d,(2*e+d)/3,(2*e+f)/3,f);i.length=n}return p},n=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},o=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],m=[];for(c in a)n(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,m[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=m,h[f]=j,i=0,m=[]);return{length:j,lengths:h,segments:l}},p=e._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},k=i[0],n=b.autoRotate||c.vars.orientToBezier;this._autoRotate=n?n instanceof Array?n:[["x","y","rotation",n===!0?0:Number(n)||0]]:null;for(d in k)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?l(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):m(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=o(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(n=this._autoRotate)for(this._initialRotations=[],n[0]instanceof Array||(this._autoRotate=n=[n]),f=n.length;--f>-1;){for(g=0;3>g;g++)d=n[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=n[f][2],this._initialRotations[f]=this._func[d]?this._func[d].call(this._target):this._target[d]}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target,p=b!==this._startRatio;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=Math.round(i)),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var q,r,s,t,u,v,w,x=this._autoRotate;for(e=x.length;--e>-1;)f=x[e][2],v=x[e][3]||0,w=x[e][4]===!0?1:a,g=this._beziers[x[e][0]],q=this._beziers[x[e][1]],g&&q&&(g=g[c],q=q[c],r=g.a+(g.b-g.a)*h,t=g.b+(g.c-g.b)*h,r+=(t-r)*h,t+=(g.c+(g.d-g.c)*h-t)*h,s=q.a+(q.b-q.a)*h,u=q.b+(q.c-q.b)*h,s+=(u-s)*h,u+=(q.c+(q.d-q.c)*h-u)*h,i=p?Math.atan2(u-s,t-r)*w+v:this._initialRotations[e],n[f]?o[f](i):o[f]=i)}}}),q=p.prototype;p.bezierThrough=l,p.cubicToQuadratic=i,p._autoCSS=!0,p.quadraticToCubic=function(a,b,c){return new g(a,(2*b+a)/3,(2*b+c)/3,c)},p._cssRegister=function(){var a=e._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,f=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,e,g,h,i){b instanceof Array&&(b={values:b}),i=new p;var j,k,l,m=b.values,n=m.length-1,o=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),o[j]=l.end;for(k in b)q[k]=b[k];return q.values=o,h=new f(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),q.autoRotate&&!(q.autoRotate instanceof Array)&&(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,q,g._tween),h}})}},q._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},q._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),e._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,f,g,h=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=h.prototype.setRatio},i={},j=h.prototype=new a("css");j.constructor=h,h.version="1.14.2",h.API=2,h.defaultTransformPerspective=0,h.defaultSkewType="compensated",j="px",h.suffixMap={top:j,right:j,bottom:j,left:j,width:j,height:j,fontSize:j,padding:j,margin:j,perspective:j,lineHeight:""};var k,l,m,n,o,p,q=/(?:\d|\-\d|\.\d|\-\.\d)+/g,r=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,s=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,t=/(?![+-]?\d*\.?\d+|e[+-]\d+)[^0-9]/g,u=/(?:\d|\-|\+|=|#|\.)*/g,v=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,y=/^(rgb|hsl)/,z=/([A-Z])/g,A=/-([a-z])/gi,B=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,C=function(a,b){return b.toUpperCase()},D=/(?:Left|Right|Width)/i,E=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,F=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,G=/,(?=[^\)]*(?:\(|$))/gi,H=Math.PI/180,I=180/Math.PI,J={},K=document,L=K.createElement("div"),M=K.createElement("img"),N=h._internals={_specialProps:i},O=navigator.userAgent,P=function(){var a,b=O.indexOf("Android"),c=K.createElement("div");return m=-1!==O.indexOf("Safari")&&-1===O.indexOf("Chrome")&&(-1===b||Number(O.substr(b+8,1))>3),o=m&&Number(O.substr(O.indexOf("Version/")+8,1))<6,n=-1!==O.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(O)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(O))&&(p=parseFloat(RegExp.$1)),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),Q=function(a){return v.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},R=function(a){window.console&&void 0},S="",T="",U=function(a,b){b=b||L;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(T=3===d?"ms":c[d],S="-"+T.toLowerCase()+"-",T+a):null},V=K.defaultView?K.defaultView.getComputedStyle:function(){},W=h.getStyle=function(a,b,c,d,e){var f;return P||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||V(a))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(z,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):Q(a)},X=N.convertToPixels=function(a,c,d,e,f){if("px"===e||!e)return d;if("auto"===e||!d)return 0;var g,i,j,k=D.test(c),l=a,m=L.style,n=0>d;if(n&&(d=-d),"%"===e&&-1!==c.indexOf("border"))g=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+W(a,"position")+";line-height:0;","%"!==e&&l.appendChild)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||K.body,i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(L),g=parseFloat(L[k?"offsetWidth":"offsetHeight"]),l.removeChild(L),k&&"%"===e&&h.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=g/d*100),0===g&&!f&&(g=X(a,c,d,e,!0))}return n?-g:g},Y=N.calculateOffset=function(a,b,c){if("absolute"!==W(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=W(a,"margin"+d,c);return a["offset"+d]-(X(a,b,parseFloat(e),e.replace(u,""))||0)},Z=function(a,b){var c,d,e={};if(b=b||V(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(A,C)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===e[c]&&(e[c.replace(A,C)]=b[c]);return P||(e.opacity=Q(a)),d=Fb(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,yb&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},$=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(t,"")?f:0:Y(a,g),void 0!==j[g]&&(h=new mb(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},_={width:["Left","Right"],height:["Top","Bottom"]},ab=["marginLeft","marginRight","marginTop","marginBottom"],bb=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=_[b],f=e.length;for(c=c||V(a,null);--f>-1;)d-=parseFloat(W(a,"padding"+e[f],c,!0))||0,d-=parseFloat(W(a,"border"+e[f]+"Width",c,!0))||0;return d},cb=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(t,"")),b.oy=parseFloat(e.replace(t,""))),d+" "+e+(c.length>2?" "+c[2]:"")},db=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},eb=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)},fb=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),g=Number(f[0].replace(t,""))*(-1===a.indexOf("rad")?1:I)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),i>h&&h>-i&&(h=0),h},gb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},hb=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},ib=h.parseColor=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,a>>8&255,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),gb[a]?gb[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,a>>8&255,255&a]):"hsl"===a.substr(0,3)?(a=a.match(q),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=hb(e+1/3,b,c),a[1]=hb(e,b,c),a[2]=hb(e-1/3,b,c),a):(a=a.match(q)||gb.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):gb.black},jb="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(j in gb)jb+="|"+j+"\\b";jb=new RegExp(jb+")","gi");var kb=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(jb)||[""])[0]:"",g=a.split(f).join("").match(s)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(q,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&G.test(a)){for(o=a.replace(G,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(jb)||[f])[0],m=a.split(b).join("").match(s)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&G.test(a)){for(f=a.replace(G,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(s)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},lb=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},mb=(N._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=Math.round(b):i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),nb=(N._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=J;for(c._transform=null,J=b,d=k=c.parse(a,b,d,e),J=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new mb(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new mb(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},N.CSSPropTween=function(a,b,d,e,f,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof nb||g.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,f&&(this._next=f,f._prev=this)}),ob=h.parseComplex=function(a,b,c,d,e,f,g,h,i,j){c=c||f||"",g=new nb(a,b,0,0,g,j?2:1,null,!1,h,c,d),d+="";var l,m,n,o,p,s,t,u,v,w,x,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=k!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(G,", ").split(" "),B=B.join(" ").replace(G,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=j,l=0;C>l;l++)if(o=A[l],p=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,db(p,u),p.replace(r,""),D&&-1!==p.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||gb[o]||y.test(o)))z=","===p.charAt(p.length-1)?"),":")",o=ib(o),p=ib(p),v=o.length+p.length>6,v&&!P&&0===p[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(P||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],p[0]-o[0],",",!0,!0).appendXtra("",o[1],p[1]-o[1],",",!0).appendXtra("",o[2],p[2]-o[2],v?",":z,!0),v&&(o=o.length<4?1:o[3],g.appendXtra("",o,(p.length<4?1:p[3])-o,z,!1)));
else if(s=o.match(q)){if(t=p.match(r),!t||t.length!==s.length)return g;for(n=0,m=0;m<s.length;m++)x=s[m],w=o.indexOf(x,n),g.appendXtra(o.substr(n,w-n),Number(x),db(t[m],x),"",D&&"px"===o.substr(w+x.length,2),0===m),n=w+x.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;l<g.l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},pb=9;for(j=nb.prototype,j.l=j.pr=0;--pb>0;)j["xn"+pb]=0,j["xs"+pb]="";j.xs0="",j._next=j._prev=j.xfirst=j.data=j.plugin=j.setRatio=j.rxp=null,j.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new nb(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var qb=function(a,b){b=b||{},this.p=b.prefix?U(a)||a:a,i[a]=i[this.p]=this,this.format=b.formatter||kb(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},rb=N._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new qb(f[d],b)},sb=function(a){if(!i[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";rb(a,{parser:function(a,c,d,f,g,h,j){var k=(e.GreenSockGlobals||e).com.greensock.plugins[b];return k?(k._cssRegister(),i[d].parse(a,c,d,f,g,h,j)):(R("Error: "+b+" js file not loaded."),g)}})}};j=qb.prototype,j.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(G.test(c)||G.test(b)?(h=b.replace(G,"|").split("|"),i=c.replace(G,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return ob(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},j.parse=function(a,b,c,d,e,g){return this.parseComplex(a.style,this.format(W(a,this.p,f,!1,this.dflt)),this.format(b),e,g)},h.registerSpecialProp=function(a,b,c){rb(a,{parser:function(a,d,e,f,g,h){var i=new nb(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var tb,ub="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),vb=U("transform"),wb=S+"transform",xb=U("transformOrigin"),yb=null!==U("perspective"),zb=N.Transform=function(){this.skewY=0},Ab=window.SVGElement,Bb=function(a,b,c){var d,e=K.createElementNS("http://www.w3.org/2000/svg",a),f=/([a-z])([A-Z])/g;for(d in c)e.setAttributeNS(null,d.replace(f,"$1-$2").toLowerCase(),c[d]);return b.appendChild(e),e},Cb=document.documentElement,Db=function(){var a,b,c,d=p||/Android/i.test(O)&&!window.chrome;return K.createElementNS&&!d&&(a=Bb("svg",Cb),b=Bb("rect",a,{width:100,height:50,x:100}),c=b.getBoundingClientRect().left,b.style[xb]="50% 50%",b.style[vb]="scale(0.5,0.5)",d=c===b.getBoundingClientRect().left,Cb.removeChild(a)),d}(),Eb=function(a,b,c){var d=a.getBBox();b=cb(b).split(" "),c.xOrigin=(-1!==b[0].indexOf("%")?parseFloat(b[0])/100*d.width:parseFloat(b[0]))+d.x,c.yOrigin=(-1!==b[1].indexOf("%")?parseFloat(b[1])/100*d.height:parseFloat(b[1]))+d.y},Fb=N.getTransform=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,g,i,j,k,l,m,n,o,p,q,r,s,t=c?a._gsTransform||new zb:new zb,u=t.scaleX<0,v=2e-5,w=1e5,x=179.99,y=x*H,z=yb?parseFloat(W(a,xb,b,!1,"0 0 0").split(" ")[2])||t.zOrigin||0:0,A=parseFloat(h.defaultTransformPerspective)||0;if(vb?e=W(a,wb,b,!0):a.currentStyle&&(e=a.currentStyle.filter.match(E),e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),t.x||0,t.y||0].join(","):""),e&&"none"!==e&&"matrix(1, 0, 0, 1, 0, 0)"!==e){for(g=(e||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],i=g.length;--i>-1;)j=Number(g[i]),g[i]=(k=j-(j|=0))?(k*w+(0>k?-.5:.5)|0)/w+j:j;if(16===g.length){var B=g[8],C=g[9],D=g[10],F=g[12],G=g[13],J=g[14];if(t.zOrigin&&(J=-t.zOrigin,F=B*J-g[12],G=C*J-g[13],J=D*J+t.zOrigin-g[14]),!c||d||null==t.rotationX){var K,L,M,N,O,P,Q,R=g[0],S=g[1],T=g[2],U=g[3],V=g[4],X=g[5],Y=g[6],Z=g[7],$=g[11],_=Math.atan2(Y,D),ab=-y>_||_>y;t.rotationX=_*I,_&&(N=Math.cos(-_),O=Math.sin(-_),K=V*N+B*O,L=X*N+C*O,M=Y*N+D*O,B=V*-O+B*N,C=X*-O+C*N,D=Y*-O+D*N,$=Z*-O+$*N,V=K,X=L,Y=M),_=Math.atan2(B,R),t.rotationY=_*I,_&&(P=-y>_||_>y,N=Math.cos(-_),O=Math.sin(-_),K=R*N-B*O,L=S*N-C*O,M=T*N-D*O,C=S*O+C*N,D=T*O+D*N,$=U*O+$*N,R=K,S=L,T=M),_=Math.atan2(S,X),t.rotation=_*I,_&&(Q=-y>_||_>y,N=Math.cos(-_),O=Math.sin(-_),R=R*N+V*O,L=S*N+X*O,X=S*-O+X*N,Y=T*-O+Y*N,S=L),Q&&ab?t.rotation=t.rotationX=0:Q&&P?t.rotation=t.rotationY=0:P&&ab&&(t.rotationY=t.rotationX=0),t.scaleX=(Math.sqrt(R*R+S*S)*w+.5|0)/w,t.scaleY=(Math.sqrt(X*X+C*C)*w+.5|0)/w,t.scaleZ=(Math.sqrt(Y*Y+D*D)*w+.5|0)/w,t.skewX=0,t.perspective=$?1/(0>$?-$:$):0,t.x=F,t.y=G,t.z=J}}else if(!(yb&&!d&&g.length&&t.x===g[4]&&t.y===g[5]&&(t.rotationX||t.rotationY)||void 0!==t.x&&"none"===W(a,"display",b))){var bb=g.length>=6,cb=bb?g[0]:1,db=g[1]||0,eb=g[2]||0,fb=bb?g[3]:1;t.x=g[4]||0,t.y=g[5]||0,l=Math.sqrt(cb*cb+db*db),m=Math.sqrt(fb*fb+eb*eb),n=cb||db?Math.atan2(db,cb)*I:t.rotation||0,o=eb||fb?Math.atan2(eb,fb)*I+n:t.skewX||0,p=l-Math.abs(t.scaleX||0),q=m-Math.abs(t.scaleY||0),Math.abs(o)>90&&Math.abs(o)<270&&(u?(l*=-1,o+=0>=n?180:-180,n+=0>=n?180:-180):(m*=-1,o+=0>=o?180:-180)),r=(n-t.rotation)%180,s=(o-t.skewX)%180,(void 0===t.skewX||p>v||-v>p||q>v||-v>q||r>-x&&x>r&&r*w|!1||s>-x&&x>s&&s*w|!1)&&(t.scaleX=l,t.scaleY=m,t.rotation=n,t.skewX=o),yb&&(t.rotationX=t.rotationY=t.z=0,t.perspective=A,t.scaleZ=1)}t.zOrigin=z;for(i in t)t[i]<v&&t[i]>-v&&(t[i]=0)}else t={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,perspective:A,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return c&&(a._gsTransform=t),t.svg=Ab&&a instanceof Ab&&a.parentNode instanceof Ab,t.svg&&(Eb(a,W(a,xb,f,!1,"50% 50%")+"",t),tb=h.useSVGTransformAttr||Db),t.xPercent=t.yPercent=0,t},Gb=function(a){var b,c,d=this.data,e=-d.rotation*H,f=e+d.skewX*H,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,o,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,t="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x+q*d.xPercent/100,x=d.y+r*d.yPercent/100;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,o=(d.oyp?r*d.oy*.01:d.oy)-r/2,w+=n-(n*h+o*i),x+=o-(n*j+o*k)),s?(n=q/2,o=r/2,t+=", Dx="+(n-(n*h+o*i)+w)+", Dy="+(o-(n*j+o*k)+x)+")"):t+=", sizingMethod='auto expand')",l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(F,t):t+" "+b,!(0!==a&&1!==a||1!==h||0!==i||0!==j||1!==k||s&&-1===t.indexOf("Dx=0, Dy=0")||v.test(b)&&100!==parseFloat(RegExp.$1)||-1!==b.indexOf(b.indexOf("Alpha"))||!l.removeAttribute("filter")),!s){var y,z,A,B=8>p?1:-1;for(n=d.ieOffsetX||0,o=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),pb=0;4>pb;pb++)z=ab[pb],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):X(this.t,z,parseFloat(y),y.replace(u,""))||0,A=c!==d[z]?2>pb?-d.ieOffsetX:-d.ieOffsetY:2>pb?n-d.ieOffsetX:o-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===pb||2===pb?1:B)))+"px"}}},Hb=N.set3DTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z=this.data,A=this.t.style,B=z.rotation*H,C=z.scaleX,D=z.scaleY,E=z.scaleZ,F=z.x,G=z.y,I=z.z,J=z.perspective;if((1===a||0===a)&&!("auto"!==z.force3D||z.rotationY||z.rotationX||1!==E||J||I))return void Ib.call(this,a);if(n){var K=1e-4;K>C&&C>-K&&(C=E=2e-5),K>D&&D>-K&&(D=E=2e-5),J&&!z.z&&!z.rotationX&&!z.rotationY&&(J=0)}if(B||z.skewX)t=Math.cos(B),u=Math.sin(B),b=t,f=u,z.skewX&&(B-=z.skewX*H,t=Math.cos(B),u=Math.sin(B),"simple"===z.skewType&&(v=Math.tan(z.skewX*H),v=Math.sqrt(1+v*v),t*=v,u*=v)),c=-u,g=t;else{if(!(z.rotationY||z.rotationX||1!==E||J||z.svg))return void(A[vb]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) translate3d(":"translate3d(")+F+"px,"+G+"px,"+I+"px)"+(1!==C||1!==D?" scale("+C+","+D+")":""));b=g=1,c=f=0}l=1,d=e=h=i=j=k=m=o=p=0,q=J?-1/J:0,r=z.zOrigin,s=1e5,B=z.rotationY*H,B&&(t=Math.cos(B),u=Math.sin(B),j=l*-u,o=q*-u,d=b*u,h=f*u,l*=t,q*=t,b*=t,f*=t),B=z.rotationX*H,B&&(t=Math.cos(B),u=Math.sin(B),v=c*t+d*u,w=g*t+h*u,x=k*t+l*u,y=p*t+q*u,d=c*-u+d*t,h=g*-u+h*t,l=k*-u+l*t,q=p*-u+q*t,c=v,g=w,k=x,p=y),1!==E&&(d*=E,h*=E,l*=E,q*=E),1!==D&&(c*=D,g*=D,k*=D,p*=D),1!==C&&(b*=C,f*=C,j*=C,o*=C),r&&(m-=r,e=d*m,i=h*m,m=l*m+r),z.svg&&(e+=z.xOrigin-(z.xOrigin*b+z.yOrigin*c),i+=z.yOrigin-(z.xOrigin*f+z.yOrigin*g)),e=(v=(e+=F)-(e|=0))?(v*s+(0>v?-.5:.5)|0)/s+e:e,i=(v=(i+=G)-(i|=0))?(v*s+(0>v?-.5:.5)|0)/s+i:i,m=(v=(m+=I)-(m|=0))?(v*s+(0>v?-.5:.5)|0)/s+m:m,A[vb]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix3d(":"matrix3d(")+[(b*s|0)/s,(f*s|0)/s,(j*s|0)/s,(o*s|0)/s,(c*s|0)/s,(g*s|0)/s,(k*s|0)/s,(p*s|0)/s,(d*s|0)/s,(h*s|0)/s,(l*s|0)/s,(q*s|0)/s,e,i,m,J?1+-m/J:1].join(",")+")"},Ib=N.set2DTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this.data,n=this.t,o=n.style,p=m.x,q=m.y;return!(m.rotationX||m.rotationY||m.z||m.force3D===!0||"auto"===m.force3D&&1!==a&&0!==a)||m.svg&&tb||!yb?(e=m.scaleX,f=m.scaleY,m.rotation||m.skewX||m.svg?(b=m.rotation*H,c=b-m.skewX*H,d=1e5,g=Math.cos(b)*e,h=Math.sin(b)*e,i=Math.sin(c)*-f,j=Math.cos(c)*f,m.svg&&(p+=m.xOrigin-(m.xOrigin*g+m.yOrigin*i),q+=m.yOrigin-(m.xOrigin*h+m.yOrigin*j),l=1e-6,l>p&&p>-l&&(p=0),l>q&&q>-l&&(q=0)),k=(g*d|0)/d+","+(h*d|0)/d+","+(i*d|0)/d+","+(j*d|0)/d+","+p+","+q+")",m.svg&&tb?n.setAttribute("transform","matrix("+k):o[vb]=(m.xPercent||m.yPercent?"translate("+m.xPercent+"%,"+m.yPercent+"%) matrix(":"matrix(")+k):o[vb]=(m.xPercent||m.yPercent?"translate("+m.xPercent+"%,"+m.yPercent+"%) matrix(":"matrix(")+e+",0,0,"+f+","+p+","+q+")",void 0):(this.setRatio=Hb,void Hb.call(this,a))};rb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(a,b,c,d,e,g,i){if(d._transform)return e;var j,k,l,m,n,o,p,q=d._transform=Fb(a,f,!0,i.parseTransform),r=a.style,s=1e-6,t=ub.length,u=i,v={};if("string"==typeof u.transform&&vb)l=L.style,l[vb]=u.transform,l.display="block",l.position="absolute",K.body.appendChild(L),j=Fb(L,null,!1),K.body.removeChild(L);else if("object"==typeof u){if(j={scaleX:eb(null!=u.scaleX?u.scaleX:u.scale,q.scaleX),scaleY:eb(null!=u.scaleY?u.scaleY:u.scale,q.scaleY),scaleZ:eb(u.scaleZ,q.scaleZ),x:eb(u.x,q.x),y:eb(u.y,q.y),z:eb(u.z,q.z),xPercent:eb(u.xPercent,q.xPercent),yPercent:eb(u.yPercent,q.yPercent),perspective:eb(u.transformPerspective,q.perspective)},p=u.directionalRotation,null!=p)if("object"==typeof p)for(l in p)u[l]=p[l];else u.rotation=p;"string"==typeof u.x&&-1!==u.x.indexOf("%")&&(j.x=0,j.xPercent=eb(u.x,q.xPercent)),"string"==typeof u.y&&-1!==u.y.indexOf("%")&&(j.y=0,j.yPercent=eb(u.y,q.yPercent)),j.rotation=fb("rotation"in u?u.rotation:"shortRotation"in u?u.shortRotation+"_short":"rotationZ"in u?u.rotationZ:q.rotation,q.rotation,"rotation",v),yb&&(j.rotationX=fb("rotationX"in u?u.rotationX:"shortRotationX"in u?u.shortRotationX+"_short":q.rotationX||0,q.rotationX,"rotationX",v),j.rotationY=fb("rotationY"in u?u.rotationY:"shortRotationY"in u?u.shortRotationY+"_short":q.rotationY||0,q.rotationY,"rotationY",v)),j.skewX=null==u.skewX?q.skewX:fb(u.skewX,q.skewX),j.skewY=null==u.skewY?q.skewY:fb(u.skewY,q.skewY),(k=j.skewY-q.skewY)&&(j.skewX+=k,j.rotation+=k)}for(yb&&null!=u.force3D&&(q.force3D=u.force3D,o=!0),q.skewType=u.skewType||q.skewType||h.defaultSkewType,n=q.force3D||q.z||q.rotationX||q.rotationY||j.z||j.rotationX||j.rotationY||j.perspective,!n&&null!=u.scale&&(j.scaleZ=1);--t>-1;)c=ub[t],m=j[c]-q[c],(m>s||-s>m||null!=u[c]||null!=J[c])&&(o=!0,e=new nb(q,c,q[c],m,e),c in v&&(e.e=v[c]),e.xs0=0,e.plugin=g,d._overwriteProps.push(e.n));return m=u.transformOrigin,m&&q.svg&&(Eb(a,m,j),e=new nb(q,"xOrigin",q.xOrigin,j.xOrigin-q.xOrigin,e,-1,"transformOrigin"),e.b=q.xOrigin,e.e=e.xs0=j.xOrigin,e=new nb(q,"yOrigin",q.yOrigin,j.yOrigin-q.yOrigin,e,-1,"transformOrigin"),e.b=q.yOrigin,e.e=e.xs0=j.yOrigin,m="0px 0px"),(m||yb&&n&&q.zOrigin)&&(vb?(o=!0,c=xb,m=(m||W(a,c,f,!1,"50% 50%"))+"",e=new nb(r,c,0,0,e,-1,"transformOrigin"),e.b=r[c],e.plugin=g,yb?(l=q.zOrigin,m=m.split(" "),q.zOrigin=(m.length>2&&(0===l||"0px"!==m[2])?parseFloat(m[2]):l)||0,e.xs0=e.e=m[0]+" "+(m[1]||"50%")+" 0px",e=new nb(q,"zOrigin",0,0,e,-1,e.n),e.b=l,e.xs0=e.e=q.zOrigin):e.xs0=e.e=m):cb(m+"",q)),o&&(d._transformType=q.svg&&tb||!n&&3!==this._transformType?2:3),e},prefix:!0}),rb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),rb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,e,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;i<x.length;i++)this.p.indexOf("border")&&(x[i]=U(x[i])),l=k=W(a,x[i],f,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=d[c]||s),r!==s&&(u=X(a,"borderLeft",n,s),v=X(a,"borderTop",n,s),"%"===r?(l=u/p*100+"%",k=v/q*100+"%"):"em"===r?(w=X(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=ob(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:kb("0px 0px 0px 0px",!1,!0)}),rb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,e,g){var h,i,j,k,l,m,n="background-position",o=f||V(a,null),q=this.format((o?p?o.getPropertyValue(n+"-x")+" "+o.getPropertyValue(n+"-y"):o.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=W(a,"backgroundImage").replace(B,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),M.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-M.width:a.offsetHeight-M.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,e,g)},formatter:cb}),rb("backgroundSize",{defaultValue:"0 0",formatter:cb}),rb("perspective",{defaultValue:"0px",prefix:!0}),rb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),rb("transformStyle",{prefix:!0}),rb("backfaceVisibility",{prefix:!0}),rb("userSelect",{prefix:!0}),rb("margin",{parser:lb("marginTop,marginRight,marginBottom,marginLeft")}),rb("padding",{parser:lb("paddingTop,paddingRight,paddingBottom,paddingLeft")}),rb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,e,g){var h,i,j;return 9>p?(i=a.currentStyle,j=8>p?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(W(a,this.p,f,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,e,g)}}),rb("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),rb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),rb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,e,g){return this.parseComplex(a.style,this.format(W(a,"borderTopWidth",f,!1,"0px")+" "+W(a,"borderTopStyle",f,!1,"solid")+" "+W(a,"borderTopColor",f,!1,"#000")),this.format(b),e,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(jb)||["#000"])[0]}}),rb("borderWidth",{parser:lb("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),rb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new nb(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Jb=function(a){var b,c=this.t,d=c.filter||W(this.data,"filter")||"",e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!W(this.data,"filter")):(c.filter=d.replace(x,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("pacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(v,"opacity="+e))};rb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,e,g){var h=parseFloat(W(a,"opacity",f,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===W(a,"visibility",f)&&0!==b&&(h=0),P?e=new nb(i,"opacity",h,b-h,e):(e=new nb(i,"opacity",100*h,100*(b-h),e),e.xn1=j?1:0,i.zoom=1,e.type=2,e.b="alpha(opacity="+e.s+")",e.e="alpha(opacity="+(e.s+e.c)+")",e.data=a,e.plugin=g,e.setRatio=Jb),j&&(e=new nb(i,"visibility",0,0,e,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),e.xs0="inherit",d._overwriteProps.push(e.n),d._overwriteProps.push(c)),e}});var Kb=function(a,b){b&&(a.removeProperty?("ms"===b.substr(0,2)&&(b="M"+b.substr(1)),a.removeProperty(b.replace(z,"-$1").toLowerCase())):a.removeAttribute(b))},Lb=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Kb(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};rb("className",{parser:function(a,b,d,e,g,h,i){var j,k,l,m,n,o=a.getAttribute("class")||"",p=a.style.cssText;if(g=e._classNamePT=new nb(a,d,0,0,g,2),g.setRatio=Lb,g.pr=-11,c=!0,g.b=o,k=Z(a,f),l=a._gsClassPT,l){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),e._tween._duration&&(a.setAttribute("class",g.e),j=$(a,k,Z(a),i,m),a.setAttribute("class",o),g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=e.parse(a,j.difs,g,h)),g}});var Mb=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=i.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(" ").join("").split(","),d=b.length;--d>-1;)c=b[d],i[c]&&(i[c].parse===g?e=!0:c="transformOrigin"===c?xb:i[c].p),Kb(f,c);e&&(Kb(f,vb),this.t._gsTransform&&delete this.t._gsTransform)}};for(rb("clearProps",{parser:function(a,b,d,e,f){return f=new nb(a,d,0,0,f,2),f.setRatio=Mb,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),j="bezier,throwProps,physicsProps,physics2D".split(","),pb=j.length;pb--;)sb(j[pb]);j=h.prototype,j._firstPT=null,j._onInitTween=function(a,b,e){if(!a.nodeType)return!1;this._target=a,this._tween=e,this._vars=b,k=b.autoRound,c=!1,d=b.suffixMap||h.suffixMap,f=V(a,""),g=this._overwriteProps;var i,j,n,p,q,r,s,t,u,v=a.style;if(l&&""===v.zIndex&&(i=W(a,"zIndex",f),("auto"===i||""===i)&&this._addLazySet(v,"zIndex",0)),"string"==typeof b&&(p=v.cssText,i=Z(a,f),v.cssText=p+";"+b,i=$(a,i,Z(a)).difs,!P&&w.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,v.cssText=p),this._firstPT=j=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,vb?m&&(l=!0,""===v.zIndex&&(s=W(a,"zIndex",f),("auto"===s||""===s)&&this._addLazySet(v,"zIndex",0)),o&&this._addLazySet(v,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):v.zoom=1,n=j;n&&n._next;)n=n._next;t=new nb(a,"transform",0,0,null,2),this._linkCSSP(t,null,n),t.setRatio=u&&yb?Hb:vb?Ib:Gb,t.data=this._transform||Fb(a,f,!0),g.pop()}if(c){for(;j;){for(r=j._next,n=p;n&&n.pr>j.pr;)n=n._next;(j._prev=n?n._prev:q)?j._prev._next=j:p=j,(j._next=n)?n._prev=j:q=j,j=r}this._firstPT=p}return!0},j.parse=function(a,b,c,e){var g,h,j,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],h=i[g],h?c=h.parse(a,n,g,this,c,e,b):(m=W(a,g,f)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&y.test(n)?(q||(n=ib(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=ob(s,g,m,n,!0,"transparent",c,0,e)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(j=parseFloat(m),o=j||0===j?m.substr((j+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(j=bb(a,g,f),o="px"):"left"===g||"top"===g?(j=Y(a,g,f),o="px"):(j="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(u,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=g in d?d[g]:o),n=l||0===l?(r?l+j:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&j&&(j=X(a,g,j,o),"%"===p?(j/=X(a,g,100,"%")/100,b.strictUnits!==!0&&(m=j+"%")):"em"===p?j/=X(a,g,1,"em"):"px"!==p&&(l=X(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+j+p)),r&&(l+=j),!j&&0!==j||!l&&0!==l?void 0!==s[g]&&(n||n+""!="NaN"&&null!=n)?(c=new nb(s,g,l||j||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):R("invalid "+g+" tween value: "+b[g]):(c=new nb(s,g,j,l-j,c,0,g,k!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=ob(s,g,m,n,!0,null,c,0,e)),e&&c&&!c.plugin&&(c.plugin=e);return c},j.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},j._enableTransforms=function(a){this._transform=this._transform||Fb(this._target,f,!0),this._transformType=this._transform.svg&&tb||!a&&3!==this._transformType?2:3};var Nb=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};j._addLazySet=function(a,b,c){var d=this._firstPT=new nb(a,b,0,0,this._firstPT,2);d.e=c,d.setRatio=Nb,d.data=this},j._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:!d&&null===this._firstPT&&(this._firstPT=a),a._next=b,a._prev=c),a},j._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Ob=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Ob(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Z(f)),c&&c.push(f)),(1===g||9===g||11===g)&&f.childNodes.length&&Ob(f,b,c)};return h.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Ob(a,j,l),h.render(c,!0),Ob(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=$(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([h]),h},!0),function(){var a=e._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),e._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(a,b){var c,d,e;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={},this._start={},this._end={};for(c in b)this._start[c]=this._proxy[c]=d=a.getAttribute(c),e=this._addTween(this._proxy,c,parseFloat(d),b[c],c),this._end[c]=e?e.s+e.c:b[c],this._overwriteProps.push(c);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length,e=1===a?this._end:a?this._proxy:this._start;--d>-1;)b=c[d],this._target.setAttribute(b,e[b]+"")}}),e._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(a,b){"object"!=typeof b&&(b={rotation:b}),this.finals={};var c,d,e,f,g,h,i=b.useRadians===!0?2*Math.PI:360,j=1e-6;for(c in b)"useRadians"!==c&&(h=(b[c]+"").split("_"),d=h[0],e=parseFloat("function"!=typeof a[c]?a[c]:a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]()),f=this.finals[c]="string"==typeof d&&"="===d.charAt(1)?e+parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)):Number(d)||0,g=f-e,h.length&&(d=h.join("_"),-1!==d.indexOf("short")&&(g%=i,g!==g%(i/2)&&(g=0>g?g+i:g-i)),-1!==d.indexOf("_cw")&&0>g?g=(g+9999999999*i)%i-(g/i|0)*i:-1!==d.indexOf("ccw")&&g>0&&(g=(g-9999999999*i)%i-(g/i|0)*i)),(g>j||-j>g)&&(this._addTween(a,c,e,e+g,c),this._overwriteProps.push(c)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,e._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,f=e.GreenSockGlobals||e,g=f.com.greensock,h=2*Math.PI,i=Math.PI/2,j=g._class,k=function(b,c){var d=j("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},l=a.register||function(){},m=function(a,b,c,d){var e=j("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return l(e,a),e},n=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},o=function(b,c){var d=j("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},p=m("Back",o("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),o("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),o("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),q=j("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),r=q.prototype=new a;return r.constructor=q,r.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},q.ease=new q(.7,.7),r.config=q.config=function(a,b,c){return new q(a,b,c)},b=j("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),r=b.prototype=new a,r.constructor=b,r.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},r.config=b.config=function(a){return new b(a)},c=j("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),m=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--m>-1;)c=o?Math.random():1/l*m,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:m%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new n(1,1,null),m=l;--m>-1;)g=j[m],h=new n(g.x,g.y,h);this._prev=new n(0,0,0!==h.t?h:h.next)},!0),r=c.prototype=new a,r.constructor=c,r.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},r.config=function(a){return new c(a)},c.ease=new c,m("Bounce",k("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),k("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),k("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),m("Circ",k("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),k("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),k("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=j("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/h*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},m("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*h/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*h/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*h/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*h/this._p2)*.5+1},.45)),m("Expo",k("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),k("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),k("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),m("Sine",k("SineOut",function(a){return Math.sin(a*i)}),k("SineIn",function(a){return-Math.cos(a*i)+1}),k("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),j("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),l(f.SlowMo,"SlowMo","ease,"),l(c,"RoughEase","ease,"),l(b,"SteppedEase","ease,"),p},!0)}),e._gsDefine&&e._gsQueue.pop()(),function(a,b){var d=a.GreenSockGlobals=a.GreenSockGlobals||a;if(!d.TweenLite){var e,f,g,h,i,j=function(a){var b,c=a.split("."),e=d;for(b=0;b<c.length;b++)e[c[b]]=e=e[c[b]]||{};return e},k=j("com.greensock"),l=1e-10,m=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},n=function(){},o=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),p={},q=function(e,f,g,h){this.sc=p[e]?p[e].sc:[],p[e]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(k){for(var l,m,n,o,r=f.length,s=r;--r>-1;)(l=p[f[r]]||new q(f[r],[])).gsClass?(i[r]=l.gsClass,s--):k&&l.sc.push(this);if(0===s&&g)for(m=("com.greensock."+e).split("."),n=m.pop(),o=j(m.join("."))[n]=this.gsClass=g.apply(g,i),h&&(d[n]=o,"function"==typeof c&&c.amd?c((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return o}):e===b&&"undefined"!=typeof module&&module.exports&&(module.exports=o)),r=0;r<this.sc.length;r++)this.sc[r].check()},this.check(!0)
},r=a._gsDefine=function(a,b,c,d){return new q(a,b,c,d)},s=k._class=function(a,b,c){return b=b||function(){},r(a,[],function(){return b},c),b};r.globals=d;var t=[0,0,1,1],u=[],v=s("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?t.concat(b):t},!0),w=v.map={},x=v.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?s("easing."+f,null,!0):k.easing[f]||{},g=l.length;--g>-1;)h=l[g],w[f+"."+h]=w[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(g=v.prototype,g._calcEnd=!1,g.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},e=["Linear","Quad","Cubic","Quart","Quint,Strong"],f=e.length;--f>-1;)g=e[f]+",Power"+f,x(new v(null,null,1,f),g,"easeOut",!0),x(new v(null,null,2,f),g,"easeIn"+(0===f?",easeNone":"")),x(new v(null,null,3,f),g,"easeInOut");w.linear=k.easing.Linear.easeIn,w.swing=k.easing.Quad.easeInOut;var y=s("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});g=y.prototype,g.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),g=j.length;--g>-1;)f=j[g],f.c===b&&f.s===c?j.splice(g,1):0===k&&f.pr<e&&(k=g+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this===h&&!i&&h.wake()},g.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},g.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var z=a.requestAnimationFrame,A=a.cancelAnimationFrame,B=Date.now||function(){return(new Date).getTime()},C=B();for(e=["ms","moz","webkit","o"],f=e.length;--f>-1&&!z;)z=a[e[f]+"RequestAnimationFrame"],A=a[e[f]+"CancelAnimationFrame"]||a[e[f]+"CancelRequestAnimationFrame"];s("Ticker",function(a,b){var c,d,e,f,g,j=this,k=B(),m=b!==!1&&z,o=500,p=33,q=function(a){var b,h,i=B()-C;i>o&&(k+=i-p),C+=i,j.time=(C-k)/1e3,b=j.time-g,(!c||b>0||a===!0)&&(j.frame++,g+=b+(b>=f?.004:f-b),h=!0),a!==!0&&(e=d(q)),h&&j.dispatchEvent("tick")};y.call(j),j.time=j.frame=0,j.tick=function(){q(!0)},j.lagSmoothing=function(a,b){o=a||1/l,p=Math.min(b,o,0)},j.sleep=function(){null!=e&&(m&&A?A(e):clearTimeout(e),d=n,e=null,j===h&&(i=!1))},j.wake=function(){null!==e?j.sleep():j.frame>10&&(C=B()-o+5),d=0===c?n:m&&z?z:function(a){return setTimeout(a,1e3*(g-j.time)+1|0)},j===h&&(i=!0),q(2)},j.fps=function(a){return arguments.length?(c=a,f=1/(c||60),g=this.time+f,j.wake(),void 0):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,j.fps(c),void 0):m},j.fps(a),setTimeout(function(){m&&(!e||j.frame<5)&&j.useRAF(!1)},1500)}),g=k.Ticker.prototype=new k.events.EventDispatcher,g.constructor=k.Ticker;var D=s("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,S){i||h.wake();var c=this.vars.useFrames?R:S;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});h=D.ticker=new k.Ticker,g=D.prototype,g._dirty=g._gc=g._initted=g._paused=!1,g._totalTime=g._time=0,g._rawPrevTime=-1,g._next=g._last=g._onUpdate=g._timeline=g.timeline=null,g._paused=!1;var E=function(){i&&B()-C>2e3&&h.wake(),setTimeout(E,2e3)};E(),g.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},g.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},g.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},g.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},g.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},g.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},g.render=function(){},g.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},g.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},g._enabled=function(a,b){return i||h.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},g._kill=function(){return this._enabled(!1,!1)},g.kill=function(a,b){return this._kill(a,b),this},g._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},g._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},g.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=o(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},g.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},g.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},g.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},g.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},g.totalTime=function(a,b,c){if(i||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&(this.render(a,b,!1),J.length&&T())}return this},g.progress=g.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},g.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},g.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},g.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||l,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},g.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},g.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){!i&&!a&&h.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var F=s("core.SimpleTimeline",function(a){D.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});g=F.prototype=new D,g.constructor=F,g.kill()._gc=!1,g._first=g._last=g._recent=null,g._sortChildren=!1,g.add=g.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._recent=a,this._timeline&&this._uncache(!0),this},g._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},g.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},g.rawTime=function(){return i||h.wake(),this._totalTime};var G=s("TweenLite",function(b,c,d){if(D.call(this,c,d),this.render=G.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:G.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?Q[G.defaultOverwrite]:"number"==typeof i?i>>0:Q[i],(h||b instanceof Array||b.push&&o(b))&&"number"!=typeof b[0])for(this._targets=g=m(b),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(m(f))):(this._siblings[e]=U(f,this,!1),1===i&&this._siblings[e].length>1&&W(f,this,null,1,this._siblings[e])):(f=g[e--]=G.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=U(b,this,!1),1===i&&this._siblings.length>1&&W(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-l,this.render(-this._delay))},!0),H=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},I=function(a,b){var c,d={};for(c in a)!(P[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!M[c]||M[c]&&M[c]._autoCSS)||(d[c]=a[c],!delete a[c]));a.css=d};g=G.prototype=new D,g.constructor=G,g.kill()._gc=!1,g.ratio=0,g._firstPT=g._targets=g._overwrittenProps=g._startAt=null,g._notifyPluginsOfEnabled=g._lazy=!1,G.version="1.14.2",G.defaultEase=g._ease=new v(null,null,1,1),G.defaultOverwrite="auto",G.ticker=h,G.autoSleep=!0,G.lagSmoothing=function(a,b){h.lagSmoothing(a,b)},G.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(G.selector=c,c(b)):"undefined"==typeof document?b:document.querySelectorAll?document.querySelectorAll(b):document.getElementById("#"===b.charAt(0)?b.substr(1):b)};var J=[],K={},L=G._internals={isArray:o,isSelector:H,lazyTweens:J},M=G._plugins={},N=L.tweenLookup={},O=0,P=L.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},Q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},R=D._rootFramesTimeline=new F,S=D._rootTimeline=new F,T=L.lazyRender=function(){var a,b=J.length;for(K={};--b>-1;)a=J[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);J.length=0};S._startTime=h.time,R._startTime=h.frame,S._active=R._active=!0,setTimeout(T,1),D._updateRoot=G.render=function(){var a,b,c;if(J.length&&T(),S.render((h.time-S._startTime)*S._timeScale,!1,!1),R.render((h.frame-R._startTime)*R._timeScale,!1,!1),J.length&&T(),!(h.frame%120)){for(c in N){for(b=N[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete N[c]}if(c=S._first,(!c||c._paused)&&G.autoSleep&&!R._first&&1===h._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||h.sleep()}}},h.addEventListener("tick",D._updateRoot);var U=function(a,b,c){var d,e,f=a._gsTweenID;if(N[f||(a._gsTweenID=f="t"+O++)]||(N[f]={target:a,tweens:[]}),b&&(d=N[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return N[f].tweens},V=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=G.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},W=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||V(h,b)&&h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+l,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])!==b&&!h._gc&&!h._paused&&(h._timeline!==b._timeline?(j=j||X(b,0,o),0===X(h,j,o)&&(m[n++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)if(h=m[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!V(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},X=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*l>f-b?l:(f+=a.totalDuration()/a._timeScale/e)>b+l?0:f-b-l};g._init=function(){var a,b,c,d,e,f=this.vars,g=this._overwrittenProps,h=this._duration,i=!!f.immediateRender,j=f.ease;if(f.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in f.startAt)e[d]=f.startAt[d];if(e.overwrite=!1,e.immediateRender=!0,e.lazy=i&&f.lazy!==!1,e.startAt=e.delay=null,this._startAt=G.to(this.target,0,e),i)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(f.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(i=!1),c={};for(d in f)P[d]&&"autoCSS"!==d||(c[d]=f[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=i&&f.lazy!==!1,c.immediateRender=i,this._startAt=G.to(this.target,0,c),i){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=j=j?j instanceof v?j:"function"==typeof j?new v(j,f.easeParams):w[j]||G.defaultEase:G.defaultEase,f.easeParams instanceof Array&&j.config&&(this._ease=j.config.apply(j,f.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],g?g[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,g);if(b&&G._onPluginEvent("_onInitAllProps",this),g&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),f.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=f.onUpdate,this._initted=!0},g._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;K[b._gsTweenID]&&T(),this.vars.css||b.style&&b!==a&&b.nodeType&&M.css&&this.vars.autoCSS!==!1&&I(this.vars,b);for(f in this.vars){if(k=this.vars[f],P[f])k&&(k instanceof Array||k.push&&o(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(M[f]&&(i=new M[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&W(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(K[b._gsTweenID]=!0),h)},g.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>j||j===l)&&j!==a&&(c=!0,j>l&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:l);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0&&j!==l)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:l)),this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,m=this._easeType,n=this._easePower;(1===m||3===m&&k>=.5)&&(k=1-k),3===m&&(k*=2),1===n?k*=k:2===n?k*=k*k:3===n?k*=k*k*k:4===n&&(k*=k*k*k*k),this.ratio=1===m?1-k:2===m?k:.5>a/i?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,J.push(this),this._lazy=[a,b],void 0;this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&a!==-1e-4&&this._startAt.render(a,b,c),b||(this._time!==h||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u)),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||u),0===i&&this._rawPrevTime===l&&g!==l&&(this._rawPrevTime=0))}},g._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:G.selector(b)||b;var d,e,f,g,h,i,j,k,l;if((o(b)||H(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d])&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(G.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if(!V(this,c,b,l))return!1}for(f in j)(g=h[f])&&(g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},g.invalidate=function(){return this._notifyPluginsOfEnabled&&G._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-l,this.render(-this._delay)),this},g._enabled=function(a,b){if(i||h.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=U(d[c],this,!0);else this._siblings=U(this.target,this,!0)}return D.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?G._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},G.to=function(a,b,c){return new G(a,b,c)},G.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new G(a,b,c)},G.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new G(a,b,d)},G.delayedCall=function(a,b,c,d,e){return new G(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},G.set=function(a,b){return new G(a,0,b)},G.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:G.selector(a)||a;var c,d,e,f;if((o(a)||H(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(G.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=U(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},G.killTweensOf=G.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=G.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var Y=s("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=Y.prototype},!0);if(g=Y.prototype,Y.version="1.10.1",Y.API=2,g._firstPT=null,g._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},g.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=Math.round(b):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},g._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},g._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},G._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},Y.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===Y.API&&(M[(new a[b])._propName]=a[b]);return!0},r.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=s("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){Y.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new Y(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,Y.activate([g]),g},e=a._gsQueue,e){for(f=0;f<e.length;f++)e[f]();for(g in p)p[g].func||a.console.log("GSAP encountered missing dependency: com.greensock."+g)}i=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),c("gs",function(a){return function(){var b,c;return c=function(){return{TweenMax:this.TweenMax,TimelineMax:this.TimelineMax,Linear:this.Linear,Elastic:this.Elastic}},b=c.apply(a,arguments),b||a.gs}}(this)),c("experience/responsive",[],function(){var a={};return a.AT_LARGE=960,a.AT_MEDIUM=560,a.SIZE={x:0,y:0},a.IS_TOUCH=!1,a.RATIO=1,a.IS_LARGE=function(){return a.SIZE.x>a.AT_LARGE},a.IS_MEDIUM=function(){return a.SIZE.x>a.AT_MEDIUM},a.IS_SMALL=function(){return a.SIZE.x<=a.AT_MEDIUM},a}),c("experience/circle",["pixi","gs","jquery","experience/responsive"],function(a,b,c,d){var e=function(){return this.elm=new a.DisplayObjectContainer,this._titleStyle={font:'400 10px "Fira Sans", sans-serif',fill:"#222222"},this._subtitleStyle={font:'400 10px "Fira Sans", sans-serif',fill:"#222222"},this};return e.prototype.draw=function(b){this.radius=b,this._circle=new a.Graphics,this.elm.addChild(this._circle),this._drawCircle();var c=Math.min(b,5);this._circle.hitArea=new a.Rectangle(-c,-c,2*c,2*c),this.data&&this._drawTitle()},e.prototype.setData=function(a){this.data=a},e.prototype._setStaticAnimation=function(){var a=this.radius/10;b.TweenMax.fromTo(this._circle.scale,.6+.5*Math.random(),{x:1,y:1},{x:1.2+.2*a,y:1.2+.2*a,repeat:-1,yoyo:!0}),this._positionTween=new b.TimelineMax({repeat:-1}).fromTo(this.elm,1+.5*Math.random(),{x:this._x0,y:this._y0},{x:this._x0+(-5+10*Math.random())*a,y:this._y0+(-5+10*Math.random())*a,ease:b.Linear.easeNone}).to(this.elm,1+.5*Math.random(),{x:this._x0+(-5+10*Math.random())*a,y:this._y0+(-5+10*Math.random())*a,ease:b.Linear.easeNone}).to(this.elm,1+.5*Math.random(),{x:this._x0+(-5+10*Math.random())*a,y:this._y0+(-5+10*Math.random())*a,ease:b.Linear.easeNone}).to(this.elm,1+.5*Math.random(),{x:this._x0+(-5+10*Math.random())*a,y:this._y0+(-5+10*Math.random())*a,ease:b.Linear.easeNone}).to(this.elm,1+.5*Math.random(),{x:this._x0,y:this._y0,ease:b.Linear.easeNone})},e.prototype._resumeStaticAnimation=function(){this.stopMoving(),this.stopPulsing(),this._setStaticAnimation()},e.prototype._drawCircle=function(a){a||(a=2236962),this._color=a,this._circle.clear(),this._circle.beginFill(a),this._circle.drawCircle(0,0,this.radius),this._circle.endFill()},e.prototype._drawTitle=function(){this._title=new a.Text(this.data.getName().toUpperCase(),this._titleStyle),this._title.resolution=d.RATIO,this._title.hitArea=new a.Rectangle(0,0,this._title.width/d.RATIO,this._title.height/d.RATIO),this._title.x=20,this._title.y=-(this._title.height/d.RATIO)/2,this._title.y=Math.round(this._title.y),this._title.alpha=0,this.data.getParent&&(this._subtitle=new a.Text(this.data.getParent().getName().toUpperCase(),this._subtitleStyle),this._subtitle.resolution=d.RATIO,this._subtitle.hitArea=new a.Rectangle(0,0,this._subtitle.width/d.RATIO,this._subtitle.height/d.RATIO),this._subtitle.x=this._title.x,this._subtitle.y=-(this._subtitle.height/d.RATIO)/2,this._subtitle.y=Math.round(this._subtitle.y),this._subtitle.alpha=0),this._tagTitle=new a.Text(" ",{font:'200 12px "Fira Sans", sans-serif',fill:"#999999"}),this._tagTitle.resolution=d.RATIO,this._tagTitle.hitArea=new a.Rectangle(0,0,this._tagTitle.width/d.RATIO,this._tagTitle.height/d.RATIO),this._tagTitle.x=10,this._tagTitle.y=-(this._tagTitle.height/d.RATIO)-15,this._tagTitle.y=Math.round(this._tagTitle.y)},e.prototype.explode=function(a,c){this.exploded=!0,c=c||{x:0,y:0},a=a||500;var d=0;d=void 0===this._x0?Math.random()*a:Math.atan2(this._y0,this._x0),d+=Math.random()*Math.PI/16-Math.PI/32,b.TweenMax.to(this.elm,.2+.15*Math.random(),{alpha:0,x:c.x+Math.cos(d)*(a+200),y:c.y+Math.sin(d)*(a+200),delay:.1*Math.random(),roundProps:"x,y"})},e.prototype.implode=function(){b.TweenMax.to(this.elm,.2+.15*Math.random(),{alpha:1,x:this._x0,y:this._y0,delay:.1*Math.random(),roundProps:"x,y",onComplete:this._resumeStaticAnimation.bind(this)}),this.exploded=!1},e.prototype.mouseOver=function(){this.isOver=!0,this.mouseOverCallback&&this.mouseOverCallback(this)},e.prototype.mouseOut=function(){this.isOver=!1,this.mouseOutCallback&&this.mouseOutCallback(this)},e.prototype.lightUp=function(){this._drawCircle(this.color),this.elm.addChild(this._title),b.TweenMax.to(this._title,.2,{alpha:1})},e.prototype.lightDown=function(){if(this._drawCircle(),!this._textAlwaysVisible){var a=function(){this._title.parent&&this.elm.removeChild(this._title)}.bind(this);b.TweenMax.to(this._title,.2,{alpha:0,onComplete:a})}},e.prototype.moveTo=function(a,d,e,f){this._x0=a,this._y0=d;var g={x:a,y:d,overwrite:!0,roundProps:"x,y"};f&&c.extend(g,f),e&&(g.onComplete=e),b.TweenMax.to(this.elm,.3+.1*Math.random(),g)},e.prototype.stopMoving=function(){b.TweenMax.killTweensOf(this.elm),this.elm.x=Math.round(this.elm.x),this.elm.y=Math.round(this.elm.y)},e.prototype.stopPulsing=function(){b.TweenMax.killTweensOf(this._circle.scale)},e}),c("experience/issue",["experience/circle","experience/responsive","pixi","signals","gs"],function(a,b,c,d,e){var f=function(a,b){return this.mouseEnabled=!0,this._index=a,this._canvasSize=b,this.elm=new c.DisplayObjectContainer,this.mouseOverS=new d.Signal,this.mouseOutS=new d.Signal,this.pressS=new d.Signal,this.tapS=new d.Signal,this._tagStyle={font:'400 8px "Fira Sans", sans-serif',fill:"#222222"},this._tagTitleStyle={font:'400 14px "Fira Sans", sans-serif',fill:"#FFFFFF"},this._titleOverStyle={font:'400 14px "Fira Sans", sans-serif',fill:"#222222"},this._topicStyle={font:'200 12px "Fira Sans", sans-serif',fill:"#222222"},this._issuesStyle={font:'200 20px "Fira Sans", sans-serif',fill:"#222222"},this._tagIssuesStyle={font:'200 20px "Fira Sans", sans-serif',fill:"#FFFFFF"},this._detailStyle={font:'400 14px "Fira Sans", sans-serif',fill:"#FFFFFF"},this};return f.prototype=new a,f.prototype.constructor=f,f.MODE_EXPLORE="explore",f.MODE_TAG="tag",f.MODE_TAG_TITLE="tagTitle",f.MODE_TOPICS="topics",f.MODE_ISSUES="issues",f.MODE_TAG_ISSUES="tagIssues",f.MODE_DETAIL="detail",f.MODE_INTRO="intro",f.MODES=[f.MODE_EXPLORE,f.MODE_TOPICS,f.MODE_ISSUES,f.MODE_TAG_ISSUES,f.MODE_DETAIL],f.prototype.setData=function(b){this.mode=f.MODE_EXPLORE,a.prototype.setData.call(this,b);var c=[7059790,16173349,14368563];this.color=c[this.data._status],this._textAlwaysVisible=!1},f.prototype.draw=function(b,d,e){d=Math.round(d),e=Math.round(e),a.prototype.draw.call(this,b,d,e),this.elm.interactive=!0,this.elm.buttonMode=!0,this.isInteractive=!0,this.elm.index=this._index;var f=Math.max(this._canvasSize.x,this._canvasSize.y);this._openCircle=new c.Graphics,this._openCircle.beginFill(this.color),this._openCircle.drawCircle(0,0,f),this._openCircle.scale={x:0,y:0},this._openCircle.endFill(),this.elm.addChild(this._openCircle),this.elm.mouseover=this._onMouseOver.bind(this),this.elm.mouseout=this._onMouseOut.bind(this),this.elm.mousedown=this._onPress.bind(this),this.elm.tap=this._onTap.bind(this)},f.prototype._onMouseOver=function(){this.mouseEnabled&&this.mouseOverS.dispatch(this)},f.prototype._onMouseOut=function(){this.mouseEnabled&&this.mouseOutS.dispatch(this)},f.prototype._onPress=function(){this.mouseEnabled&&this.pressS.dispatch(this)},f.prototype._onTap=function(){this.mouseEnabled&&this.tapS.dispatch(this)},f.prototype.setMode=function(a){var d=this.mode;switch(this.mode=a,a){case f.MODE_EXPLORE:this.setTextAlwaysVisible(!1),this.setIsInteractive(!0),this.setRadiusChange(!0),this._title.setStyle(this._titleStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(2236962);break;case f.MODE_TAG:this.setTextAlwaysVisible(!1),this.setIsInteractive(!1),this.setRadiusChange(!1),this.radius=this.initRadius,this._title.alpha=0,this._title.setStyle(this._tagStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.x=this.leftSided?-(this._title.width/b.RATIO)-10:10,this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(2236962);
break;case f.MODE_TAG_TITLE:this.setTextAlwaysVisible(!0),this.setIsInteractive(!1),this.setRadiusChange(!1),this.radius=this.initRadius,this.elm.addChild(this._tagTitle);var e=this.data.getRelated().length;e+=" issues related to",this._tagTitle.setText(e.toUpperCase()),this._title.setStyle(this._tagTitleStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.x=10,this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(16777215),this.elm.alpha=1;break;case f.MODE_TOPICS:this.stopMoving(),this.setTextAlwaysVisible(!1),this.setIsInteractive(!1),this.setRadiusChange(!1),this.radius=this.initRadius,this._title.setStyle(this._topicStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(2236962);break;case f.MODE_ISSUES:this.stopMoving(),this.stopPulsing(),this.setTextAlwaysVisible(!0),this.setIsInteractive(!1),this.setRadiusChange(!1),this.radius=this.initRadius,this._title.setStyle(this._issuesStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(2236962),this.elm.alpha=1;break;case f.MODE_TAG_ISSUES:this.stopMoving(),this.stopPulsing(),this.setTextAlwaysVisible(!0),this.setIsInteractive(!1),this.setRadiusChange(!1),this.radius=this.initRadius,this._title.setStyle(this._tagIssuesStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(16777215),this.elm.alpha=1;break;case f.MODE_DETAIL:this.stopMoving(),this.stopPulsing(),this.setIsInteractive(!1),this.setTextAlwaysVisible(!0),this.setRadiusChange(!1),this.radius=this.initRadius,this._title.setStyle(this._detailStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2),this._drawCircle(16777215)}d===f.MODE_ISSUES&&(this.elm.hitArea=null,this.elm.alpha=1),d===f.MODE_TAG_TITLE&&this.elm.removeChild(this._tagTitle)},f.prototype.setTextAlwaysVisible=function(a){if(this._textAlwaysVisible=a,a)this.elm.addChild(this._title),e.TweenMax.to(this._title,.2,{alpha:1,overwrite:!0});else if(!this.isOver){var b=function(){this._title.parent&&this.elm.removeChild(this._title)}.bind(this);e.TweenMax.to(this._title,.2,{alpha:0,overwrite:!0,onComplete:b})}},f.prototype.setIsInteractive=function(a){this.isInteractive=a},f.prototype.setLeftSidedText=function(){this.leftSided=!0,this._title.x=-(this._title.width*b.RATIO)-10},f.prototype.setRadiusChange=function(a){this.radiusChange=a},f.prototype.setRadius=function(){if(this.radiusChange){var a=Math.max(this._canvasSize.x,this._canvasSize.y),b=Math.sqrt(Math.pow(this.elm.x,2)+Math.pow(this.elm.y,2)),c=2+6*(b-a/2)/(0-a/2);this.radius=Math.max(c,2),this._drawCircle(this._color)}},f.prototype.mouseOver=function(d){a.prototype.mouseOver.call(this),d&&(this.mouseOverPosition=d.clone(),this.mouseOverPosition.x-=this.elm.x,this.mouseOverPosition.y-=this.elm.y),this.stopMoving(),this.lightUp();var g=Math.round(this._title.height/b.RATIO);this.mode===f.MODE_EXPLORE&&this._subtitle&&(g+=Math.round(this._subtitle.height/b.RATIO)+2,this._title.setStyle(this._titleOverStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO)),this._title.y=Math.round(-g/2),this.mode===f.MODE_EXPLORE&&this._subtitle&&(this.elm.addChild(this._subtitle),this._subtitle.y=Math.round(this._title.y+this._title.height/b.RATIO+2),e.TweenMax.to(this._subtitle,.2,{alpha:.5,overwrite:!0})),this.elm.parent.setChildIndex(this.elm,0)},f.prototype.mouseOut=function(){if(a.prototype.mouseOut.call(this),this.mouseOverPosition=null,this.isInteractive){var d=null;this.mode===f.MODE_EXPLORE&&(d=this._resumeStaticAnimation.bind(this)),e.TweenMax.to(this.elm,1,{x:this._x0,y:this._y0,ease:e.Elastic.easeOut.config(2,.7),overwrite:!0,onComplete:d,roundProps:"x,y"})}if(this.mode===f.MODE_EXPLORE){this._title.setStyle(this._titleStyle),this._title.hitArea=new c.Rectangle(0,0,this._title.width/b.RATIO,this._title.height/b.RATIO),this._title.y=Math.round(-(this._title.height/b.RATIO)/2);var g=function(){this._subtitle.parent&&this.elm.removeChild(this._subtitle)}.bind(this);e.TweenMax.to(this._subtitle,.2,{alpha:0,overwrite:!0,onComplete:g})}this.lightDown(),this.mode===f.MODE_TAG_ISSUES&&this._drawCircle(16777215)},f.prototype.openIssue=function(){this.elm.removeChild(this._subtitle),e.TweenMax.to(this._openCircle.scale,.3,{x:1,y:1,overwrite:!0})},f.prototype.closeIssue=function(){this._openCircle.scale={x:0,y:0},this.setMode(f.MODE_DETAIL)},f.prototype.update=function(a){if(this.mousePosition=a,this.isOver&&this.isInteractive){this.mouseOverPosition||(this.mouseOverPosition=new c.Point),this.elm.x=Math.round(this.mousePosition.x-this.mouseOverPosition.x),this.elm.y=Math.round(this.mousePosition.y-this.mouseOverPosition.y);var d=15;b.IS_TOUCH&&(d=0);var e=d+this.elm.width/2,f=d+this.elm.height/2;(Math.abs(this.elm.x-this._x0)>e||Math.abs(this.elm.y-this._y0)>f)&&this._onMouseOut()}},f}),function(a,b,d){"function"==typeof c&&c.amd?c("jquery-mobile",["jquery"],function(c){return d(c,a,b),c.mobile}):d(a.jQuery,a,b)}(this,document,function(a,b,c){!function(a){a.event.special.throttledresize={setup:function(){a(this).bind("resize",f)},teardown:function(){a(this).unbind("resize",f)}};var b,c,d,e=250,f=function(){c=(new Date).getTime(),d=c-g,d>=e?(g=c,a(this).trigger("throttledresize")):(b&&clearTimeout(b),b=setTimeout(f,e-d))},g=0}(a),function(a,b,c,d){function e(a){for(;a&&"undefined"!=typeof a.originalEvent;)a=a.originalEvent;return a}function f(b,c){var f,g,h,i,j,k,l,m,n,o=b.type;if(b=a.Event(b),b.type=c,f=b.originalEvent,g=a.event.props,o.search(/^(mouse|click)/)>-1&&(g=E),f)for(l=g.length,i;l;)i=g[--l],b[i]=f[i];if(o.search(/mouse(down|up)|click/)>-1&&!b.which&&(b.which=1),-1!==o.search(/^touch/)&&(h=e(f),o=h.touches,j=h.changedTouches,k=o&&o.length?o[0]:j&&j.length?j[0]:d,k))for(m=0,n=C.length;n>m;m++)i=C[m],b[i]=k[i];return b}function g(b){for(var c,d,e={};b;){c=a.data(b,z);for(d in c)c[d]&&(e[d]=e.hasVirtualBinding=!0);b=b.parentNode}return e}function h(b,c){for(var d;b;){if(d=a.data(b,z),d&&(!c||d[c]))return b;b=b.parentNode}return null}function i(){M=!1}function j(){M=!0}function k(){Q=0,K.length=0,L=!1,j()}function l(){i()}function m(){n(),G=setTimeout(function(){G=0,k()},a.vmouse.resetTimerDuration)}function n(){G&&(clearTimeout(G),G=0)}function o(b,c,d){var e;return(d&&d[b]||!d&&h(c.target,b))&&(e=f(c,b),a(c.target).trigger(e)),e}function p(b){var c,d=a.data(b.target,A);!L&&(!Q||Q!==d)&&(c=o("v"+b.type,b),c&&(c.isDefaultPrevented()&&b.preventDefault(),c.isPropagationStopped()&&b.stopPropagation(),c.isImmediatePropagationStopped()&&b.stopImmediatePropagation()))}function q(b){var c,d,f,h=e(b).touches;h&&1===h.length&&(c=b.target,d=g(c),d.hasVirtualBinding&&(Q=P++,a.data(c,A,Q),n(),l(),J=!1,f=e(b).touches[0],H=f.pageX,I=f.pageY,o("vmouseover",b,d),o("vmousedown",b,d)))}function r(a){M||(J||o("vmousecancel",a,g(a.target)),J=!0,m())}function s(b){if(!M){var c=e(b).touches[0],d=J,f=a.vmouse.moveDistanceThreshold,h=g(b.target);J=J||Math.abs(c.pageX-H)>f||Math.abs(c.pageY-I)>f,J&&!d&&o("vmousecancel",b,h),o("vmousemove",b,h),m()}}function t(a){if(!M){j();var b,c,d=g(a.target);o("vmouseup",a,d),J||(b=o("vclick",a,d),b&&b.isDefaultPrevented()&&(c=e(a).changedTouches[0],K.push({touchID:Q,x:c.clientX,y:c.clientY}),L=!0)),o("vmouseout",a,d),J=!1,m()}}function u(b){var c,d=a.data(b,z);if(d)for(c in d)if(d[c])return!0;return!1}function v(){}function w(b){var c=b.substr(1);return{setup:function(){u(this)||a.data(this,z,{});var d=a.data(this,z);d[b]=!0,F[b]=(F[b]||0)+1,1===F[b]&&O.bind(c,p),a(this).bind(c,v),N&&(F.touchstart=(F.touchstart||0)+1,1===F.touchstart&&O.bind("touchstart",q).bind("touchend",t).bind("touchmove",s).bind("scroll",r))},teardown:function(){--F[b],F[b]||O.unbind(c,p),N&&(--F.touchstart,F.touchstart||O.unbind("touchstart",q).unbind("touchmove",s).unbind("touchend",t).unbind("scroll",r));var d=a(this),e=a.data(this,z);e&&(e[b]=!1),d.unbind(c,v),u(this)||d.removeData(z)}}}var x,y,z="virtualMouseBindings",A="virtualTouchID",B="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),C="clientX clientY pageX pageY screenX screenY".split(" "),D=a.event.mouseHooks?a.event.mouseHooks.props:[],E=a.event.props.concat(D),F={},G=0,H=0,I=0,J=!1,K=[],L=!1,M=!1,N="addEventListener"in c,O=a(c),P=1,Q=0;for(a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},y=0;y<B.length;y++)a.event.special[B[y]]=w(B[y]);N&&c.addEventListener("click",function(b){var c,d,e,f,g,h,i=K.length,j=b.target;if(i)for(c=b.clientX,d=b.clientY,x=a.vmouse.clickDistanceThreshold,e=j;e;){for(f=0;i>f;f++)if(g=K[f],h=0,e===j&&Math.abs(g.x-c)<x&&Math.abs(g.y-d)<x||a.data(e,A)===g.touchID)return b.preventDefault(),void b.stopPropagation();e=e.parentNode}},!0)}(a,b,c),function(a){a.mobile={}}(a),function(a){var b={touch:"ontouchend"in c};a.mobile.support=a.mobile.support||{},a.extend(a.support,b),a.extend(a.mobile.support,b)}(a),function(a,b,d){function e(b,c,e,f){var g=e.type;e.type=c,f?a.event.trigger(e,d,b):a.event.dispatch.call(b,e),e.type=g}var f=a(c),g=a.mobile.support.touch,h="touchmove scroll",i=g?"touchstart":"mousedown",j=g?"touchend":"mouseup",k=g?"touchmove":"mousemove";a.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(b,c){a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)}),a.event.special.scrollstart={enabled:!0,setup:function(){function b(a,b){c=b,e(f,c?"scrollstart":"scrollstop",a)}var c,d,f=this,g=a(f);g.bind(h,function(e){a.event.special.scrollstart.enabled&&(c||b(e,!0),clearTimeout(d),d=setTimeout(function(){b(e,!1)},50))})},teardown:function(){a(this).unbind(h)}},a.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var b=this,c=a(b),d=!1;c.bind("vmousedown",function(g){function h(){clearTimeout(k)}function i(){h(),c.unbind("vclick",j).unbind("vmouseup",h),f.unbind("vmousecancel",i)}function j(a){i(),d||l!==a.target?d&&a.preventDefault():e(b,"tap",a)}if(d=!1,g.which&&1!==g.which)return!1;var k,l=g.target;c.bind("vmouseup",h).bind("vclick",j),f.bind("vmousecancel",i),k=setTimeout(function(){a.event.special.tap.emitTapOnTaphold||(d=!0),e(b,"taphold",a.Event("taphold",{target:l}))},a.event.special.tap.tapholdThreshold)})},teardown:function(){a(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),f.unbind("vmousecancel")}},a.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(a){var c=b.pageXOffset,d=b.pageYOffset,e=a.clientX,f=a.clientY;return 0===a.pageY&&Math.floor(f)>Math.floor(a.pageY)||0===a.pageX&&Math.floor(e)>Math.floor(a.pageX)?(e-=c,f-=d):(f<a.pageY-d||e<a.pageX-c)&&(e=a.pageX-c,f=a.pageY-d),{x:e,y:f}},start:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y],origin:a(b.target)}},stop:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y]}},handleSwipe:function(b,c,d,f){if(c.time-b.time<a.event.special.swipe.durationThreshold&&Math.abs(b.coords[0]-c.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(b.coords[1]-c.coords[1])<a.event.special.swipe.verticalDistanceThreshold){var g=b.coords[0]>c.coords[0]?"swipeleft":"swiperight";return e(d,"swipe",a.Event("swipe",{target:f,swipestart:b,swipestop:c}),!0),e(d,g,a.Event(g,{target:f,swipestart:b,swipestop:c}),!0),!0}return!1},eventInProgress:!1,setup:function(){var b,c=this,d=a(c),e={};b=a.data(this,"mobile-events"),b||(b={length:0},a.data(this,"mobile-events",b)),b.length++,b.swipe=e,e.start=function(b){if(!a.event.special.swipe.eventInProgress){a.event.special.swipe.eventInProgress=!0;var d,g=a.event.special.swipe.start(b),h=b.target,i=!1;e.move=function(b){g&&!b.isDefaultPrevented()&&(d=a.event.special.swipe.stop(b),i||(i=a.event.special.swipe.handleSwipe(g,d,c,h),i&&(a.event.special.swipe.eventInProgress=!1)),Math.abs(g.coords[0]-d.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault())},e.stop=function(){i=!0,a.event.special.swipe.eventInProgress=!1,f.off(k,e.move),e.move=null},f.on(k,e.move).one(j,e.stop)}},d.on(i,e.start)},teardown:function(){var b,c;b=a.data(this,"mobile-events"),b&&(c=b.swipe,delete b.swipe,b.length--,0===b.length&&a.removeData(this,"mobile-events")),c&&(c.start&&a(this).off(i,c.start),c.move&&f.off(k,c.move),c.stop&&f.off(j,c.stop))}},a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(b,c){a.event.special[b]={setup:function(){a(this).bind(c,a.noop)},teardown:function(){a(this).unbind(c)}}})}(a,this),function(a){a.extend(a.mobile,{version:"1.4.5",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:a(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"})}(a,this),function(a,b,c){var d={},e=a.find,f=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,g=/:jqmData\(([^)]*)\)/g;a.extend(a.mobile,{ns:"",getAttribute:function(b,c){var d;b=b.jquery?b[0]:b,b&&b.getAttribute&&(d=b.getAttribute("data-"+a.mobile.ns+c));try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:f.test(d)?JSON.parse(d):d}catch(e){}return d},nsNormalizeDict:d,nsNormalize:function(b){return d[b]||(d[b]=a.camelCase(a.mobile.ns+b))},closestPageData:function(a){return a.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}}),a.fn.jqmData=function(b,d){var e;return"undefined"!=typeof b&&(b&&(b=a.mobile.nsNormalize(b)),e=arguments.length<2||d===c?this.data(b):this.data(b,d)),e},a.jqmData=function(b,c,d){var e;return"undefined"!=typeof c&&(e=a.data(b,c?a.mobile.nsNormalize(c):c,d)),e},a.fn.jqmRemoveData=function(b){return this.removeData(a.mobile.nsNormalize(b))},a.jqmRemoveData=function(b,c){return a.removeData(b,a.mobile.nsNormalize(c))},a.find=function(b,c,d,f){return b.indexOf(":jqmData")>-1&&(b=b.replace(g,"[data-"+(a.mobile.ns||"")+"$1]")),e.call(this,b,c,d,f)},a.extend(a.find,e)}(a,this),function(a,b){function d(b,c){var d,f,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,f=d.name,b.href&&f&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&e(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&e(b)}function e(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var f=0,g=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(this[0].ownerDocument||c):b},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){g.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in c.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(d){if(d!==b)return this.css("zIndex",d);if(this.length)for(var e,f,g=a(this[0]);g.length&&g[0]!==c;){if(e=g.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(g.css("zIndex"),10),!isNaN(f)&&0!==f))return f;g=g.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}}}(a),function(a,b){var d=function(b,c){var d=b.parent(),e=[],f=function(){var b=a(this),c=a.mobile.toolbar&&b.data("mobile-toolbar")?b.toolbar("option"):{position:b.attr("data-"+a.mobile.ns+"position"),updatePagePadding:b.attr("data-"+a.mobile.ns+"update-page-padding")!==!1};return"fixed"!==c.position||c.updatePagePadding!==!0},g=d.children(":jqmData(role='header')").filter(f),h=b.children(":jqmData(role='header')"),i=d.children(":jqmData(role='footer')").filter(f),j=b.children(":jqmData(role='footer')");return 0===h.length&&g.length>0&&(e=e.concat(g.toArray())),0===j.length&&i.length>0&&(e=e.concat(i.toArray())),a.each(e,function(b,d){c-=a(d).outerHeight()}),Math.max(0,c)};a.extend(a.mobile,{window:a(b),document:a(c),keyCode:a.ui.keyCode,behaviors:{},silentScroll:function(c){"number"!==a.type(c)&&(c=a.mobile.defaultHomeScroll),a.event.special.scrollstart.enabled=!1,setTimeout(function(){b.scrollTo(0,c),a.mobile.document.trigger("silentscroll",{x:0,y:c})},20),setTimeout(function(){a.event.special.scrollstart.enabled=!0},150)},getClosestBaseUrl:function(b){var c=a(b).closest(".ui-page").jqmData("url"),d=a.mobile.path.documentBase.hrefNoHash;return a.mobile.dynamicBaseEnabled&&c&&a.mobile.path.isPath(c)||(c=d),a.mobile.path.makeUrlAbsolute(c,d)},removeActiveLinkClass:function(b){!!a.mobile.activeClickedLink&&(!a.mobile.activeClickedLink.closest("."+a.mobile.activePageClass).length||b)&&a.mobile.activeClickedLink.removeClass(a.mobile.activeBtnClass),a.mobile.activeClickedLink=null},getInheritedTheme:function(a,b){for(var c,d,e=a[0],f="",g=/ui-(bar|body|overlay)-([a-z])\b/;e&&(c=e.className||"",!(c&&(d=g.exec(c))&&(f=d[2])));)e=e.parentNode;return f||b||"a"},enhanceable:function(a){return this.haveParents(a,"enhance")},hijackable:function(a){return this.haveParents(a,"ajax")},haveParents:function(b,c){if(!a.mobile.ignoreContentEnabled)return b;var d,e,f,g,h,i=b.length,j=a();for(g=0;i>g;g++){for(e=b.eq(g),f=!1,d=b[g];d;){if(h=d.getAttribute?d.getAttribute("data-"+a.mobile.ns+c):"","false"===h){f=!0;break}d=d.parentNode}f||(j=j.add(e))}return j},getScreenHeight:function(){return b.innerHeight||a.mobile.window.height()},resetActivePageHeight:function(b){var c=a("."+a.mobile.activePageClass),e=c.height(),f=c.outerHeight(!0);b=d(c,"number"==typeof b?b:a.mobile.getScreenHeight()),c.css("min-height",""),c.height()<b&&c.css("min-height",b-(f-e))},loading:function(){var b=this.loading._widget||a(a.mobile.loader.prototype.defaultHtml).loader(),c=b.loader.apply(b,arguments);return this.loading._widget=b,c}}),a.addDependents=function(b,c){var d=a(b),e=d.jqmData("dependents")||a();d.jqmData("dependents",a(e).add(c))},a.fn.extend({removeWithDependents:function(){a.removeWithDependents(this)},enhanceWithin:function(){var b,c={},d=a.mobile.page.prototype.keepNativeSelector(),e=this;a.mobile.nojs&&a.mobile.nojs(this),a.mobile.links&&a.mobile.links(this),a.mobile.degradeInputsWithin&&a.mobile.degradeInputsWithin(this),a.fn.buttonMarkup&&this.find(a.fn.buttonMarkup.initSelector).not(d).jqmEnhanceable().buttonMarkup(),a.fn.fieldcontain&&this.find(":jqmData(role='fieldcontain')").not(d).jqmEnhanceable().fieldcontain(),a.each(a.mobile.widgets,function(b,f){if(f.initSelector){var g=a.mobile.enhanceable(e.find(f.initSelector));g.length>0&&(g=g.not(d)),g.length>0&&(c[f.prototype.widgetName]=g)}});for(b in c)c[b][b]();return this},addDependents:function(b){a.addDependents(this,b)},getEncodedText:function(){return a("<a>").text(this.text()).html()},jqmEnhanceable:function(){return a.mobile.enhanceable(this)},jqmHijackable:function(){return a.mobile.hijackable(this)}}),a.removeWithDependents=function(b){var c=a(b);(c.jqmData("dependents")||a()).remove(),c.remove()},a.addDependents=function(b,c){var d=a(b),e=d.jqmData("dependents")||a();d.jqmData("dependents",a(e).add(c))},a.find.matches=function(b,c){return a.find(b,null,null,c)},a.find.matchesSelector=function(b,c){return a.find(c,null,null,[b]).length>0}}(a,this),function(a){b.matchMedia=b.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(c),a.mobile.media=function(a){return b.matchMedia(a).matches}}(a)}),c("experience/experience-canvas",["jquery","pixi","signals","gs","modernizr","experience/issue","experience/circle","experience/responsive","jquery-mobile"],function(a,b,c,d,e,f,g,h){var i=function(){return this.issues=[],this.tags=[],this.fakes=[],this.canvasSize=new b.Point,this.renderStartS=new c.Signal,this.renderEndS=new c.Signal,this.touchStartS=new c.Signal,this.swipeLeftS=new c.Signal,this.swipeRightS=new c.Signal,this.pressIssueS=new c.Signal,this};return i.prototype.init=function(c){h.RATIO=window.devicePixelRatio,h.SIZE=new b.Point(c.width(),c.height()),h.IS_TOUCH=e.touch,this.canvasSize=h.SIZE,this._renderer=new b.autoDetectRenderer(this.canvasSize.x,this.canvasSize.y,{transparent:!0,antialias:!0,resolution:h.RATIO}),this._stage=new b.Stage,this._stage.interactive=!0,c.append(this._renderer.view),1!==h.RATIO&&(this._renderer.view.style.width="100%"),this._linesContainer=new b.Graphics,this._linesContainer.x=Math.round(h.SIZE.x/2),this._linesContainer.y=Math.round(h.SIZE.y/2),this._stage.addChild(this._linesContainer),this._particlesContainer=new b.DisplayObjectContainer,this._particlesContainer.interactive=!0,this._particlesContainer.x=this._linesContainer.x,this._particlesContainer.y=this._linesContainer.y,this._stage.addChild(this._particlesContainer),setInterval(this._render.bind(this),50),this._drawFakes(),this._stage.tap=this._stage.touchstart=this._onTouchStart.bind(this),a(document).on("swipeleft",c,this._onSwipeLeft.bind(this)),a(document).on("swiperight",c,this._onSwipeRight.bind(this))},i.prototype.hide=function(){this._isHidden||(this._stage.removeChild(this._linesContainer),this._stage.removeChild(this._particlesContainer)),this._isHidden=!0},i.prototype.show=function(){this._isHidden&&(this._stage.addChild(this._linesContainer),this._stage.addChild(this._particlesContainer)),this._isHidden=!1},i.prototype._drawFakes=function(){for(var a,b=0;200>b;b++)a=new g,this.fakes.push(a),this._particlesContainer.addChild(a.elm),a.draw(1),a._circle.alpha=.3,a.elm.alpha=0},i.prototype.drawTags=function(a){this._tagData=a;var b,c,d;for(c=0;c<this._tagData.length;c++)for(d=0;3>d;d++)b=new f(c,this.canvasSize),b.setIsInteractive(!1),b.initRadius=2,this.tags.push(b),this._particlesContainer.addChild(b.elm),b.setData(this._tagData[c]),b.draw(b.initRadius),b.pressS.add(this._onPressIssue.bind(this)),b.elm.alpha=0},i.prototype.drawIssues=function(a){this._issueData=a;for(var b,c=0;c<this._issueData.length;c++)b=new f(c,this.canvasSize),b.initRadius=5,this.issues.push(b),this._particlesContainer.addChild(b.elm),b.setData(this._issueData[c]),b.draw(b.initRadius),b.pressS.add(this._onPressIssue.bind(this))},i.prototype._onPressIssue=function(a){this.pressIssueS.dispatch(a)},i.prototype.addChild=function(a,b){b?this._stage.addChildAt(a,b):this._stage.addChild(a)},i.prototype.removeChild=function(a){this._stage.removeChild(a)},i.prototype._updateParticles=function(){var a;for(a=0;a<this.issues.length;a++)this.issues[a].update(this.mousePosition),this.issues[a].setRadius();for(a=0;a<this.tags.length;a++)this.tags[a].update(this.mousePosition)},i.prototype.clearLines=function(){this._linesContainer.clear()},i.prototype.hideLines=function(){d.TweenMax.to(this._linesContainer,.3,{alpha:0,overwrite:!0})},i.prototype.showLines=function(){d.TweenMax.to(this._linesContainer,.3,{alpha:1,overwrite:!0})},i.prototype.drawLine=function(a,b,c,d){this._linesContainer.lineStyle(1,c,d),this._linesContainer.moveTo(a.elm.x,a.elm.y),this._linesContainer.lineTo(b.elm.x,b.elm.y)},i.prototype.getElementByData=function(a){if(a.elm)return a.elm;var b;for(b=0;b<this.issues.length;b++)if(this.issues[b].data._id===a._id)return a.elm=this.issues[b],this.issues[b];for(b=0;b<this.tags.length;b++)if(this.tags[b].data._id===a._id)return a.elm=this.tags[b],this.tags[b]},i.prototype._onTouchStart=function(a){this._touchPosition=a.global,this._updateMousePosition(),this.touchStartS.dispatch()},i.prototype._onSwipeLeft=function(){this.swipeLeftS.dispatch()},i.prototype._onSwipeRight=function(){this.swipeRightS.dispatch()},i.prototype._updateMousePosition=function(){var a=this._stage.getMousePosition().clone();this._touchPosition&&(a=this._touchPosition.clone()),a.x-=this._particlesContainer.x,a.y-=this._particlesContainer.y,this.autoModePosition&&(a=this.autoModePosition.clone()),this.mousePosition=a},i.prototype._render=function(){this.renderStartS.dispatch(),this._updateMousePosition(),this._updateParticles(),this._renderer.render(this._stage),this.renderEndS.dispatch()},i}),c("experience/mode",["signals"],function(a){var b=function(){};return b.MODES||(b.MODES=[],b.OPEN_MODE=null,b.LAST_MODE=null,b.DEFAULT_MODE=null),b.prototype.init=function(){this.showS=new a.Signal,this.hideS=new a.Signal},b.prototype.show=function(){b.OPEN_MODE?b.OPEN_MODE!==this&&(b.LAST_MODE=b.OPEN_MODE,b.OPEN_MODE.hide(this._onStartShow.bind(this))):this._onStartShow()},b.prototype._onStartShow=function(){this._onShow()},b.prototype._onShow=function(){b.OPEN_MODE=this,this.isOpen=!0,this.showS.dispatch()},b.prototype.hide=function(a){this._hideCallback=a,this._onStartHide()},b.prototype._onStartHide=function(){this._onHide()},b.prototype._onHide=function(){b.OPEN_MODE=null,this.isOpen=!1,this._hideCallback&&(this._hideCallback(),this._hideCallback=null),this.hideS.dispatch()},b}),c("experience/explore-mode",["pixi","experience/mode","experience/issue"],function(a,b,c){var d=function(a){return this._canvas=a,b.MODES.push(this),b.DEFAULT_MODE=this,d.AUTO_MODE_TIME=5e3,d.AUTO_MODE_TIMEOUT=4e3,this._safeZone={x:0,y:0,width:0,height:0},this};return d.prototype=new b,d.prototype.constructor=d,d.prototype.init=function(){b.prototype.init.call(this);var a=Math.min(this._canvas.canvasSize.x,this._canvas.canvasSize.y);this._exploreRadius=a/1.7;var c,d,e,f,g,h,i,j,k,l,m=[],n=80,o=8,p=0,q=2048;for(f=0;f<this._canvas.issues.length;f++){e=this._canvas.issues[f],j=0,l=!0;do{if(c=f/this._canvas.issues.length*Math.PI*2,d=Math.pow(Math.random(),.5)*(this._exploreRadius-20),e.exploreX=Math.sin(c)*d,e.exploreY=Math.cos(c)*d,k=Math.floor(e.exploreY/o),e.exploreY=k*o+p,m[k])for(g=0;g<m[k].length;g++)l=l&&Math.abs(m[k][g].exploreX-e.exploreX)>n;else m[k]=[];h=e.exploreX>-this._canvas.canvasSize.x/2&&e.exploreX<this._canvas.canvasSize.x/2&&e.exploreY>-this._canvas.canvasSize.y/2&&e.exploreY<this._canvas.canvasSize.y/2,i=e.exploreX>this._safeZone.x&&e.exploreX<this._safeZone.x+this._safeZone.width&&e.exploreY>this._safeZone.y&&e.exploreY<this._safeZone.y+this._safeZone.height,j===Math.round(q/2)&&(p=o/2)}while((!h||i||!l)&&j++<q);m[k].push(e),e.moveTo(0,0)}for(f=0;f<this._canvas.tags.length;f++){e=this._canvas.tags[f];do c=Math.random()*Math.PI*2,d=this._exploreRadius+5*Math.random(),e.exploreX=Math.sin(c)*d,e.exploreY=Math.cos(c)*d,h=e.exploreX>-this._canvas.canvasSize.x/2&&e.exploreX<this._canvas.canvasSize.x/2&&e.exploreY>-this._canvas.canvasSize.y/2&&e.exploreY<this._canvas.canvasSize.y/2;while(!h);e.exploreX<0&&e.setLeftSidedText()}for(f=0;f<this._canvas.fakes.length;f++)c=Math.random()*Math.PI*2,d=Math.pow(Math.random(),1/3)*(this._exploreRadius-20),e=this._canvas.fakes[f],e.elm.alpha=.1+.3*d/this._exploreRadius,e.exploreX=Math.sin(c)*d,e.exploreY=Math.cos(c)*d},d.prototype.setSafeZone=function(a){this._safeZone=a},d.prototype._startAutoMode=function(){this._autoMode=!0,this._autoModeIssue=this._canvas.issues[Math.floor(Math.random()*this._canvas.issues.length)],this._canvas.mousePosition=this._canvas.autoModePosition=new a.Point(this._autoModeIssue.elm.x,this._autoModeIssue.elm.y),this._mouseOverIssue(this._autoModeIssue),clearTimeout(this._autoModeTimeout),this._autoModeTimeout=setTimeout(this._endAutoMode.bind(this),d.AUTO_MODE_TIMEOUT,!0)},d.prototype._endAutoMode=function(a){this._autoModeIssue&&this._mouseOutIssue(this._autoModeIssue),this._autoMode=!1,this._canvas.autoModePosition=null,this._autoModeTimeout&&clearTimeout(this._autoModeTimeout),a&&(this._autoModeTimeout=setTimeout(this._startAutoMode.bind(this),d.AUTO_MODE_TIME))},d.prototype._drawLines=function(){var a,b,c,d,e,f,g;for(this._canvas.clearLines(),a=0;a<this._canvas.issues.length;a++){for(c=this._canvas.issues[a],d=c.data.getRelated(),f=c.data.getTags(),b=0;b<d.length;b++)e=this._canvas.getElementByData(d[b]),g=c.isOver||e.isOver,this._canvas.drawLine(c,e,0,g?.05:.02);for(b=0;b<f.length;b++)e=this._canvas.getElementByData(f[b]),g=c.isOver||e.isOver,this._canvas.drawLine(c,e,0,g?.05:.02)}},d.prototype._mouseOverIssue=function(a){this.selectedIssue=a;var b,c,d,e=a.data.getRelated();for(a.data.getTags&&(b=a.data.getTags()),this._autoModeIssue&&a!==this._autoModeIssue&&this._endAutoMode(),a.mouseOver(this._canvas.mousePosition),d=0;d<e.length;d++)c=this._canvas.getElementByData(e[d]),c.lightUp(),c.stopMoving();
if(b)for(d=0;d<b.length;d++)c=this._canvas.getElementByData(b[d]),c.lightUp(),c.stopMoving()},d.prototype._mouseOutIssue=function(a){this._tapped||(this.selectedIssue=null),this._tapped=null;var b,c,d,e=a.data.getRelated();for(a.data.getTags&&(b=a.data.getTags()),this._autoModeIssue&&a!==this._autoModeIssue&&this._endAutoMode(!0),a.mouseOut(),d=0;d<e.length;d++)e[d]!==a.data&&(c=this._canvas.getElementByData(e[d]),c.lightDown(),c._resumeStaticAnimation());if(b)for(d=0;d<b.length;d++)c=this._canvas.getElementByData(b[d]),c.lightDown(),c._resumeStaticAnimation()},d.prototype._tapIssue=function(a){this._tapped=!0,this.selectedIssue?this.selectedIssue===a?a._onPress():(this.selectedIssue._onMouseOut(),a._onMouseOver()):a._onMouseOver()},d.prototype._onStartShow=function(){var a,b;for(b=0;b<this._canvas.issues.length;b++)a=this._canvas.issues[b],a.setMode(c.MODE_EXPLORE),a.moveTo(a.exploreX,a.exploreY,a._resumeStaticAnimation.bind(a),{alpha:1}),a.exploreMouseOver=this._mouseOverIssue.bind(this),a.exploreMouseOut=this._mouseOutIssue.bind(this),a.exploreTap=this._tapIssue.bind(this),a.mouseOverS.add(a.exploreMouseOver),a.mouseOutS.add(a.exploreMouseOut),a.tapS.add(a.exploreTap);for(b=0;b<this._canvas.tags.length;b++)a=this._canvas.tags[b],a.setMode(c.MODE_TAG),a._x0=a.exploreX,a._y0=a.exploreY,a.implode(),a.exploreMouseOver=this._mouseOverIssue.bind(this),a.exploreMouseOut=this._mouseOutIssue.bind(this),a.exploreTap=this._tapIssue.bind(this),a.mouseOverS.add(a.exploreMouseOver),a.mouseOutS.add(a.exploreMouseOut),a.tapS.add(a.exploreTap);for(b=0;b<this._canvas.fakes.length;b++)a=this._canvas.fakes[b],a._x0=a.exploreX,a._y0=a.exploreY,a.implode();this._drawLinesBind=this._drawLines.bind(this),this._canvas.renderStartS.add(this._drawLinesBind),this._endAutoMode(!0),setTimeout(this._onShow.bind(this),500)},d.prototype._onStartHide=function(){var a,b;for(b=0;b<this._canvas.issues.length;b++)a=this._canvas.issues[b],a.explode(this._exploreRadius),a.mouseOverS.remove(a.exploreMouseOver),a.mouseOutS.remove(a.exploreMouseOut),a.tapS.remove(a.exploreTap);for(b=0;b<this._canvas.tags.length;b++)a=this._canvas.tags[b],a.explode(this._exploreRadius),a.mouseOverS.remove(a.exploreMouseOver),a.mouseOutS.remove(a.exploreMouseOut),a.tapS.remove(a.exploreTap);for(b=0;b<this._canvas.fakes.length;b++)this._canvas.fakes[b].explode(this._exploreRadius);this._canvas.clearLines(),this._canvas.renderStartS.remove(this._drawLinesBind),this._endAutoMode(),setTimeout(this._onHide.bind(this),100)},d}),c("experience/topic",["pixi","gs","signals","experience/issue","experience/responsive"],function(a,b,c,d,e){var f=function(b,d,e,g){this._radius=70,this._linearDist=35,this._linearWidth=80,this.isOver=!1,this._data=b,this._index=d,this._issues=e,this._fakes=g,this.elm=new a.DisplayObjectContainer,this.mouseOverS=new c.Signal,this.mouseOutS=new c.Signal,f.TOPICS.push(this)};return f.TOPICS=[],f.SELECTED_TOPIC=null,f.prototype.setup=function(){var b=20;this._linearArea=new a.Graphics,this._linearArea.i=this._index,this._linearArea.x=-100-b/2,this._linearArea.y=60,this._linearArea.interactive=!0,this._linearArea.buttonMode=!0,this._linearArea.hitArea=new a.Rectangle(-this._linearWidth/2,-(this._linearDist*this._issues.length/2)-b,this._linearWidth+100+b,this._linearDist*this._issues.length+b),this._linearArea.mouseout=this._mouseOut.bind(this),this._topicArea=new a.Graphics,this._topicArea.i=this._index,this._topicArea.hitArea=new a.Rectangle(-this._radius,-this._radius,2*this._radius,2*this._radius),this._topicArea.interactive=!0,this._topicArea.buttonMode=!0,this.elm.addChild(this._topicArea),this._topicArea.mouseover=this._topicArea.tap=this._mouseOver.bind(this),this._topicTitle=new a.Text(this._data.getName().toUpperCase(),{font:'300 22px "Fira Sans", sans-serif',fill:"#222222"}),this.elm.addChild(this._topicTitle),this._topicTitle.resolution=e.RATIO,this._topicTitle.x=Math.round(-(this._topicTitle.width/e.RATIO)/2),this._topicTitle.y=Math.round(-(this._topicTitle.height/e.RATIO)/2),this._topicDesc=new a.Text(this._data.getTagline(),{font:'300 14px "Fira Sans", sans-serif',fill:"#666666",wordWrap:!0,wordWrapWidth:200,align:"center"}),this.elm.addChild(this._topicDesc),this._topicDesc.resolution=e.RATIO,this._topicDesc.x=Math.round(-(this._topicDesc.width/e.RATIO)/2),this._topicDesc.y=Math.round(this._radius+50);var c,d,f=this._topicTitle.height/e.RATIO/2+5;for(d=0;d<this._issues.length;d++)c=this._issues[d],c.setTextAlwaysVisible(!1),c.setIsInteractive(!1),c.topicX=Math.random()*this._radius*2-this._radius,c.topicY=Math.random()*(this._radius-f)*2-(this._radius-f),c.topicY+=f*(c.topicY>0?1:-1);for(d=0;d<this._fakes.length;d++)c=this._fakes[d],c.topicX=Math.random()*this._radius*2-this._radius,c.topicY=Math.random()*this._radius*2-this._radius;return this},f.prototype.show=function(){var a,c;for(c=0;c<this._issues.length;c++)a=this._issues[c],e.IS_SMALL()&&(a.mouseEnabled=this.isCurrent),a.setMode(d.MODE_TOPICS),a.moveTo(this.elm.x+a.topicX,this.elm.y+a.topicY,a._resumeStaticAnimation.bind(a),{alpha:1}),a.topicMouseOver=this._mouseOverIssue.bind(this),a.topicMouseOut=this._mouseOutIssue.bind(this),a.topicTap=this._tapIssue.bind(this),a.topicPress=this._pressIssue.bind(this),a.mouseOverS.add(a.topicMouseOver),a.mouseOutS.add(a.topicMouseOut),a.pressS.add(a.topicPress,this,100),a.tapS.add(a.topicTap);for(c=0;c<this._fakes.length;c++)a=this._fakes[c],a.exploded=!1,b.TweenMax.to(a.elm,.3,{alpha:1,x:this.elm.x+a.topicX,y:this.elm.y+a.topicY,overwrite:!0,roundProps:"x,y"})},f.prototype.hide=function(){var a,b;for(b=0;b<this._issues.length;b++)a=this._issues[b],a.mouseEnabled=!0,a.mouseOverS.remove(a.topicMouseOver),a.mouseOutS.remove(a.topicMouseOut),a.pressS.remove(a.topicPress),a.tapS.remove(a.topicTap);for(b=0;b<this._fakes.length;b++)this._fakes[b].explode()},f.prototype.setCurrent=function(a){if(e.IS_SMALL()){this.isCurrent=a;for(var b=0;b<this._issues.length;b++)this._issues[b].mouseEnabled=this.isCurrent}},f.prototype._mouseOverIssue=function(a){this.isOver&&(this.selectedIssue=a,a.mouseOver(this.mousePosition))},f.prototype._mouseOutIssue=function(a){this.isOver&&(this.selectedIssue=null,a.mouseOut())},f.prototype._tapIssue=function(a){a._onMouseOver(),setTimeout(function(){this._mouseOut(!0),a._onMouseOut(),a._onPress()}.bind(this),200)},f.prototype._pressIssue=function(){this._mouseOut(!0)},f.prototype._mouseOver=function(){f.SELECTED_TOPIC=this;var a,c,d,g;for(a=0;a<this._issues.length;a++)c=this._issues[a],c.setTextAlwaysVisible(!0),c.stopMoving(),c.stopPulsing(),d=this.elm.x+this._linearArea.x,g=this.elm.y+this._linearArea.y,g+=this._linearDist*a-this._linearDist*this._issues.length/2,c.moveTo(Math.round(d),Math.round(g),null,{alpha:1});for(a=0;a<this._fakes.length;a++)c=this._fakes[a],c.implodeAlpha=c.elm.alpha,b.TweenMax.to(c.elm,.3,{alpha:0,overwrite:!0});g=-this._linearDist*this._issues.length/2,g-=this._topicTitle.height/e.RATIO+50-this._linearArea.y,b.TweenMax.to(this._topicTitle,.3,{y:g,alpha:0,overwrite:!0}),b.TweenMax.to(this._topicDesc,.3,{alpha:0,overwrite:!0}),setTimeout(function(){this.isOver=!0}.bind(this),300),this.elm.removeChild(this._topicArea),this.elm.addChild(this._linearArea),setTimeout(function(){this._isMouseOver()||this._mouseOut()}.bind(this),100),this.mouseOverS.dispatch(this)},f.prototype._mouseOut=function(a){if(a!==!0&&this._isMouseOver())return void this._mouseOver();var c,d;for(b.TweenMax.to(this._topicTitle,.3,{y:Math.round(-(this._topicTitle.height/e.RATIO)/2),tint:16777215,alpha:1,overwrite:!0}),b.TweenMax.to(this._topicDesc,.3,{alpha:1,overwrite:!0}),c=0;c<this._fakes.length;c++)d=this._fakes[c],b.TweenMax.to(d.elm,.3,{alpha:d.implodeAlpha,overwrite:!0});for(c=0;c<this._issues.length;c++)d=this._issues[c],d.mouseOut(),d.setTextAlwaysVisible(!1),d.moveTo(this.elm.x+d.topicX,this.elm.y+d.topicY,d._resumeStaticAnimation.bind(d),{alpha:1});this.isOver=!1,setTimeout(function(){this.elm.addChild(this._topicArea),this.elm.removeChild(this._linearArea),f.SELECTED_TOPIC=null}.bind(this),300),this.mouseOutS.dispatch(this)},f.prototype.toneDown=function(){b.TweenMax.to(this._topicTitle,.3,{alpha:.5}),b.TweenMax.to(this._topicDesc,.3,{alpha:.5});for(var a=0;a<this._issues.length;a++)b.TweenMax.to(this._issues[a].elm,.3,{alpha:.5})},f.prototype.endToneDown=function(){b.TweenMax.to(this._topicTitle,.3,{alpha:1}),b.TweenMax.to(this._topicDesc,.3,{alpha:1});for(var a=0;a<this._issues.length;a++)b.TweenMax.to(this._issues[a].elm,1,{alpha:1})},f.prototype.moveTo=function(a){var c,d;for(this._topicArea.mouseover=this._topicArea.touchstart=null,b.TweenMax.to(this.elm,.3,{x:a.x,y:a.y,overwrite:!0,roundProps:"x,y",ease:b.Elastic.easeOut.config(2,.7)}),c=0;c<this._issues.length;c++)d=this._issues[c],d.moveTo(a.x+d.topicX,a.y+d.topicY,d._resumeStaticAnimation.bind(d));for(c=0;c<this._fakes.length;c++)d=this._fakes[c],b.TweenMax.to(d.elm,.3,{alpha:d.implodeAlpha,x:a.x+d.topicX,y:a.y+d.topicY,overwrite:!0,roundProps:"x,y"});setTimeout(function(){this._topicArea.mouseover=this._topicArea.touchstart=this._mouseOver.bind(this)}.bind(this),5e3)},f.prototype._isMouseOver=function(){var a=this._linearArea,b=this.elm.x+a.x+a.hitArea.x,c=b+a.hitArea.width,d=this.elm.y+a.y+a.hitArea.y,e=d+a.hitArea.height;return!(this.mousePosition.x<b||this.mousePosition.x>c||this.mousePosition.y<d||this.mousePosition.y>e)},f.prototype.update=function(a){this.mousePosition=a},f}),c("experience/topics-mode",["pixi","experience/mode","experience/topic","experience/responsive"],function(a,b,c,d){var e=function(a){return this._canvas=a,b.MODES.push(this),e.FAKES_PER_TOPIC=20,this.mouseOverB=this._onMouseOver.bind(this),this.mouseOutB=this._onMouseOut.bind(this),this};return e.prototype=new b,e.prototype.constructor=e,e.prototype.setData=function(a){this._topicsData=a},e.prototype.init=function(){b.prototype.init.call(this),this._topics=[],this._currentTopic=0,this._topicsContainer=new a.DisplayObjectContainer,this._topicsContainer.x=Math.round(this._canvas.canvasSize.x/2),this._topicsContainer.y=Math.round(this._canvas.canvasSize.y/2),e.DISTANCE_BETWEEN_TOPICS=.6*this._canvas.canvasSize.x;var f,g,h,i;for(f=0;f<this._topicsData.length;f++){var j=[];for(g=0;g<this._topicsData[f]._issues.length;g++)h=this._canvas.getElementByData(this._topicsData[f]._issues[g]),j.push(h);var k=[];for(g=0;g<e.FAKES_PER_TOPIC;g++)h=this._getRandomFake(),k.push(h);i=this._topics[f]=new c(this._topicsData[f],f,j,k),this._topicsContainer.addChild(i.elm),i.setCurrent(f===this._currentTopic),d.IS_LARGE()?(i.elm.x=(this._canvas.canvasSize.x-400)/(this._topicsData.length-1)*f,i.elm.x-=(this._canvas.canvasSize.x-400)/2,i.elm.y=-40):d.IS_MEDIUM()?(i.elm.x=(this._canvas.canvasSize.x-500)*(f%2),i.elm.x-=(this._canvas.canvasSize.x-500)/2,i.elm.y=350*Math.floor(f/2)-350):(i.elm.x=e.DISTANCE_BETWEEN_TOPICS*f,i.elm.y=-40),i.elm.x=Math.round(i.elm.x),i.elm.y=Math.round(i.elm.y),i.setup()}},e.prototype._getRandomFake=function(){return this._canvas.fakes[Math.floor(Math.random()*this._canvas.fakes.length)]},e.prototype._drawLines=function(){var a,b,c,d,e,f;for(this._canvas.clearLines(),a=0;a<this._topics.length;a++)if(f=this._topics[a],f===this.selectedTopic)for(b=0;b<f._issues.length-1;b++)d=f._issues[b],e=f._issues[b+1],this._canvas.drawLine(d,e,0,.1);else for(b=0;b<f._issues.length;b++)for(d=f._issues[b],c=0;c<f._issues.length;c++)b!==c&&(e=f._issues[c],this._canvas.drawLine(d,e,0,.02))},e.prototype._updateTopics=function(){for(var a=0;a<this._topics.length;a++)this._topics[a].update(this._canvas.mousePosition)},e.prototype._onMouseOver=function(a){this.selectedTopic=a;var b,d;for(b=0;b<c.TOPICS.length;b++)d=c.TOPICS[b],d._index!==a._index&&d.toneDown()},e.prototype._onMouseOut=function(a){var b,d;for(b=0;b<c.TOPICS.length;b++)d=c.TOPICS[b],d._index!==a._index&&d.endToneDown();this.selectedTopic=null},e.prototype._onStartShow=function(){this._canvas.addChild(this._topicsContainer,this._canvas._stage.getChildIndex(this._canvas._particlesContainer));var a;for(a=0;a<this._canvas.tags.length;a++)this._canvas.tags[a].explode();for(a=0;a<this._canvas.fakes.length;a++)this._canvas.fakes[a].explode();for(a=0;a<this._topics.length;a++)this._topics[a].show(),this._topics[a].mouseOverS.add(this.mouseOverB),this._topics[a].mouseOutS.add(this.mouseOutB);this._drawLinesBind=this._drawLines.bind(this),this._updateTopicsBind=this._updateTopics.bind(this),this._swipeToNextTopicBind=this._swipeToNextTopic.bind(this),this._swipeToPrevTopicBind=this._swipeToPrevTopic.bind(this),this._onTouchStartBind=this._onTouchStart.bind(this),this._canvas.renderStartS.add(this._drawLinesBind),this._canvas.renderStartS.add(this._updateTopicsBind),this._canvas.touchStartS.add(this._onTouchStartBind),d.IS_SMALL()&&(this._canvas.swipeLeftS.add(this._swipeToNextTopicBind),this._canvas.swipeRightS.add(this._swipeToPrevTopicBind)),setTimeout(this._onShow.bind(this),500)},e.prototype._onStartHide=function(){this._canvas.removeChild(this._topicsContainer);var a;for(a=0;a<this._topics.length;a++)this._topics[a].hide(),this._topics[a].mouseOverS.remove(this.mouseOverB),this._topics[a].mouseOutS.remove(this.mouseOutB);this._canvas.clearLines(),this._canvas.renderStartS.remove(this._drawLinesBind),this._canvas.renderStartS.remove(this._updateTopicsBind),this._canvas.swipeLeftS.remove(this._swipeToNextTopicBind),this._canvas.swipeRightS.remove(this._swipeToPrevTopicBind),setTimeout(this._onHide.bind(this),100)},e.prototype._swipeToNextTopic=function(){var b=new a.Point;this._currentTopic=Math.min(this._currentTopic+1,3),this._topics[this._currentTopic].setCurrent();for(var c=function(a){a._mouseOut(!0)},d=0;d<this._topics.length;d++)b.x=e.DISTANCE_BETWEEN_TOPICS*(d-this._currentTopic),b.y=-40,this._topics[d].moveTo(b.clone()),setTimeout(c,300,this._topics[d]),this._topics[d].setCurrent(d===this._currentTopic)},e.prototype._swipeToPrevTopic=function(){var b=new a.Point;this._currentTopic=Math.max(this._currentTopic-1,0);for(var c=function(a){a._mouseOut(!0)},d=0;d<this._topics.length;d++)b.x=e.DISTANCE_BETWEEN_TOPICS*(d-this._currentTopic),b.y=-40,this._topics[d].moveTo(b.clone()),setTimeout(c,300,this._topics[d]),this._topics[d].setCurrent(d===this._currentTopic)},e.prototype._onTouchStart=function(){this.selectedTopic&&setTimeout(function(a){a._isMouseOver()||a._mouseOut()}.bind(this),100,this.selectedTopic)},e}),function(a){"function"==typeof c&&c.amd?c("jquery-mousewheel",["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),c("experience/issues-mode",["pixi","experience/mode","experience/issue","experience/responsive","jquery","jquery-mousewheel"],function(a,b,c,d,e){var f=function(a){return this._canvas=a,b.MODES.push(this),this};return f.prototype=new b,f.prototype.constructor=f,f.prototype.init=function(){b.prototype.init.call(this),this._scrollPosition=this._scrollFinalPosition=0,this._touchPosition=this._touchDelta=this._touchFinalDelta=0,this._issueMargin=80,this._issues=this._canvas.issues,this._margin={top:200,left:500},d.IS_SMALL()&&(this._margin.top=250,this._margin.left=100),this._updateScroll()},f.prototype._updateScroll=function(){this._issues=this._issues.sort(function(a,b){return a.data.getId()>b.data.getId()?1:b.data.getId()>a.data.getId()?-1:0}),this._scrollArea=new a.Rectangle(-((this._canvas.canvasSize.x-this._margin.left)/2),-((this._canvas.canvasSize.y-this._margin.top)/2),this._canvas.canvasSize.x-this._margin.left,this._canvas.canvasSize.y-this._margin.top);var b,c;for(b=0;b<this._issues.length;b++)c=this._issues[b],c.issueX=this._scrollArea.x,c.issueY=this._scrollArea.y+this._issueMargin*b},f.prototype._drawLines=function(){var a,b,c;for(this._canvas.clearLines(),a=0;a<this._issues.length-1;a++)b=this._issues[a],c=this._issues[a+1],this._canvas.drawLine(b,c,0,.1)},f.prototype._mouseOverIssue=function(a){this.selectedIssue=a,a.mouseOver(this._canvas.mousePosition)},f.prototype._mouseOutIssue=function(a){this.selectedIssue=null,a.mouseOut()},f.prototype._onMouseWheel=function(a){this._scrollTo(a.deltaY/5)},f.prototype._onTouching=function(a){if(this.isOpen){var b=a.getLocalPosition(this._canvas._stage).y;b-=this._canvas.canvasSize.y/2,this._touchDelta=this._touchFinalDelta=b-this._touchPosition,this._touchPosition=b,this._scrollTo(this._touchDelta)}},f.prototype._onTouchStart=function(a){this.isOpen&&(this._touchInterval&&clearInterval(this._touchInterval),this._touchPosition=a.getLocalPosition(this._canvas._stage).y,this._touchPosition-=this._canvas.canvasSize.y/2)},f.prototype._onTouchEnd=function(){this.isOpen&&(this._touchInterval=setInterval(function(){this._touchDelta+=(this._touchFinalDelta-this._touchDelta)/5,this._scrollTo(this._touchDelta),Math.abs(this._touchFinalDelta-this._touchDelta)<1&&clearInterval(this._touchInterval)}.bind(this),1e3/15))},f.prototype._tapIssue=function(a){a._onMouseOver(),setTimeout(function(){a._onMouseOut(),a._onPress()},200)},f.prototype._scrollTo=function(a){this._scrollFinalPosition+=a,this._scrollFinalPosition=Math.max(Math.min(this._scrollFinalPosition,0),this._scrollArea.y-this._issueMargin*this._canvas.issues.length+1.5*this._scrollArea.height),this._scrollPosition+=(this._scrollFinalPosition-this._scrollPosition)/3;var b,c;for(b=0;b<this._canvas.issues.length;b++)c=this._canvas.issues[b],c.elm.y=Math.round(c.issueY+this._scrollPosition)},f.prototype._setIssueMouseEvents=function(a){a.issueMouseOver=this._mouseOverIssue.bind(this),a.issueMouseOut=this._mouseOutIssue.bind(this),a.issueTap=this._tapIssue.bind(this),a.mouseOverS.add(a.issueMouseOver),a.mouseOutS.add(a.issueMouseOut),a.tapS.add(a.issueTap)},f.prototype._onStartShow=function(){var a,b;for(this._scrollPosition=this._scrollFinalPosition=0,this._updateScroll(),a=0;a<this._issues.length;a++)b=this._issues[a],b.setMode(c.MODE_ISSUES),b.elm.alpha=1,b.moveTo(b.issueX,b.issueY),setTimeout(this._setIssueMouseEvents.bind(this),500,b);for(a=0;a<this._canvas.tags.length;a++)b=this._canvas.tags[a],b.explode();for(a=0;a<this._canvas.fakes.length;a++)this._canvas.fakes[a].explode();this._drawLinesBind=this._drawLines.bind(this),this._canvas.renderStartS.add(this._drawLinesBind),this._onMouseWheelBind=this._onMouseWheel.bind(this),e(document).on("mousewheel",this._onMouseWheelBind),this._canvas._stage.touchstart=this._onTouchStart.bind(this),this._canvas._stage.touchend=this._onTouchEnd.bind(this),this._canvas._stage.touchmove=this._onTouching.bind(this),setTimeout(this._onShow.bind(this),500)},f.prototype._onStartHide=function(){var a,b;for(a=0;a<this._issues.length;a++)b=this._issues[a],b.mouseOverS.remove(b.issueMouseOver),b.mouseOutS.remove(b.issueMouseOut);e(document).off("mousewheel",this._onMouseWheelBind),this._canvas.clearLines(),this._canvas.renderStartS.remove(this._drawLinesBind),setTimeout(this._onHide.bind(this),100)},f}),c("experience/tag-issues-mode",["pixi","signals","experience/mode","experience/issues-mode","experience/issue"],function(a,b,c,d,e){var f=function(a){return this._canvas=a,c.MODES.push(this),this.MODE=c,this.closeS=new b.Signal,this};return f.prototype=new d,f.prototype.constructor=f,f.prototype.init=function(){d.prototype.init.call(this),this._drawCloseButton(),this._margin.top+=this._issueMargin+100,this._updateScroll()},f.prototype._drawCloseButton=function(){this._closeButton=new a.DisplayObjectContainer;var b=a.Texture.fromImage("/images/icons/png/close.png"),c=new a.Sprite(b);c.x=-25,c.y=-25,this._closeButton.addChild(c),this._closeButton.x=this._canvas.canvasSize.x/2-65,this._closeButton.y=-(this._canvas.canvasSize.y/2)+65,this._closeButton.alpha=0,this._closeButton.elm=this._closeButton,this._closeButton.interactive=!0,this._closeButton.buttonMode=!0,this._closeButton.mousedown=this._closeButton.tap=this._onPressClose.bind(this),this._closeButtonContainer=new a.DisplayObjectContainer,this._closeButtonContainer.x=this._canvas.canvasSize.x/2,this._closeButtonContainer.y=this._canvas.canvasSize.y/2,this._closeButtonContainer.addChild(this._closeButton),this._canvas.addChild(this._closeButtonContainer)},f.prototype.setTag=function(a){this._tag=this._canvas.getElementByData(a),this._issues=[];for(var b=a.getRelated(),c=0;c<b.length;c++)this._issues.push(this._canvas.getElementByData(b[c]));this._updateScroll()},f.prototype._onPressClose=function(){this.hide(),this.closeS.dispatch()},f.prototype._drawLines=function(){var a,b,c;for(this._canvas.clearLines(),this._canvas.drawLine(this._closeButton,this._tag,16777215,.1),this._canvas.drawLine(this._tag,this._issues[0],16777215,.1),a=0;a<this._issues.length-1;a++)b=this._issues[a],c=this._issues[a+1],this._canvas.drawLine(b,c,16777215,.1)},f.prototype._scrollTo=function(a){d.prototype._scrollTo.call(this,a),this._tag.elm.y=Math.round(this._tag.issueY+this._scrollPosition)},f.prototype._onStartShow=function(){var a,b;for(this._scrollPosition=this._scrollFinalPosition=0,a=0;a<this._canvas.issues.length;a++)b=this._canvas.issues[a],b.explode();for(a=0;a<this._canvas.fakes.length;a++)this._canvas.fakes[a].explode();for(a=0;a<this._issues.length;a++)b=this._issues[a],b.setMode(e.MODE_TAG_ISSUES),b.moveTo(b.issueX,b.issueY),setTimeout(this._setIssueMouseEvents.bind(this),500,b);var c=this._tag._x0,d=this._tag._y0;this._tag.exploded=!1,this._tag.setMode(e.MODE_TAG_TITLE),this._tag.issueX=this._scrollArea.x-40,this._tag.issueY=this._scrollArea.y-this._issueMargin,this._tag.moveTo(this._tag.issueX,this._tag.issueY),this._tag._x0=c,this._tag._y0=d,this._closeButton.alpha=1,this._drawLinesBind=this._drawLines.bind(this),this._canvas.renderStartS.add(this._drawLinesBind),this._onMouseWheelBind=this._onMouseWheel.bind(this),$(document).on("mousewheel",this._onMouseWheelBind),this._canvas._stage.touchstart=this._onTouchStart.bind(this),this._canvas._stage.touchend=this._onTouchEnd.bind(this),this._canvas._stage.touchmove=this._onTouching.bind(this),setTimeout(this._onShow.bind(this),500)},f.prototype._onStartHide=function(){var a,b;for(a=0;a<this._canvas.issues.length;a++)b=this._canvas.issues[a],b.elm.alpha=1;this._tag.setMode(e.MODE_TAG),this._tag.explode(),$(document).off("mousewheel",this._onMouseWheelBind),this._canvas.clearLines(),this._closeButton.alpha=0,this._canvas.renderStartS.remove(this._drawLinesBind),setTimeout(this._onHide.bind(this),100)},f}),c("experience/detail-mode",["pixi","experience/mode","experience/issue"],function(a,b,c){var d=function(c){return this._canvas=c,b.MODES.push(this),this._detailContainer=new a.DisplayObjectContainer,this};return d.prototype=new b,d.prototype.constructor=d,d.prototype.init=function(){b.prototype.init.call(this);var a,c;for(a=0;a<this._canvas.issues.length;a++)c=this._canvas.issues[a],c.detailOffset=Math.random()*(this._canvas.canvasSize.x/30),c.detailOffset-=this._canvas.canvasSize.x/60;this._detailContainer.x=Math.round(this._canvas.canvasSize.x/2),this._detailContainer.y=Math.round(this._canvas.canvasSize.y/2)},d.prototype.onScroll=function(a){var b,c,d;for(b=0;b<this._canvas.issues.length;b++)c=this._canvas.issues[b],d=this._getIssuePosition(c,a),c.elm.x=d.x,c.elm.y=d.y,c.elm.alpha=1;var e,f,g;for(var h in this._topicElms)this._topicElms.hasOwnProperty(h)&&(e=this._topicElms[h],f=a<e._startY,g=void 0!==e._endY&&a>=e._endY,e.alpha=f||g?0:1)},d.prototype.setTopics=function(a){this._topics=a},d.prototype.setTopicMenuPositions=function(b){var c,d,e;this._topicElms={};for(var f=0;f<this._topics.length;f++)d=new a.Graphics,d.data=this._topics[f],d.elm=d,this._topicElms[this._topics[f].getId()]=d,this._detailContainer.addChild(d);for(var g in b)b.hasOwnProperty(g)&&(e=b[g],d=this._topicElms[g],d.x=d._x0=e.x,d.y=d._y0=e.y,d.data.getIssues()[0].offset&&(d._startY=d.data.getIssues()[0].offset.top-138,c&&(c._endY=d._startY),c=d))},d.prototype._getIssuePosition=function(a,b){b||(b=0);var c={x:0,y:0};c.y=a.data.titleOffset.top-b,c.y-=this._canvas.canvasSize.y/2;var d=(c.y+this._canvas.canvasSize.y/2)/this._canvas.canvasSize.y;return d=6*Math.pow(d,2)-6*d+1,d=Math.max(d,0),c.x=a.detailOffset*d,c.x+=a.data.titleOffset.left-this._canvas.canvasSize.x/2,c.x=Math.round(c.x),c.y=Math.round(c.y),c},d.prototype._drawLines=function(){this._canvas.clearLines();var a,b,c,d,e;if(this._canvas.clearLines(),this._topicElms)for(a=0;a<this._topics.length;a++)if(d=this._topics[a],e=this._topicElms[d.getId()],e.alpha>0)for(b=0;b<d._issues.length;b++)c=this._canvas.getElementByData(d._issues[b]),this._canvas.drawLine(c,e,16777215,.2)},d.prototype._onStartShow=function(){var a,b;for(a=0;a<this._canvas.issues.length;a++)b=this._canvas.issues[a],b.setMode(c.MODE_DETAIL),b.elm.alpha=0;for(a=0;a<this._canvas.tags.length;a++)b=this._canvas.tags[a],b.explode();for(a=0;a<this._canvas.fakes.length;a++)b=this._canvas.fakes[a],b.explode();this._drawLinesBind=this._drawLines.bind(this),this._canvas.renderStartS.add(this._drawLinesBind),this._canvas.addChild(this._detailContainer),setTimeout(this._onShow.bind(this),500)},d.prototype._onStartHide=function(){this._canvas.renderStartS.remove(this._drawLinesBind),this._canvas.removeChild(this._detailContainer),setTimeout(this._onHide.bind(this),100)},d}),c("experience/intro-mode",["pixi","gs","experience/circle","experience/mode","experience/responsive"],function(a,b,c,d,e){var f=function(a){return this._canvas=a,this};return f.prototype=new d,f.prototype.constructor=f,f.prototype.init=function(){d.prototype.init.call(this),this._introContainer=new a.DisplayObjectContainer,this._introContainer.x=Math.round(this._canvas.canvasSize.x/2),this._introContainer.y=Math.round(this._canvas.canvasSize.y/2);var b={font:'200 24px "Fira Sans", sans-serif',fill:"#222222"};this._message=new a.Text(this._introData.message,b),this._message.resolution=e.RATIO,this._message.x=Math.round(-(this._message.width/e.RATIO)/2),this._message.y=-90,this._message.alpha=0,this._introContainer.addChild(this._message);var f={font:'300 12px "Fira Sans", sans-serif',fill:"#222222"};this._internet=new a.Text(this._introData.internet,f),this._internet.resolution=e.RATIO,this._internet.x=Math.round(-(this._internet.width/e.RATIO)/2),this._internet.y=25,this._internet.alpha=0,this._introContainer.addChild(this._internet),this._circle=new c,this._circle.draw(6),this._introContainer.addChild(this._circle.elm),this._circle._resumeStaticAnimation(),this._circle.stopMoving(),this._circle.elm.alpha=0,this._clickArea=new a.Graphics,this._clickArea.hitArea=new a.Rectangle(0,0,this._canvas.canvasSize.x,this._canvas.canvasSize.y),this._clickArea.x=-this._introContainer.x,this._clickArea.y=-this._introContainer.y,this._clickArea.interactive=!0,this._clickArea.buttonMode=!0,this._clickArea.mousedown=this._clickArea.tap=this._onPressClose.bind(this),this._introContainer.addChild(this._clickArea),e.IS_SMALL()&&(this._message.setStyle({font:'200 16px "Fira Sans", sans-serif',fill:"#222222",align:"center",wordWrap:!0,wordWrapWidth:e.SIZE.x-80}),this._message.x=Math.round(-(this._message.width/e.RATIO)/2),this._message.y=-(this._message.height/e.RATIO)-30)},f.prototype.setData=function(a){this._introData=a},f.prototype._onPressClose=function(){this.hide()},f.prototype._onStartShow=function(){var a,c;for(c=0;c<this._canvas.issues.length;c++)a=this._canvas.issues[c],a.elm.interactive=!1;for(c=0;c<this._canvas.tags.length;c++)a=this._canvas.tags[c],a.elm.interactive=!1;this._canvas.addChild(this._introContainer),b.TweenMax.to(this._circle.elm,.4,{alpha:1,overwrite:!0}),b.TweenMax.to(this._message,.4,{alpha:1,overwrite:!0,delay:2.5}),b.TweenMax.to(this._internet,.4,{alpha:1,overwrite:!0}),setTimeout(this._onShow.bind(this),500)},f.prototype._onStartHide=function(){var a,c;for(c=0;c<this._canvas.issues.length;c++)a=this._canvas.issues[c],a.elm.interactive=!0;for(c=0;c<this._canvas.tags.length;c++)a=this._canvas.tags[c],a.elm.interactive=!0;this._circle.elm.alpha=0,b.TweenMax.to(this._message,.2,{alpha:0,overwrite:!0}),b.TweenMax.to(this._internet,.2,{alpha:0,overwrite:!0}),setTimeout(function(){this._canvas.removeChild(this._introContainer)}.bind(this),200),setTimeout(this._onHide.bind(this),100)},f}),c("experience/experience",["stats","webfontloader","lorax/models/tag","experience/experience-canvas","experience/explore-mode","experience/topics-mode","experience/issues-mode","experience/tag-issues-mode","experience/detail-mode","experience/intro-mode","experience/issue","jquery-mobile"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(){this._canvas=new d,this._exploreMode=new e(this._canvas),this._topicsMode=new f(this._canvas),this._issuesMode=new g(this._canvas),this._tagIssuesMode=new h(this._canvas),this._detailMode=new i(this._canvas),this._introMode=new j(this._canvas)};return l.prototype.init=function(a){a&&this._showStats(),b.load({active:this._onFontsLoaded.bind(this),custom:{families:["Fira Sans:n2,n3,n4,n5,n6,n7,n8,n9"]}})},l.prototype._onFontsLoaded=function(){this._canvas.drawIssues(this._issueData),this._canvas.drawTags(this._tagData),this._canvas.pressIssueS.add(this._openIssue.bind(this)),this._canvas.hide(),this._exploreMode.init(),this._topicsMode.init(),this._issuesMode.init(),this._tagIssuesMode.init(),this._detailMode.init(),this._introMode.init(),this._introMode.hideS.add(this._onEndIntro.bind(this)),this._tagIssuesMode.closeS.add(this._onCloseTagIssues.bind(this)),setTimeout(function(){this._hasInitialized=!0,this._onInitMode&&this._onInitMode(this._onInitData)}.bind(this),500)},l.prototype.setData=function(a){this._mainData=a,this._issueData=a.getIssues(),this._tagData=a.getTags(),this._topicsModeData=a.getTopics(),this._miscData=a.getMiscLocale(),this._topicsMode.setData(this._topicsModeData),this._detailMode.setTopics(this._topicsModeData),this._introMode.setData(this._miscData.intro)
},l.prototype.setContainer=function(a){this._canvas.init(a)},l.prototype.setEnterIssueCallback=function(a){this._enterIssueCallback=a},l.prototype.setBgModeCallback=function(a){this._setBgMode=a},l.prototype.setOpenTagCallBack=function(a){this._openTag=a},l.prototype.setGoToIndexCallBack=function(a){this._goToIndex=a},l.prototype.setExploreSafezone=function(a){this._exploreMode.setSafeZone(a)},l.prototype.setTopicMenuPositions=function(a){this._detailMode.setTopicMenuPositions(a)},l.prototype.endAutoPlay=function(){this._mode===k.MODE_EXPLORE&&this._exploreMode._endAutoMode()},l.prototype.startAutoPlay=function(){this._mode===k.MODE_EXPLORE&&this._exploreMode._endAutoMode(!0)},l.prototype._showStats=function(){this._stats=new a,this._stats.setMode(0),this._stats.domElement.style.position="absolute",this._stats.domElement.style.left="0px",this._stats.domElement.style.top="0px",document.body.appendChild(this._stats.domElement),this._canvas.renderStartS.add(function(){this._stats.begin()}.bind(this)),this._canvas.renderEndS.add(function(){this._stats.end()}.bind(this))},l.prototype.hold=function(){this._onInitMode=function(){}},l.prototype.showExplore=function(){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_EXPLORE,this._exploreMode.show(),this._setBgMode("")):this._onInitMode=this.showExplore},l.prototype.showIssues=function(){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_ISSUES,this._issuesMode.show(),this._setBgMode("")):this._onInitMode=this.showIssues},l.prototype.showTopics=function(){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_TOPICS,this._topicsMode.show(),this._setBgMode("")):this._onInitMode=this.showTopics},l.prototype.showDetail=function(){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_DETAIL,this._detailMode.show(),this._currentIssue&&this._currentIssue.closeIssue()):this._onInitMode=this.showDetail},l.prototype.showTagIssues=function(a){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_TAG_ISSUES,this._tagIssuesMode.setTag(this._mainData.getTagByURLId(a)),this._tagIssuesMode.show(),this._setBgMode("tag")):(this._onInitMode=this.showTagIssues,this._onInitData=a)},l.prototype.showIntro=function(){this._hasInitialized?(this._canvas.show(),this._mode=k.MODE_INTRO,this._introMode.show(),this._setBgMode("intro")):this._onInitMode=this.showIntro},l.prototype._onCloseTagIssues=function(){this._goToIndex()},l.prototype._onEndIntro=function(){this._goToIndex()},l.prototype.onScroll=function(a){this._mode===k.MODE_DETAIL&&this._detailMode.onScroll(Math.max(Math.round(a),0))},l.prototype._openIssue=function(a){if(c.prototype.isPrototypeOf(a.data))return void this._openTag(a.data.getURLId());if(this._mode=k.MODE_DETAIL,this._currentIssue=a,this._enterIssueCallback){var b=a.data;this._setBgMode&&this._setBgMode(b.getStatusDescription()),a.openIssue(),this._enterIssueCallback(b.getParent().getId(),b.getId()),this.showDetail()}},l.prototype._updateScroller=function(a){(a.y>this._canvasSize.y||a.y<-this._canvasSize.y)&&(a.y=0);var b=Math.tan(a.y/this._canvasSize.y*Math.PI/2);Math.abs(b)<.5&&(b=0),this._scrollFinalPosition-=8*b,this._scrollFinalPosition=Math.max(Math.min(this._scrollFinalPosition,0),-(this._scrollArea.y+this._issueMargin*this._issuesMode.length)+this._scrollArea.height-200),this._scrollPosition+=(this._scrollFinalPosition-this._scrollPosition)/5;var c,d;for(c=0;c<this._issuesMode.length;c++)d=this._issuesMode[c],d.elm.y=d.issueY+this._scrollPosition},l}),c("lorax/services/experience",["jquery","experience/experience"],function(a,b){var c=function(c,d,e,f,g){this._$location=c,this._$timeout=d,this._$window=e,this._windowService=f,this._experience=new b,this._experience.setEnterIssueCallback(this._onPressIssue.bind(this)),this._experience.setBgModeCallback(this._onChangeBgMode.bind(this)),this._experience.setGoToIndexCallBack(this._goToIndex.bind(this)),this._experience.setOpenTagCallBack(this._openTag.bind(this));var h=a(".experience-menu"),i={x:h.offset().left-a("#experience-canvas").width()/2,y:h.offset().top-a("#experience-canvas").height()/2,width:h.outerWidth(),height:h.outerHeight()};this._experience.setExploreSafezone(i),g.getMain().then(this.setData.bind(this)),this._windowService.subscribe("onOpenModal",this.onModalOpen.bind(this))};return c.prototype.setMenuPositions=function(){if("small"!==this._windowService.breakpoint()){var b={};a(".banner-nav li a").each(function(c,d){d=a(d),b[a(d).attr("data-topic")]={x:d.offset().left+d.innerWidth()/2-5-a("#experience-canvas").width()/2,y:d.innerHeight()/2+15-a("#experience-canvas").height()/2}})}this._experience.setTopicMenuPositions(b)},c.prototype.setData=function(a){this._data=a,this._checkIfReady()},c.prototype.setContainer=function(a){this._container=a,this._checkIfReady()},c.prototype.onModalOpen=function(a){a?this._experience.endAutoPlay():this._experience.startAutoPlay()},c.prototype._checkIfReady=function(){this._experience&&this._data&&this._container&&(this._experience.setContainer(this._container),this._experience.setData(this._data),this._view&&this.switchView(this._view,this._viewData),this._experience.init(),this._offset&&this.onScroll(this._offset))},c.prototype.switchView=function(a,b){if(this._experience)switch(a){case"intro":this._experience.showIntro();break;case"ecosystem":this._experience.showExplore();break;case"vitals":this._experience.showTopics();break;case"checklist":this._experience.showIssues();break;case"tag":this._experience.showTagIssues(b);break;case"detail":this._experience.showDetail();break;default:this._experience.hold()}this._view=a,this._viewData=b},c.prototype.onScroll=function(a){this._experience&&this._experience.onScroll(a),this._offset=a},c.prototype._onPressIssue=function(a,b){this._$timeout(function(){this._$location.url("/detail/"+a+"/"+b)}.bind(this))},c.prototype._onChangeBgMode=function(a,b){this._windowService.setBgMode(a,b)},c.prototype._goToIndex=function(){this._$timeout(function(){this._$location.url("/")}.bind(this))},c.prototype._openTag=function(a){this._$timeout(function(){this._$location.url("/tag/"+a)}.bind(this))},c.$inject=["$location","$timeout","$window","windowService","dataService"],c}),c("lorax/services/routes",[],function(){var a=function(a,b,c,d,e){this._$rootScope=a,this._$location=b,this._$route=c,this._$timeout=d,this._pubSubService=e,this._$rootScope.$on("$routeChangeSuccess",function(a,b){this._onRouteChange(b)}.bind(this)),this._pubSubService.subscribe("windowService.issue",this._onIssueChange.bind(this))};return a.prototype._onRouteChange=function(a){this.page=a.page,this.params=a.params,this._pubSubService.publish("routesService.change",[this.page,this.params])},a.prototype._onIssueChange=function(a){var b=a.getParent().getId(),c=a.getId();this._$timeout(function(){this._$location.url("/detail/"+b+"/"+c).replace()}.bind(this))},a.prototype.subscribe=function(a,b){this._pubSubService.subscribe("routesService."+a,function(a,c){b(c)})},a.prototype.unsubscribe=function(a,b){this._pubSubService.unsubscribe("routesService."+a,b)},a.$inject=["$rootScope","$location","$route","$timeout","pubSubService"],a}),c("lorax/filters/encode-uri",[],function(){var a=function(a){return a.encodeURIComponent};return a.$inject=["$window"],a}),function(a,b){function c(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,!r&&(d||q)&&c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw h("norout","Tried updating route when with no current route");var c={},d=this;b.forEach(Object.keys(a),function(b){d.current.pathParams[b]||(c[b]=a[b])}),a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(b.extend({},e.search(),c))}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function d(){this.$get=function(){return{}}}function e(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){b.isDefined(o)&&(!o||e.$eval(o))&&c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function f(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var g=b.module("ngRoute",["ng"]).provider("$route",c),h=b.$$minErr("ngRoute");g.provider("$routeParams",d),g.directive("ngView",e),g.directive("ngView",f),e.$inject=["$route","$anchorScroll","$animate"],f.$inject=["$compile","$controller","$route"]}(window,window.angular),c("angular-route",["angular"],function(){}),function(a,b,c){b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){return p(a)?(a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(!c||"removeClass"==h.event)&&f.push(b)}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(v.isClassBased&&!v.isSetClassOperation&&"animate"!=a&&!C&&(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(r);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),J(a,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(r)||{},k=E(c,h,j.active);return k?H("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);{b[G+M]}h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(-1==k.getAttribute("class").indexOf(c)||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),d(),void 0;!v&&e&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){return v(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,(!c.running||0===c.running)&&a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),c("angular-animate",["angular"],function(){}),c("lorax/lorax-app",["lorax/config/routes","lorax/controllers/core","lorax/controllers/nav","lorax/directives/window","lorax/directives/prevent-default","lorax/directives/modal-email","lorax/directives/modal-share","lorax/directives/modal-about","lorax/directives/modal-legend","lorax/directives/modal-mobile-options","lorax/directives/issue-details","lorax/directives/issue-all","lorax/directives/chart-terms-and-conditions","lorax/directives/chart-common-languages","lorax/directives/chart-world-map","lorax/directives/chart-accessible","lorax/directives/chart-platform-neutrality","lorax/directives/chart-lobbying","lorax/directives/chart-cyber-threats","lorax/directives/chart-data-portability","lorax/directives/chart-open-source","lorax/directives/chart-surveillance","lorax/directives/chart-data-tracking","lorax/directives/chart-concentration-power","lorax/directives/chart-public-trust","lorax/directives/chart-infrastructure","lorax/directives/chart-identity-control","lorax/directives/chart-cloud-security","lorax/directives/chart-cyber-bullying","lorax/directives/chart-zero-rating","lorax/directives/chart-content-creation","lorax/directives/experience","lorax/directives/detail","lorax/directives/add-infographic-directive","lorax/services/window","lorax/services/scroll","lorax/services/utils","lorax/services/pubsub","lorax/services/data","lorax/services/experience","lorax/services/routes","lorax/filters/encode-uri","angular","angular-route","angular-animate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q){return Q.module("loraxApp",["ngRoute","ngAnimate"]).config(a).controller("CoreCtrl",b).controller("NavCtrl",c).directive("loraxWindow",d).directive("loraxPreventDefault",e).directive("loraxModalEmail",f).directive("loraxModalShare",g).directive("loraxModalAbout",h).directive("loraxModalLegend",i).directive("loraxModalMobileOptions",j).directive("loraxIssueDetails",k).directive("loraxIssueAll",l).directive("loraxChartTermsAndConditions",m).directive("loraxChartCommonLanguages",n).directive("loraxChartWorldMap",o).directive("loraxChartAccessible",p).directive("loraxChartPlatformNeutrality",q).directive("loraxChartLobbying",r).directive("loraxChartCyberThreats",s).directive("loraxChartDataPortability",t).directive("loraxChartOpenSource",u).directive("loraxChartSurveillance",v).directive("loraxChartDataTracking",w).directive("loraxChartConcentrationPower",x).directive("loraxChartPublicTrust",y).directive("loraxChartInfrastructure",z).directive("loraxChartIdentityControl",A).directive("loraxChartCloudSecurity",B).directive("loraxChartCyberBullying",C).directive("loraxChartZeroRating",D).directive("loraxChartContentCreation",E).directive("loraxExperience",F).directive("loraxDetail",G).directive("loraxAddInfographicDirective",H).service("windowService",I).service("scrollService",J).service("utilsService",K).service("experienceService",N).service("routesService",O).factory("pubSubService",L).factory("dataService",M).filter("encodeUri",P),Q.bootstrap(document,["loraxApp"])}),b(["lorax/lorax-app"])}();